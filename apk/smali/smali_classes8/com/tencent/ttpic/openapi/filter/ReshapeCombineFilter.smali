.class public Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;
.super Lcom/tencent/aekit/openrender/internal/VideoFilterBase;
.source "ReshapeCombineFilter.java"


# static fields
.field public static final FRAGMENT_SHADER:Ljava/lang/String; = "mee641x1684433187x1193305701x1380343628x1162692417x1348424782x1229145426x1313818963x1195984991x538970696x1919950880x1936286565x544108393x1751607656x1818632304x997482863x-433115360x-1931038828x-1733564031x-440487193x-1125144902x-1868961396x-426070299x-2098745675x-1952520775x-373638940x-1293444949x-1497700930x1818567434x537552243x1881153568x1768121714x1852795251x1684368672x1886221673x1869375008x540767329x-1193005265x-1349196147x-377385754x-1293444949x-1497700930x-376652561x-1360686951x-1363810662x-440827161x-1192981602x-1380391750x-440487193x587900602x1768189541x1963592294x1868982638x1931505010x1819307361x1144156773x1886284064x1833530485x1415931745x1970567269x171664754x2037539190x543649385x1751607656x1702240368x1948267107x1970567269x1866687858x1768190575x1702125934x1853164091x1919903337x1768431725x544237671x1886216563x846357868x1852383300x1232369008x1701273965x1954047316x845509237x1870006843x1830839401x678324577x175841321x538976288x1818701615x1634879071x1819231079x1025536623x1667593760x1702111284x1920300152x1869562725x1852400754x744846433x892219424x774971436x171649328x538976266x1982803744x540304229x1869377379x540876914x1954047348x845509237x1852385348x1232369008x1701273965x1954047316x845509237x1702109228x1920300152x1869562725x1852400754x694514785x538970683x791617568x1869377379x544747122x1663574077x1919904879x808286254x707343662x724577848x993340976x538976266x1664036640x1919904879x1025538350x1868769312x779251564x774909305x942287157x808136750x171652398x538976288x1818701615x1634879071x1819231079x1025536623x1819239200x171668079x538976266x1600939808x1734439494x1869377347x540876914x1954047348x845509237x1852385348x1232369008x1701273965x1954047316x744845941x2019914784x1701999988x1919905603x1634625892x992568692x175966730x10x"

.field public static final VERTEX_SHADER:Ljava/lang/String; = "mee1125x1667592816x1869181801x1768431726x544237671x1634692198x1963604852x1868982638x1931505010x1819307361x1144156773x1886284064x1833530485x1415931745x1970567269x171664754x1718185589x544043631x1886216563x846357868x1852383300x1232369008x1701273965x1954047316x845509237x1963592251x1868982638x1981836658x540173157x1952671094x1632465519x2053722992x1963604837x1868982638x1981836658x540173157x1702521203x1952516667x1651077748x543519861x878929270x1936683040x1869182057x1628060526x1769108596x1702131042x1667593760x1852383282x1416918384x1970567269x1866687858x1768190575x1702125934x1635125819x1852406130x1702240359x1948267107x1970567269x1866687858x1768190575x1702125934x1980369467x543451503x1852399981x2065705256x538970634x791617568x878929270x1819239200x1025536623x2019914784x1701999988x1764246578x1953853550x1734438217x2019906661x1701999988x1763716146x1953853550x1954047316x1130721909x1685221231x1952542313x171649381x538976288x1702244143x1948267107x1147499890x543581801x1868767293x779251564x706771320x909455904x790638638x892678688x723529774x1819239200x2049864303x539631735x775304498x539959344x775238962x539959344x775238962x537541424x790634528x1869375023x1679848545x1025538148x1920215072x1766090101x2016306790x807415072x539571502x775036970x537541424x790634528x1869375023x1679848545x1025538404x1920215072x1766090101x2033084006x807415072x539571502x775036970x537541424x790634528x1970435119x1718174821x540876902x845374838x2019845160x2036622380x539631657x1952671094x1632465519x2053722992x539959397x1702521203x538970683x791617568x845374838x1717989152x544499059x1920213053x1766090101x171664998x538976266x1667593760x1868767284x544370540x1702109245x1920300152x675557989x1970302569x1634552180x1700029799x1920300152x539767397x1970302569x2019906676x1701999988x1919905603x1634625892x992568692x538976266x1667593760x1718558770x1952805734x673201440x1869377379x2037919346x840968736x808334645x1663052576x1919904879x695695918x824192800x892221234x824192288x171651118x538976288x1936090735x1025537125x1717989152x544499059x1702240298x1919906915x1399873869x543521385x1769152559x171664762x538976266x1982803744x540304229x1869377379x540876914x1954047348x845509237x1852385348x1232369008x1701273965x1954047316x845509237x1852383276x1416918384x1970567269x1866687858x1768190575x1702125934x537541417x790634528x1667593775x1718558770x1952805734x673201440x1869377379x2037919346x840968736x808334901x1663052576x1919904879x695695918x824192800x808335410x824192288x171651118x538976288x1718562607x1952805734x1864383776x1702061670x539631732x1952671094x1632465519x2053722992x539959397x1702521203x537528891x1981816864x540173157x1886611812x1701011820x1936674916x1869182057x540876910x1769172848x1852795252x544831534x1718558763x1952805734x538970683x1702109216x1920300152x1869562725x1852400754x543519841x1768169533x1634496627x1348756835x1953067887x997093225x538976266x1600939808x1769172816x1852795252x1981824288x674521957x1769172848x1852795252x841644078x825045038x539766830x1769172848x1852795252x841644334x825045038x539766830x741355056x808333600x2097822505x10x"

.field public static final XCOORD_NUM:I = 0x80

.field public static final YCOORD_NUM:I = 0x80

.field private static mFullscreenVerticesPortrait:[F

.field private static mInitTextureCoordinatesPortrait:[F

.field private static positionArray:[F


# instance fields
.field private eyeMaskTex:I

.field private size:[F

.field private vectorMapSize:[F


# direct methods
.method static constructor <clinit>()V
    .locals 1

    .prologue
    .line 33
    const/4 v0, 0x0

    sput-object v0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->positionArray:[F

    return-void
.end method

.method public constructor <init>()V
    .locals 3

    .prologue
    const/4 v2, 0x2

    .line 40
    const-string v0, "mee1125x1667592816x1869181801x1768431726x544237671x1634692198x1963604852x1868982638x1931505010x1819307361x1144156773x1886284064x1833530485x1415931745x1970567269x171664754x1718185589x544043631x1886216563x846357868x1852383300x1232369008x1701273965x1954047316x845509237x1963592251x1868982638x1981836658x540173157x1952671094x1632465519x2053722992x1963604837x1868982638x1981836658x540173157x1702521203x1952516667x1651077748x543519861x878929270x1936683040x1869182057x1628060526x1769108596x1702131042x1667593760x1852383282x1416918384x1970567269x1866687858x1768190575x1702125934x1635125819x1852406130x1702240359x1948267107x1970567269x1866687858x1768190575x1702125934x1980369467x543451503x1852399981x2065705256x538970634x791617568x878929270x1819239200x1025536623x2019914784x1701999988x1764246578x1953853550x1734438217x2019906661x1701999988x1763716146x1953853550x1954047316x1130721909x1685221231x1952542313x171649381x538976288x1702244143x1948267107x1147499890x543581801x1868767293x779251564x706771320x909455904x790638638x892678688x723529774x1819239200x2049864303x539631735x775304498x539959344x775238962x539959344x775238962x537541424x790634528x1869375023x1679848545x1025538148x1920215072x1766090101x2016306790x807415072x539571502x775036970x537541424x790634528x1869375023x1679848545x1025538404x1920215072x1766090101x2033084006x807415072x539571502x775036970x537541424x790634528x1970435119x1718174821x540876902x845374838x2019845160x2036622380x539631657x1952671094x1632465519x2053722992x539959397x1702521203x538970683x791617568x845374838x1717989152x544499059x1920213053x1766090101x171664998x538976266x1667593760x1868767284x544370540x1702109245x1920300152x675557989x1970302569x1634552180x1700029799x1920300152x539767397x1970302569x2019906676x1701999988x1919905603x1634625892x992568692x538976266x1667593760x1718558770x1952805734x673201440x1869377379x2037919346x840968736x808334645x1663052576x1919904879x695695918x824192800x892221234x824192288x171651118x538976288x1936090735x1025537125x1717989152x544499059x1702240298x1919906915x1399873869x543521385x1769152559x171664762x538976266x1982803744x540304229x1869377379x540876914x1954047348x845509237x1852385348x1232369008x1701273965x1954047316x845509237x1852383276x1416918384x1970567269x1866687858x1768190575x1702125934x537541417x790634528x1667593775x1718558770x1952805734x673201440x1869377379x2037919346x840968736x808334901x1663052576x1919904879x695695918x824192800x808335410x824192288x171651118x538976288x1718562607x1952805734x1864383776x1702061670x539631732x1952671094x1632465519x2053722992x539959397x1702521203x537528891x1981816864x540173157x1886611812x1701011820x1936674916x1869182057x540876910x1769172848x1852795252x544831534x1718558763x1952805734x538970683x1702109216x1920300152x1869562725x1852400754x543519841x1768169533x1634496627x1348756835x1953067887x997093225x538976266x1600939808x1769172816x1852795252x1981824288x674521957x1769172848x1852795252x841644078x825045038x539766830x1769172848x1852795252x841644334x825045038x539766830x741355056x808333600x2097822505x10x"

    invoke-static {v0}, Lcom/tencent/filter/BaseFilter;->nativeDecrypt(Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    const-string v1, "mee641x1684433187x1193305701x1380343628x1162692417x1348424782x1229145426x1313818963x1195984991x538970696x1919950880x1936286565x544108393x1751607656x1818632304x997482863x-433115360x-1931038828x-1733564031x-440487193x-1125144902x-1868961396x-426070299x-2098745675x-1952520775x-373638940x-1293444949x-1497700930x1818567434x537552243x1881153568x1768121714x1852795251x1684368672x1886221673x1869375008x540767329x-1193005265x-1349196147x-377385754x-1293444949x-1497700930x-376652561x-1360686951x-1363810662x-440827161x-1192981602x-1380391750x-440487193x587900602x1768189541x1963592294x1868982638x1931505010x1819307361x1144156773x1886284064x1833530485x1415931745x1970567269x171664754x2037539190x543649385x1751607656x1702240368x1948267107x1970567269x1866687858x1768190575x1702125934x1853164091x1919903337x1768431725x544237671x1886216563x846357868x1852383300x1232369008x1701273965x1954047316x845509237x1870006843x1830839401x678324577x175841321x538976288x1818701615x1634879071x1819231079x1025536623x1667593760x1702111284x1920300152x1869562725x1852400754x744846433x892219424x774971436x171649328x538976266x1982803744x540304229x1869377379x540876914x1954047348x845509237x1852385348x1232369008x1701273965x1954047316x845509237x1702109228x1920300152x1869562725x1852400754x694514785x538970683x791617568x1869377379x544747122x1663574077x1919904879x808286254x707343662x724577848x993340976x538976266x1664036640x1919904879x1025538350x1868769312x779251564x774909305x942287157x808136750x171652398x538976288x1818701615x1634879071x1819231079x1025536623x1819239200x171668079x538976266x1600939808x1734439494x1869377347x540876914x1954047348x845509237x1852385348x1232369008x1701273965x1954047316x744845941x2019914784x1701999988x1919905603x1634625892x992568692x175966730x10x"

    invoke-static {v1}, Lcom/tencent/filter/BaseFilter;->nativeDecrypt(Ljava/lang/String;)Ljava/lang/String;

    move-result-object v1

    invoke-direct {p0, v0, v1}, Lcom/tencent/aekit/openrender/internal/VideoFilterBase;-><init>(Ljava/lang/String;Ljava/lang/String;)V

    .line 35
    const/4 v0, 0x0

    iput v0, p0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->eyeMaskTex:I

    .line 36
    new-array v0, v2, [F

    fill-array-data v0, :array_0

    iput-object v0, p0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->size:[F

    .line 37
    new-array v0, v2, [F

    fill-array-data v0, :array_1

    iput-object v0, p0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->vectorMapSize:[F

    .line 42
    invoke-virtual {p0}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->initParams()V

    .line 43
    return-void

    .line 36
    nop

    :array_0
    .array-data 4
        0x3f800000    # 1.0f
        0x3f800000    # 1.0f
    .end array-data

    .line 37
    :array_1
    .array-data 4
        0x3f800000    # 1.0f
        0x3f800000    # 1.0f
    .end array-data
.end method


# virtual methods
.method public ApplyGLSLFilter()V
    .locals 1

    .prologue
    .line 76
    invoke-virtual {p0}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->initParams()V

    .line 77
    invoke-super {p0}, Lcom/tencent/aekit/openrender/internal/VideoFilterBase;->ApplyGLSLFilter()V

    .line 78
    sget-object v0, Lcom/tencent/aekit/openrender/config/RenderConfig$DRAW_MODE;->TRIANGLE_STRIP:Lcom/tencent/aekit/openrender/config/RenderConfig$DRAW_MODE;

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->setDrawMode(Lcom/tencent/aekit/openrender/config/RenderConfig$DRAW_MODE;)V

    .line 79
    return-void
.end method

.method public initAttribParams()V
    .locals 2

    .prologue
    const/4 v1, 0x0

    .line 69
    sget-object v0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->mFullscreenVerticesPortrait:[F

    invoke-virtual {p0, v0, v1}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->setPositions([FZ)Z

    .line 70
    sget-object v0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->mInitTextureCoordinatesPortrait:[F

    invoke-virtual {p0, v0, v1}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->setTexCords([FZ)Z

    .line 71
    const v0, 0x8081

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->setCoordNum(I)Z

    .line 72
    return-void
.end method

.method public initParams()V
    .locals 4

    .prologue
    .line 62
    new-instance v0, Lcom/tencent/aekit/openrender/UniformParam$TextureParam;

    const-string v1, "inputImageTexture2"

    iget v2, p0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->eyeMaskTex:I

    const v3, 0x84c2

    invoke-direct {v0, v1, v2, v3}, Lcom/tencent/aekit/openrender/UniformParam$TextureParam;-><init>(Ljava/lang/String;II)V

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->addParam(Lcom/tencent/aekit/openrender/UniformParam;)V

    .line 63
    new-instance v0, Lcom/tencent/aekit/openrender/UniformParam$FloatsParam;

    const-string v1, "size"

    iget-object v2, p0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->size:[F

    invoke-direct {v0, v1, v2}, Lcom/tencent/aekit/openrender/UniformParam$FloatsParam;-><init>(Ljava/lang/String;[F)V

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->addParam(Lcom/tencent/aekit/openrender/UniformParam;)V

    .line 64
    new-instance v0, Lcom/tencent/aekit/openrender/UniformParam$FloatsParam;

    const-string/jumbo v1, "vectorMapSize"

    iget-object v2, p0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->vectorMapSize:[F

    invoke-direct {v0, v1, v2}, Lcom/tencent/aekit/openrender/UniformParam$FloatsParam;-><init>(Ljava/lang/String;[F)V

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->addParam(Lcom/tencent/aekit/openrender/UniformParam;)V

    .line 65
    return-void
.end method

.method public setInitMesh([F[F)V
    .locals 0
    .param p1, "fullscreenVerticesPortrait"    # [F
    .param p2, "initTextureCoordinatesPortrait"    # [F

    .prologue
    .line 46
    sput-object p1, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->mFullscreenVerticesPortrait:[F

    .line 47
    sput-object p2, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->mInitTextureCoordinatesPortrait:[F

    .line 48
    return-void
.end method

.method public setParam(Ljava/util/Map;)V
    .locals 1
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/util/Map",
            "<",
            "Ljava/lang/String;",
            "Ljava/lang/Object;",
            ">;)V"
        }
    .end annotation

    .prologue
    .line 82
    .local p1, "param":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Ljava/lang/Object;>;"
    if-eqz p1, :cond_0

    invoke-interface {p1}, Ljava/util/Map;->isEmpty()Z

    move-result v0

    if-eqz v0, :cond_1

    .line 95
    :cond_0
    :goto_0
    return-void

    .line 85
    :cond_1
    const-string v0, "inputImageTexture2"

    invoke-interface {p1, v0}, Ljava/util/Map;->containsKey(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_2

    .line 86
    const-string v0, "inputImageTexture2"

    invoke-interface {p1, v0}, Ljava/util/Map;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/Integer;

    invoke-virtual {v0}, Ljava/lang/Integer;->intValue()I

    move-result v0

    iput v0, p0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->eyeMaskTex:I

    .line 88
    :cond_2
    const-string v0, "size"

    invoke-interface {p1, v0}, Ljava/util/Map;->containsKey(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_3

    .line 89
    const-string v0, "size"

    invoke-interface {p1, v0}, Ljava/util/Map;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, [F

    check-cast v0, [F

    iput-object v0, p0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->size:[F

    .line 91
    :cond_3
    const-string/jumbo v0, "vectorMapSize"

    invoke-interface {p1, v0}, Ljava/util/Map;->containsKey(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_4

    .line 92
    const-string/jumbo v0, "vectorMapSize"

    invoke-interface {p1, v0}, Ljava/util/Map;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, [F

    check-cast v0, [F

    iput-object v0, p0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->vectorMapSize:[F

    .line 94
    :cond_4
    invoke-virtual {p0}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->initParams()V

    goto :goto_0
.end method

.method public updateSize(FFFF)V
    .locals 7
    .param p1, "left"    # F
    .param p2, "right"    # F
    .param p3, "bottom"    # F
    .param p4, "top"    # F

    .prologue
    const/16 v1, 0x80

    .line 51
    sget-object v0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->positionArray:[F

    if-nez v0, :cond_0

    .line 52
    sget-object v0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->mFullscreenVerticesPortrait:[F

    array-length v0, v0

    new-array v0, v0, [F

    sput-object v0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->positionArray:[F

    .line 54
    :cond_0
    sget-object v0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->positionArray:[F

    move v2, v1

    move v3, p1

    move v4, p2

    move v5, p3

    move v6, p4

    invoke-static/range {v0 .. v6}, Lcom/tencent/ttpic/openapi/util/VideoMaterialUtil;->genFullScreenVertices([FIIFFFF)I

    .line 55
    sget-object v0, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->positionArray:[F

    const/4 v1, 0x0

    invoke-virtual {p0, v0, v1}, Lcom/tencent/ttpic/openapi/filter/ReshapeCombineFilter;->setPositions([FZ)Z

    .line 58
    return-void
.end method

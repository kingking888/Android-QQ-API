.class public Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;
.super Lcom/tencent/filter/BaseFilter;
.source "ColorToneFilter.java"


# static fields
.field private static final FRAGMENT_SHADER:Ljava/lang/String; = "mee1221x2037539190x543649385x1751607656x1702240368x1948267107x1970567269x1866687858x1768190575x1702125934x1853164091x1919903337x1634934893x1701605485x541340274x1970302569x1634552180x1700029799x1920300152x1963604837x1868982638x1931505010x1819307361x1144156773x1886284064x1833530485x1415931745x1970567269x993158514x1768846602x1836216166x2003790880x1818632304x544498031x1752198241x1980382049x543451503x1852399981x2065705256x538976266x1751607656x1702240368x1948267619x1970567269x1866687858x544370540x1702109245x1920300152x675557989x1970302569x1634552180x1700029799x1920300152x1948265573x1970567269x1866687858x1768190575x1702125934x537541417x1768431648x544237671x1634692198x1818370164x1866687861x544370540x1702109245x1920300152x1819231077x1647211119x908077600x993013299x538976266x1751607656x1702240368x1897935459x828662133x537534523x1970348064x774988897x540876921x1869573222x1818634354x678588271x1702194274x1869377347x790636914x808335392x537541417x1970348064x774988897x540876920x1869573222x1818372210x1866687861x695365484x673197344x1684108657x544812593x775430186x171649328x1746935840x1885890409x1667593760x1970348082x993158241x538976266x1684108657x544812594x1818632253x678588271x1818846563x1970037288x1819231077x539587183x775430191x171649328x1897930784x845439349x1025538094x1768252192x1818372204x1866687861x695365484x673197344x1684108657x544812594x775430186x171649328x1746935840x1885890409x1667593760x1702109234x1936674936x537541425x1702109216x1936674936x544747057x1898455101x828662133x706770990x825110560x539571506x774905899x825569077x540028466x673718315x842083888x539828277x791686705x775041333x706750768x2019914784x1701999988x1869377347x695348850x538970683x2019914784x829648720x1025538350x1970350112x774988897x539631737x842083888x723527989x892219424x842085679x723529774x807938080x892481838x824192288x892284974x808333873x539631657x1954047348x1130721909x1919904879x992569134x538976266x1751607656x1702240368x1948267107x1867544677x171651699x1948262432x1867544677x2016293491x673201440x1684108657x544747058x774905898x691352113x807414560x892286254x808333873x673196832x825110568x757085490x808333600x842085679x539570222x1702109226x1920300152x1819231077x1915646575x537541417x1702109216x1936674936x544812594x1898455101x845439349x706771246x825110560x539571506x774905899x825569077x540028466x673718315x842083888x539828277x791686705x775041333x706750768x2019914784x1701999988x1869377347x694627954x538970683x2003790880x1702240368x1847604323x1866692453x829583212x1948269856x1970567269x1144153458x1886284072x1833530485x1415931745x1970567269x741500274x2019914784x829648720x537541417x1869357088x1981837431x540304229x1131898222x1919904879x540876850x1954047348x845509237x1852385348x1232369008x1701273965x1954047316x845509237x1702109228x1936674936x171649330x1814044704x544241519x878929270x2003136032x1869377347x540160370x1768759357x1701718136x1819231095x741438063x2003136032x1869377347x539767410x1667330662x1818372212x1866687861x695365484x537541417x1869357088x1981837431x540304229x1131898222x1919904879x1830829344x1948809321x1970567269x1866687858x745697132x2003136032x1869377347x741486962x1886150944x992567656x538976266x1180658791x1130848626x1919904879x1981824288x674521957x1131898222x1919904879x1650946606x1702109228x1920300152x1819231077x1999532655x2097822505x10x"


# instance fields
.field private mAlpha:F

.field private mTextures:[I


# direct methods
.method public constructor <init>()V
    .locals 4

    .prologue
    .line 25
    const-string v0, "mee1221x2037539190x543649385x1751607656x1702240368x1948267107x1970567269x1866687858x1768190575x1702125934x1853164091x1919903337x1634934893x1701605485x541340274x1970302569x1634552180x1700029799x1920300152x1963604837x1868982638x1931505010x1819307361x1144156773x1886284064x1833530485x1415931745x1970567269x993158514x1768846602x1836216166x2003790880x1818632304x544498031x1752198241x1980382049x543451503x1852399981x2065705256x538976266x1751607656x1702240368x1948267619x1970567269x1866687858x544370540x1702109245x1920300152x675557989x1970302569x1634552180x1700029799x1920300152x1948265573x1970567269x1866687858x1768190575x1702125934x537541417x1768431648x544237671x1634692198x1818370164x1866687861x544370540x1702109245x1920300152x1819231077x1647211119x908077600x993013299x538976266x1751607656x1702240368x1897935459x828662133x537534523x1970348064x774988897x540876921x1869573222x1818634354x678588271x1702194274x1869377347x790636914x808335392x537541417x1970348064x774988897x540876920x1869573222x1818372210x1866687861x695365484x673197344x1684108657x544812593x775430186x171649328x1746935840x1885890409x1667593760x1970348082x993158241x538976266x1684108657x544812594x1818632253x678588271x1818846563x1970037288x1819231077x539587183x775430191x171649328x1897930784x845439349x1025538094x1768252192x1818372204x1866687861x695365484x673197344x1684108657x544812594x775430186x171649328x1746935840x1885890409x1667593760x1702109234x1936674936x537541425x1702109216x1936674936x544747057x1898455101x828662133x706770990x825110560x539571506x774905899x825569077x540028466x673718315x842083888x539828277x791686705x775041333x706750768x2019914784x1701999988x1869377347x695348850x538970683x2019914784x829648720x1025538350x1970350112x774988897x539631737x842083888x723527989x892219424x842085679x723529774x807938080x892481838x824192288x892284974x808333873x539631657x1954047348x1130721909x1919904879x992569134x538976266x1751607656x1702240368x1948267107x1867544677x171651699x1948262432x1867544677x2016293491x673201440x1684108657x544747058x774905898x691352113x807414560x892286254x808333873x673196832x825110568x757085490x808333600x842085679x539570222x1702109226x1920300152x1819231077x1915646575x537541417x1702109216x1936674936x544812594x1898455101x845439349x706771246x825110560x539571506x774905899x825569077x540028466x673718315x842083888x539828277x791686705x775041333x706750768x2019914784x1701999988x1869377347x694627954x538970683x2003790880x1702240368x1847604323x1866692453x829583212x1948269856x1970567269x1144153458x1886284072x1833530485x1415931745x1970567269x741500274x2019914784x829648720x537541417x1869357088x1981837431x540304229x1131898222x1919904879x540876850x1954047348x845509237x1852385348x1232369008x1701273965x1954047316x845509237x1702109228x1936674936x171649330x1814044704x544241519x878929270x2003136032x1869377347x540160370x1768759357x1701718136x1819231095x741438063x2003136032x1869377347x539767410x1667330662x1818372212x1866687861x695365484x537541417x1869357088x1981837431x540304229x1131898222x1919904879x1830829344x1948809321x1970567269x1866687858x745697132x2003136032x1869377347x741486962x1886150944x992567656x538976266x1180658791x1130848626x1919904879x1981824288x674521957x1131898222x1919904879x1650946606x1702109228x1920300152x1819231077x1999532655x2097822505x10x"

    invoke-direct {p0, v0}, Lcom/tencent/filter/BaseFilter;-><init>(Ljava/lang/String;)V

    .line 21
    const/4 v0, 0x0

    iput v0, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mAlpha:F

    .line 22
    const/4 v0, 0x2

    new-array v0, v0, [I

    iput-object v0, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mTextures:[I

    .line 26
    new-instance v0, Lcom/tencent/aekit/openrender/UniformParam$FloatParam;

    const-string v1, "alpha"

    iget v2, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mAlpha:F

    invoke-direct {v0, v1, v2}, Lcom/tencent/aekit/openrender/UniformParam$FloatParam;-><init>(Ljava/lang/String;F)V

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->addParam(Lcom/tencent/aekit/openrender/UniformParam;)Lcom/tencent/filter/BaseFilter;

    .line 27
    new-instance v0, Lcom/tencent/aekit/openrender/UniformParam$TextureParam;

    const-string v1, "inputImageTexture2"

    const/4 v2, 0x0

    const v3, 0x84c2

    invoke-direct {v0, v1, v2, v3}, Lcom/tencent/aekit/openrender/UniformParam$TextureParam;-><init>(Ljava/lang/String;II)V

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->addParam(Lcom/tencent/aekit/openrender/UniformParam;)Lcom/tencent/filter/BaseFilter;

    .line 28
    return-void
.end method


# virtual methods
.method public apply()V
    .locals 5

    .prologue
    const/4 v4, 0x0

    .line 46
    const-string v2, "assets://raw/sh/color_tone_hongrun.png"

    invoke-static {v2}, Lcom/tencent/ttpic/openapi/factory/TTPicFilterFactoryLocal;->getBitmapFromEncryptedFile(Ljava/lang/String;)Landroid/graphics/Bitmap;

    move-result-object v0

    .line 47
    .local v0, "lut1":Landroid/graphics/Bitmap;
    const-string v2, "assets://raw/sh/color_tone_baixi.png"

    invoke-static {v2}, Lcom/tencent/ttpic/openapi/factory/TTPicFilterFactoryLocal;->getBitmapFromEncryptedFile(Ljava/lang/String;)Landroid/graphics/Bitmap;

    move-result-object v1

    .line 48
    .local v1, "lut2":Landroid/graphics/Bitmap;
    iget-object v2, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mTextures:[I

    array-length v2, v2

    iget-object v3, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mTextures:[I

    invoke-static {v2, v3, v4}, Landroid/opengl/GLES20;->glGenTextures(I[II)V

    .line 49
    iget-object v2, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mTextures:[I

    aget v2, v2, v4

    invoke-static {v2, v0}, Lcom/tencent/aekit/openrender/util/GlUtil;->loadTexture(ILandroid/graphics/Bitmap;)V

    .line 50
    iget-object v2, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mTextures:[I

    const/4 v3, 0x1

    aget v2, v2, v3

    invoke-static {v2, v1}, Lcom/tencent/aekit/openrender/util/GlUtil;->loadTexture(ILandroid/graphics/Bitmap;)V

    .line 51
    invoke-static {v0}, Lcom/tencent/ttpic/baseutils/bitmap/BitmapUtils;->isLegal(Landroid/graphics/Bitmap;)Z

    move-result v2

    if-eqz v2, :cond_0

    .line 52
    invoke-virtual {v0}, Landroid/graphics/Bitmap;->recycle()V

    .line 54
    :cond_0
    invoke-static {v1}, Lcom/tencent/ttpic/baseutils/bitmap/BitmapUtils;->isLegal(Landroid/graphics/Bitmap;)Z

    move-result v2

    if-eqz v2, :cond_1

    .line 55
    invoke-virtual {v1}, Landroid/graphics/Bitmap;->recycle()V

    .line 57
    :cond_1
    invoke-super {p0}, Lcom/tencent/filter/BaseFilter;->apply()V

    .line 58
    return-void
.end method

.method public clearGLSLSelf()V
    .locals 3

    .prologue
    .line 62
    iget-object v0, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mTextures:[I

    array-length v0, v0

    iget-object v1, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mTextures:[I

    const/4 v2, 0x0

    invoke-static {v0, v1, v2}, Landroid/opengl/GLES20;->glDeleteTextures(I[II)V

    .line 63
    invoke-super {p0}, Lcom/tencent/filter/BaseFilter;->clearGLSLSelf()V

    .line 64
    return-void
.end method

.method public needRender()Z
    .locals 2

    .prologue
    .line 41
    iget v0, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mAlpha:F

    invoke-static {v0}, Ljava/lang/Math;->abs(F)F

    move-result v0

    const v1, 0x3c23d70a    # 0.01f

    cmpl-float v0, v0, v1

    if-lez v0, :cond_0

    const/4 v0, 0x1

    :goto_0
    return v0

    :cond_0
    const/4 v0, 0x0

    goto :goto_0
.end method

.method public updateAlpha(F)V
    .locals 5
    .param p1, "alpha"    # F

    .prologue
    const v4, 0x84c2

    .line 31
    iput p1, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mAlpha:F

    .line 32
    new-instance v0, Lcom/tencent/aekit/openrender/UniformParam$FloatParam;

    const-string v1, "alpha"

    invoke-static {p1}, Ljava/lang/Math;->abs(F)F

    move-result v2

    invoke-direct {v0, v1, v2}, Lcom/tencent/aekit/openrender/UniformParam$FloatParam;-><init>(Ljava/lang/String;F)V

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->addParam(Lcom/tencent/aekit/openrender/UniformParam;)Lcom/tencent/filter/BaseFilter;

    .line 33
    const/4 v0, 0x0

    cmpg-float v0, p1, v0

    if-gez v0, :cond_0

    .line 34
    new-instance v0, Lcom/tencent/aekit/openrender/UniformParam$TextureParam;

    const-string v1, "inputImageTexture2"

    iget-object v2, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mTextures:[I

    const/4 v3, 0x0

    aget v2, v2, v3

    invoke-direct {v0, v1, v2, v4}, Lcom/tencent/aekit/openrender/UniformParam$TextureParam;-><init>(Ljava/lang/String;II)V

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->addParam(Lcom/tencent/aekit/openrender/UniformParam;)Lcom/tencent/filter/BaseFilter;

    .line 38
    :goto_0
    return-void

    .line 36
    :cond_0
    new-instance v0, Lcom/tencent/aekit/openrender/UniformParam$TextureParam;

    const-string v1, "inputImageTexture2"

    iget-object v2, p0, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->mTextures:[I

    const/4 v3, 0x1

    aget v2, v2, v3

    invoke-direct {v0, v1, v2, v4}, Lcom/tencent/aekit/openrender/UniformParam$TextureParam;-><init>(Ljava/lang/String;II)V

    invoke-virtual {p0, v0}, Lcom/tencent/ttpic/openapi/filter/ColorToneFilter;->addParam(Lcom/tencent/aekit/openrender/UniformParam;)Lcom/tencent/filter/BaseFilter;

    goto :goto_0
.end method

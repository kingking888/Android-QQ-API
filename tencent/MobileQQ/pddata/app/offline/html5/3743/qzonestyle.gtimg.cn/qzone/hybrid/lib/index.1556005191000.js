(function(){var e=[],n=parseFloat(seajs.version);define(["zepto"],function(require,t,i){var o=i.uri||i.id,a=o.split("?")[0].match(/^(.+\/)([^\/]*?)(?:\.js)?$/i),r=a&&a[1],s=a&&"./"+a[2],c=0,l=e.length,f,d;s=s.replace(/\.r[0-9]{15}/,"");for(;c<l;c++){d=e[c];if(typeof d[0]==="string"){s===d[0]&&(f=d[2]);d[0]=r+d[0].replace("./","");n>1&&define.apply(this,d)}}e=[];require.get=require;return typeof f==="function"?f.apply(this,arguments):require});define.pack=function(){e.push(arguments);n>1||define.apply(null,arguments)}})();define.pack("./ajax",["zepto"],function(require,e,n){var t=require("zepto");e.request=function(e,n){var o=n||t.Deferred();if(!n){e=t.extend({type:"get",forceLogin:true,forceNotProxy:false,dataType:"json",data:{},timeout:0,startTime:Date.now()},e);a(e).done(function(e){i(e,o)});return o}i(e,o);return o};e.getConfig=function(e,n){var i=t.Deferred();var o=window.HYB&&window.HYB.imgcache||"qzonestyle.gtimg.cn"
;var a="//"+o+"/qzone/qzactStatics/configSystem/data/"+e+"/config"+n+".js";require.async(a,function(e){i.resolve(e)});return i};function i(n,i){var a=t.Deferred();var r=function(){try{o(t.ajax(n),a)}catch(e){a.reject()}};if(n.requestType==="jsonp"){require.async("./ajax.jsonp",function(e){o(e.request(n),a)})}else if(n.useJsBridge===true){if(n.data&&typeof n.data!="object"){r()}else{require.async("./ajax.wns",function(e){o(e.request(n),a)})}}else{r()}a.done(function(t){n.endTime=Date.now();if(t&&t.code===undefined){t.code=t.ret||0;t.message=t.msg}if(t&&t.code===-3001&&t.subcode===402){require.async("hybridPath/common/verifyCode/index.js",function(t){t.show({submitCallback:function(t){if(n&&n.data){n.data.verify=t}else{n.data={verify:t}}e.request(n,i)},cancelCallback:function(){a.done(i.resolve)}})})}else if(t&&t.code===-3005&&t.target){seajs.use("hybridPath/lib/pow/pow",function(o){if(!o){a.done(i.resolve);return}var r=(new Date).getTime();o.getResult({target:t.target},function(o){
var a=n&&n.url||"";n.url=a+(a.indexOf("?")>-1?"&":"?")+"pow="+t.target+"&powret="+o+"&powcost="+((new Date).getTime()-r);e.request(n,i)})})}else if(t&&t.code===-3e3&&n.forceLogin){location.href="https://h5.qzone.qq.com/refreshskey/index?from=hybridLib&refer_url="+encodeURIComponent(location.href.replace(/\bsid[^&#]*/g,"").replace("?&","?"))}else if(t&&t.code===3015&&location.hostname=="h5.abcmouse.qq.com"){location.reload()}else{a.done(i.resolve)}});s(n,a);a.fail(i.reject);n.successCb&&i.done(n.successCb);n.errorCb&&i.fail(n.errorCb);n.completeCb&&i.always(n.completeCb)}function o(e,n){e.done(n.resolve);e.fail(n.reject)}function a(e){var n=t.Deferred();var i=e.url;i=i+(i.indexOf("?")>-1?"&":"?")+"t="+Math.random();var o=function(){var e=document.createElement("a");e.href=i;var n=e.hostname||e.host;e=null;return n}()
;var a=["h5.abcmouse.qq.com","h5.qzone.qq.com","h5s.qzone.qq.com","imgcache.qq.com","qzonestyle.gtimg.cn","m.qzone.com","mobile.qzone.qq.com","fm.qzone.qq.com","fm.qq.com","h5test.qzone.qq.com","h5.weishi.qq.com"];var s=["h5.qzone.qq.com","h5s.qzone.qq.com","fm.qq.com","h5test.qzone.qq.com","fm.qzone.qq.com","h5.abcmouse.qq.com","h5.weishi.qq.com"];var c="h5.qzone.qq.com";if(t.inArray(location.host,s)!==-1){c=location.host}if(location.protocol==="https:"||window.HYB&&HYB.jsHttps){if(t.inArray(o,a)===-1&&!e.forceNotProxy){i=i.replace(/^(http:)?\/\//,"https://"+c+"/proxy/domain/")}else{i=i.replace(/^(http:)?\/\//,"https://")}}if((window.HYB&&HYB.devMode||window.isH5Test||e.requestType==="proxy")&&!e.forceNotProxy&&t.inArray(o,s)===-1&&i.indexOf("proxy/domain")===-1){i="//"+c+"/proxy/domain/"+i.replace(/(http(s)?:)?\/\//,"")}
if(!window.HYB||!window.HYB.browserInfo||!(HYB.browserInfo.client==="qq"&&HYB.browserInfo.compareVersion("7.0","nlt")||HYB.browserInfo.client==="qzone"&&HYB.browserInfo.platform==="ios"&&HYB.browserInfo.compareVersion("6.9","nlt")||HYB.browserInfo.client==="qzone"&&HYB.browserInfo.platform==="android"&&HYB.browserInfo.compareVersion("8.0.0","nlt"))||window.navigator&&navigator.platform==="Win32"){e.useJsBridge=false}else{if(i.indexOf("webapp/json/publishDiyMood/publishmood")!==-1&&location.href.indexOf("checkin/index")!==-1){if(+l.getUin()%10<7||window.isH5Test){e.useJsBridge=true;e.mdInterfaceId=104979400}else{e.useJsBridge=false;e.mdInterfaceId=104979401}}else if(i.indexOf("blognew/add_blog")!==-1&&location.href.indexOf("blog/editor2")!==-1){if(+l.getUin()%10<7||window.isH5Test){e.useJsBridge=true;e.mdInterfaceId=104979420}else{e.useJsBridge=false;e.mdInterfaceId=104979421}}if(e.mdInterfaceId===104979407){e.mdInterfaceId=104979461}}if(i.indexOf("g_tk=")===-1){
i=i+(i.indexOf("?")===-1?"?":"&")+"g_tk="+(i.indexOf("qzone.qq.com")>=0||i.indexOf("abcmouse.qq.com")>=0||i.indexOf("weishi.qq.com")>=0||i.indexOf("fm.qq.com")>=0?l.getPskeyToken():l.getToken())}if(i.indexOf("uin=")===-1&&!(e.data&&e.data.uin)){e.data.uin=l.getUin()}if(e.type==="get"&&!e.data.uin){i=i+(i.indexOf("?")===-1?"?":"&")+"uin="+l.getUin()}if(window.shine0callback&&window.shine0callback!=""){i=i+(i.indexOf("?")===-1?"?":"&")+"qzonetoken="+window.shine0callback}e.url=i;if(e.requestType!=="jsonp"){e.xhrFields=e.xhrFields||{};if(e.xhrFields.withCredentials===undefined){e.xhrFields.withCredentials=true}}e.data.format=e.data.format||e.dataType;e.data.inCharset=e.data.inCharset||"utf-8";e.data.outCharset=e.data.outCharset||"utf-8";e.successCb=e.success;e.errorCb=e.error;e.completeCb=e.complete;delete e.success;delete e.error;delete e.complete;if(e.url.indexOf("webapp/json/publishDiyMood/publishmood")!==-1){setTimeout(function(){n.resolve(e)},2e3);r().done(function(t){if(t){
e.url=e.url+(e.url.indexOf("?")>-1?"&":"?")+"WebTicket="+t}n.resolve(e)})}else{n.resolve(e)}return n}function r(){var e=t.Deferred();if(!window.TencentKepler&&window.g_kepler){seajs.use(window.g_kepler,function(){if(window.TencentKepler){TencentKepler.predict(function(n){e.resolve(n)})}else{e.resolve("")}})}else if(window.TencentKepler){TencentKepler.predict(function(n){e.resolve(n)})}else{e.resolve("")}return e}function s(e,n){var t=e.url.substring(e.url.lastIndexOf("/")+1,e.url.length).split("?")[0];window.logger&&logger.log("ajax send",{type:e.type,dataType:e.dataType,url:t});require.async("./stat",function(i){n.done(function(n){var o=n&&n.code,a=0;if(e&&e.mdInterfaceId){var r=null;if(e.wnsType=="empty"){a=1e6}else if(e.wnsType=="success"){a=1e7}else if(e.wnsType=="fail"){a=1e8}if(typeof e.rate==="number"){r={rate:e.rate}}i.md.report({fromId:e.fromId||211006089,toId:e.toId||211006088,interfaceId:e.mdInterfaceId,code:(o?parseInt(o):0)+a,type:o===0?0:2,delay:e.endTime-e.startTime},r)}
window.logger&&logger.log("ajax success",{url:t,delay:e.endTime-e.startTime,code:(o?parseInt(o):0)+a})}).fail(function(n,t){var o=t&&{timeout:999,parsererror:511}[t]||n&&n.status||0;if(e&&e.mdInterfaceId){var a=0;if(e.wnsType==="empty"){a=1e6}else if(e.wnsType==="success"){a=1e7}else if(e.wnsType==="fail"){a=1e8}i.md.report({fromId:e.fromId||211006089,toId:e.toId||211006088,interfaceId:e.mdInterfaceId,code:(o?parseInt(o):0)+a,type:1,delay:e.endTime-e.startTime})}var r="url:"+e.url+";errorCode:"+o;if(o==0){r+=";type="+t+";xhr.status="+(n&&n.status||0)}if(e&&e.data&&e.data.cmd&&e.data.cmd!=""){r+=";cmd:"+e.data.cmd}window.logger&&logger.log("hybrid_ajax_error",r);i.text.report(r,"hybrid_ajax_error")})})}function c(e){var n=new RegExp("(?:^|;\\s*)"+e+"=([^;]*)"),t=document.cookie.match(n);return t&&t[1]||""}var l={getUin:function(){var e;return function(){if(e)return e;if(e=c("uin")){e=parseInt(e.replace("o",""),10)}else if(e=c("p_uin")){e=parseInt(e.replace("o",""),10)}return e}}(),
getToken:function(){var e=null,n=null;return function(){var t=c("skey")||"",i=5381,o=n;if(t){if(t!==e){e=t;var a=0,r=t.length;for(;a<r;++a){i+=(i<<5)+t.charAt(a).charCodeAt()}n=o=i&2147483647}}else{n=o=""}return o}}(),getPskeyToken:function(){var e=null,n=null;return function(){var t=c("p_skey")||c("skey")||c("rv2")||c("access_token")||"",i=5381,o=n;if(t){if(t!==e){e=t;var a=0,r=t.length;for(;a<r;++a){i+=(i<<5)+t.charAt(a).charCodeAt()}n=o=i&2147483647}}else{n=o=""}return o}}()}});define.pack("./ajax.jsonp",["zepto"],function(require,e,n){var t=require("zepto");var i={};var o=0;function a(e){var n=t.Deferred();var o=e.jsonpCallback;var a=function(e){setTimeout(function(){if(!e){i[o].shift();if(!(e=i[o][0])){return}}var n=t.ajax(e.config);n.done(e.defer.resolve);n.fail(e.defer.reject)},0)};i[o]=(i[o]||[]).concat([{config:e,defer:n}]);n.always(function(){a()});if(i[o].length===1){a(i[o][0])}return n}e.request=function(e){e.dataType="jsonp";var n;if(e.qzoneCoolCbName){
e.data.callbackFun="qzoneCool"+o;e.jsonpCallback="qzoneCool"+o+"_Callback";o++}if(e.jsonpCallback){n=a(e)}else{n=t.ajax(e)}return n}});define.pack("./ajax.wns",["zepto"],function(require,e,n){var t=require("zepto");e.request=function(e){var n;var o=e.type||"get",a=e.url;if(location.host!="h5.qzone.qq.com"){try{n=t.ajax(e)}catch(e){n=t.Deferred();n.reject()}return n}a=a.replace(/^(http(s)?:)?\/\//,location.protocol+"//");e.dataType=e.dataType||"json";if(e.data&&e.data.format==="jsonp")e.data.format="json";n=t.Deferred();var r=2e3;var s=false;var c=function(){try{var i=t.ajax(e);i.done(n.resolve);i.fail(n.reject)}catch(e){n.reject()}return n};var l=setTimeout(function(){s=true;require.async("./stat",function(n){var t=0;if(HYB.browserInfo.platform=="android"){if(HYB.browserInfo.compareVersion("7.1","gt")){t=1}else{t=2}}else{t=3}n.text.report(HYB.browserInfo.platform+"_wnsCgi_timeout");n.md.report({fromId:e.fromId||211006089,toId:e.toId||211006088,interfaceId:104979462,code:t,type:0,
delay:Date.now()-e.startTime})});return c()},r);var f={method:o,url:a,body:e.data,timeout:r,dataNeedBase64:false};require.async("jssdk",function(){if(!window.mqq){clearTimeout(l);return c()}mqq.invoke("QzoneData","wnsCgi",f,function(o){if(s){return}clearTimeout(l);var r;var c=i("old_deprecated_k",i("g_tk",o.url));var f=i("old_deprecated_k",i("g_tk",a));if(o&&c===f&&o.status==4&&o.code==0&&o.data){e.wnsType="success";r=true;if(e.dataType=="json"){o.data=JSON.parse(o.data)}n.resolve(o.data)}else if(e.needRetryByWnsCgi===false){e.wnsType="fail";n.reject()}else{if(!o){e.wnsType="empty"}else{e.wnsType="fail"}try{var d=t.ajax(e);d.done(n.resolve);d.fail(n.reject)}catch(e){n.reject()}}require.async(["./stat"],function(n){var t=104979402;if(r){e.wnsType="success";n.md.report({fromId:204971707,toId:211006088,interfaceId:t,code:0,type:0,delay:(e.endTime||Date.now())-e.startTime})}else if(!o){e.wnsType="empty";n.md.report({fromId:204971707,toId:211006088,interfaceId:t,code:-1e3,type:1,
delay:(e.endTime||Date.now())-e.startTime});n.text.report("wnsCgi_empty","wnsCgi_empty")}else{e.wnsType="fail";if(!o.code)o.code=0;n.md.report({fromId:204971707,toId:211006088,interfaceId:t,code:(o.code>0?1:2)+""+o.status+""+Math.abs(o.code),type:1,delay:(e.endTime||Date.now())-e.startTime});if(o.code==101&&o.status==1){n.text.report("typeof conf.data="+typeof e.data+"; conf.data="+JSON.stringify(e.data),HYB.browserInfo.platform+"_wnsCgi_body_error")}else{n.text.report(JSON.stringify(o),HYB.browserInfo.platform+"_wnsCgi_error")}}})})});return n};function i(e,n){var t=n.split("?")[0],i,o=[],a=n.indexOf("?")!==-1?n.split("?")[1]:"";if(a!==""){o=a.split("&");for(var r=o.length-1;r>=0;r-=1){i=o[r].split("=")[0];if(i===e){o.splice(r,1)}}t=t+"?"+o.join("&")}return t}});define.pack("./browser",["zepto","./util","./storage","./ajax"],function(require,e,n){var t=require("zepto");var i=require("./util");var o=require("./storage").cookie;var a=navigator.userAgent||"",r={}
;var s=a.match(/(iPad).*OS\s([\d_]+)/),c=!s&&(a.match(/(iPhone\sOS)\s([\d_]+)/i)||a.match("iPhone")),l=a.match(/(iPod).*OS\s([\d_]+)/),f=a.match(/(Android)\s+([\d.]+)/)||a.match(/Android/),d=a.match(/Windows Phone ([\d.]+)/),u=s||c||s||d||f;var p=a.match(/Qzone\/[^ ]*/)&&a.match(/Qzone\/[^ ]*/)[0]||"";if(p&&p!=""){p=p.replace("Qzone/","")}if(!p||p==""){var m=/(V\S+_\S+_\S+_\S+_\S+_\S+_\S+)/;p=a.match(m)&&a.match(m)[1]||"";if(!p||p==""){p=a.match(/QQ\/[^ ]*/)&&a.match(/QQ\/[^ ]*/)[0]||"";if(p&&p!=""){p=p.replace("QQ/","");var g=p.split(".");if(g&&g.length==4){p="V1_IPH_SQ_"+g[0]+"."+g[1]+"."+g[2]+"_1_APP_A"}else{p=""}}}}r.isMobile=!!u;r.platform=function(){var e;if(c||s||l){e="ios"}else if(f){e="android"}else if(d){e="wp"}return e}();r.client=function(){
var e=a.match(/MicroMessenger\/([\d\.]+)/),n=/\bcom\.tencent\.qgame\/([\d\.]+)/.test(a),t=a.match("tgclub"),i=a.match(/QQ\/([\d\.]+)/),o=a.match("Qzone"),r=/QQMUSIC\/(\d[\.\d]*)/i.test(a),s=a.match("_FM_"),c=a.match("QQLiveBrowser"),l=a.match("_WEISHI_"),f=/\/qqdownloader\/(\d+)(?:\/(appdetail|external|sdk))?/.test(a),d=a.match("_KG_"),u=a.match("Weibo"),p=a.match(/Weiyun\/(\d\.)+/),m=a.match("_PITU_"),g=a.match("MQQBrowser")&&!n&&!t;isQNReading=a.match(/qnreading\/([\d\.]*)/i);var h;if(i){h="qq"}else if(o){h="qzone"}else if(e){h="wx"}else if(s){h="fm"}else if(r){h="qqmusic"}else if(l){h="ws"}else if(c){h="tencentVideo"}else if(f){h="yyb"}else if(u){h="wb"}else if(m){h="ttpic"}else if(d){h="kg"}else if(p){h="Weiyun"}else if(n){h="QQEGame"}else if(t){h="xinYueClub"}else if(g){h="QQBrowser"}else if(isQNReading){h="QNReading"}return h}();r.os={iPad:s,iPhone:c,android:f,wp:d};r.getInfo=function(){return r};r.setQuaString=function(e){p=e};r.getQuaString=function(){return p}
;r.getQuaObj=function(){return i.formatQua(p)};r.getQuaVersion=function(){return r.getQuaObj(p).version};r.getOsVersion=function(){var e,n;if(r.platform=="ios"){e=a&&a.match(/OS\s([\d\_\.]+)/);if(e&&e[1]){n=e[1].replace(/_/g,".")}}else if(r.platform=="android"){e=a&&a.match(/Android[\s\/]+([\d\_\.]+)/);if(e&&e[1]){n=e[1].replace(/_/g,".")}}return{platform:r.platform,version:n}};r.compareOsVersion=function(e,n){if(!a){return false}var t="";var i;if(c){i=a.match(/(iPhone\sOS)\s([\d_]+)/);if(i.length>2){t=i[2].split("_").join(".")}else{t=""}}else if(f){i=a.match(/(Android)\s+([\d.]+)/);if(i.length>2){t=i[2]}else{t=""}}else{return false}var o=function(e,n,t){if(!e[t]&&!n[t]){return 0}return(e[t]||0)-(n[t]||0)||o(e,n,t+1)};var r=o(t.split("."),(e+"").split("."),0);r=r<0?-1:r>0?1:0;switch(n){case"eq":return r===0;case"neq":return r!==0;case"lt":return r<0;case"nlt":return r>=0;case"gt":return r>0;case"ngt":return r<=0;default:return r}};r.compareVersion=function(e,n){if(!p){return false}
var t=function(e,n,i){if(!e[i]&&!n[i]){return 0}return(e[i]||0)-(n[i]||0)||t(e,n,i+1)};var i=t(r.getQuaVersion().split("."),(e+"").split("."),0);i=i<0?-1:i>0?1:0;switch(n){case"eq":return i===0;case"neq":return i!==0;case"lt":return i<0;case"nlt":return i>=0;case"gt":return i>0;case"ngt":return i<=0;default:return i}};r.getQua=function(){var e;function n(n,t,i){clearTimeout(i);e=n;t.resolve(n)}return function(){var i=t.Deferred();if(e){i.resolve(e)}else{var o=setTimeout(function(){n("",i)},1e3);if(r.client==="qzone"){if(p){n(p,i,o)}else if(window.QZAppExternal){QZAppExternal.getQUA(function(e){n(e,i,o)})}else{n("",i,o)}}else if(r.client==="qq"){if(r.platform==="ios"){window.QQMusicJSInterface={onRecieve:function(e){n(e.data.value,i,o)}};try{require.async(r.getApiUrl(),function(e){e&&e.invoke("QzMusic","getQua")})}catch(e){}}else{n(p,i,o)}}else{n("",i,o)}}return i}}();r.isGMPackage=function(){var e=t.Deferred()
;var n=!!(location.search&&location.search.match(/\bqua=V\S+_\S+_\S+_\S+_+\S+_GM_/i));if(p&&p!=""){if(p.indexOf("_GM_")>=0||n){e.resolve(true)}else{e.resolve(false)}}else if(a&&a.match(/10000512/)){e.resolve(true)}else{e.resolve(n)}return e};r.isGMPackageSync=function(){var e;var n=!!(location.search&&location.search.match(/\bqua=V\S+_\S+_\S+_\S+_+\S+_GM_/i));if(a&&a.match(/10000512/)){e=true}else if(p&&p!=""){e=p.indexOf("_GM_")>=0||n}else{e=n}return e};r.isQzoneReview=a.indexOf("AppstoreReview")>=0;r.isQQReview=function(){var e=t.Deferred();require.async("//imgcache.gtimg.cn/c/=/ACT/vip_act/act_data/mmqversion.json.js,/club/common/wedgets/mqqvc.js",function(){if(MQQIOSVC.check()){e.resolve(true)}else{e.resolve(false)}});return e};r.getDeviceInfo=function(e){require.async("./interface",function(n){n.getDeviceInfo(e)})};r.iosReviewInfo=function(e){var n=t.Deferred();var i=true;var a=true;function s(){n.resolve({inReview:i,strick:a,hide:i||a})}function c(){require("./ajax").request({
url:"http://activity.qzone.qq.com/fcg-bin/v2/fcg_get_ios_pay_info",type:"get",forceLogin:false,data:{qua:e,format:"json"}}).done(function(e){var n=e.data||{};if(n.bIsQuaValid){i=n.bIsQuaValid==="no"}if(n.operationModel){a=n.operationModel==="strict"}s()}).fail(function(){s()})}if(o.get("operationModel")){i=o.get("bIsQuaValid")==="no";a=o.get("operationModel")==="strict";s()}else{if(!e){r.getQua().done(function(n){e=n;c()})}else{c()}}return n};r.getApiUrl=function(){if(r.client==="qq"||r.client==="fm"){return window.seajs&&seajs.data.alias&&seajs.data.alias.qqapi?"qqapi":"//open.mobile.qq.com/sdk/qqapi.js?_bid=152"}else if(r.client==="qzone"){return window.seajs&&seajs.data.alias&&seajs.data.alias.qzoneapi?"qzoneapi":"//qzonestyle.gtimg.cn/qzone/phone/m/v4/widget/mobile/jsbridge.js"}return""};return r})
;define.pack("./index.1556005191000",["zepto","./page","./stat","./ajax","./user","./util","./browser","./storage","./router","./msg","./pay","./schema","./object","./webapp","./proxy","./interface","./wx","./qcloud.speed"],function(require,e,n){var t=require("zepto");if(!Object.assign&&t&&t.extend){Object.assign=t.extend}if(!window.logger){window.logger={log:function(){console.log.apply(window.console,arguments)}}}n.exports=window.hybrid={page:require("./page"),stat:require("./stat"),ajax:require("./ajax"),user:require("./user"),util:require("./util"),browser:require("./browser"),storage:require("./storage"),router:require("./router"),msg:require("./msg"),pay:require("./pay"),schema:require("./schema"),object:require("./object"),webapp:require("./webapp"),proxy:require("./proxy"),jsbridge:require("./interface"),wx:require("./wx"),qcloud:{speed:require("./qcloud.speed")}}});define.pack("./interface",["zepto","./tmpl","./browser"],function(require,e,n){
var t=require("zepto"),i=require("./tmpl"),o=require("./browser");var a=o.client=="qq";var r=o.client=="qzone";var s={showDialog:function(e,n){var s=e.cancelBtnText||"取消",c=e.okBtnText||"确认";if(o.platform=="ios"&&a&&o.compareVersion("6.6","lt")){s=e.okBtnText||"确认";c=e.cancelBtnText||"取消"}var l={title:e.title||"",text:e.text||"",needOkBtn:e.needOkBtn===false?false:true,needCancelBtn:e.needCancelBtn===false?false:true,okBtnText:c,cancelBtnText:s};if(a){require.async(o.getApiUrl(),function(e){e.ui.showDialog(l,function(e){if(o.platform=="ios"&&o.compareVersion("6.6","lt")){e["button"]=+!e["button"]}n(e)})})}else if(r){require.async(o.getApiUrl(),function(){mqq.invoke("ui","showDialog",l,function(e){n(e)})})}else{require.async(["//qzonestyle.gtimg.cn/touch/components/css/reset.css","//qzonestyle.gtimg.cn/touch/components/css/ui-modal.css"],function(){t("body").prepend(i.dialog({title:e.title||"",text:e.text||"",okBtnText:c,cancelBtnText:s}))
;t(".jsbridge-dialog").off("click").on("click","button",function(){n({button:t(this).data("val")});t("#jsbridge-dialog-div").remove()})})}},setRightButton:function(e){if(a){require.async(o.getApiUrl(),function(n){n.ui.setTitleButtons&&n.ui.setTitleButtons({right:{title:e.title,callback:function(){e.callback&&e.callback()}}})})}else if(r){require.async(o.getApiUrl(),function(){mqq.invoke("ui","setRightButton",{title:e.title,hidden:false,enable:true},function(){e.callback&&e.callback()})})}},hideRightButton:function(){if(a){require.async(o.getApiUrl(),function(e){e.ui.setTitleButtons&&e.ui.setTitleButtons({right:{title:" ",hidden:true,callback:function(){}}})})}else if(r){require.async(o.getApiUrl(),function(){mqq.invoke("ui","setRightButton",{title:" ",hidden:true,enable:false},function(){})})}},closeWebViews:function(e){var e=e||{};if(a){require.async(o.getApiUrl(),function(n){var i=t.extend({mode:0,exclude:false},e);n.ui.closeWebViews(i)})}else if(r){
require.async(o.getApiUrl(),function(){var n=t.extend(e,{version:1});mqq.invoke("ui","closeWebViews",n)})}},openUrl:function(e){var n={url:"",target:1,style:1};if(typeof e=="string"){n.url=e}else{n=t.extend(n,e)}var i=["/gift","/qzonegift","/checkin/index","/constellation/index","/checkin/diy"];if(window.location&&location.hostname==="h5.qzone.qq.com"&&location.pathname.match(new RegExp("^("+i.join("|")+")"))){n.url=n.url.replace(/^http:/,"https:")}if(navigator.platform==="Win32"){location.href=n.url}else if(a){require.async(o.getApiUrl(),function(e){e.ui.openUrl(n)})}else if(r){require.async(o.getApiUrl(),function(){mqq.invoke("ui","openUrl",n)})}else{location.href=n.url}},showActionSheet:function(e,n){var i={};if(e instanceof Array){i={cancel:"取消",items:e}}else if(e.title||e.items){i=e}if(!n){var s=i.items;i.items=s.map(function(e){return e&&e.action||e});n=function(e){s[e].callback&&s[e].callback()}}if(a){require.async(o.getApiUrl(),function(e){e.ui.showActionSheet(i,function(e,t){
if(e==0){n(t)}})})}else if(r&&(o.platform=="android"||o.platform=="ios"&&o.compareVersion("6.6","nlt"))){require.async(o.getApiUrl(),function(){mqq.invoke("ui","showActionSheet",i,function(e,t){if(e==0){n(t)}})})}else{require.async(["//qzonestyle.gtimg.cn/touch/components/css/reset.css","//qzonestyle.gtimg.cn/touch/components/css/ui-actionsheet.css"],function(){var e=""+'<div class="ui-actionsheet active">'+'<div class="mask"></div>'+'<div class="inner">'+'<ul class="ui-actionsheet-list">'+function(){var e="";t.each(i.items,function(n,t){e+='<li data-index="'+n+'">'+t+"</li>"});return e}()+"</ul>"+"\x3c!-- 分组形式 --\x3e"+'<ul class="ui-actionsheet-list">'+'<li class="cancel">取消</li>'+"</ul>"+"</div>"+"</div>";t("body").prepend(e);t(".ui-actionsheet").off("click").on("click","li",function(){if(t(this).hasClass("cancel")){t(".ui-actionsheet").remove();return}var e=parseInt(t(this).data("index"));n&&n(e);t("body .ui-actionsheet").remove()}).on("click",".mask",function(){
t(".ui-actionsheet").remove()})})}},readH5Data:function(e,n){if(a){require.async(o.getApiUrl(),function(t){t.data.readH5Data(e,function(e){n(e)})})}else if(r){require.async(o.getApiUrl(),function(){mqq.invoke("data","readH5Data",e,function(){n(obj)})})}},writeH5Data:function(e,n){if(a){require.async(o.getApiUrl(),function(t){t.data.writeH5Data(e,function(e){n(e)})})}else if(r){require.async(o.getApiUrl(),function(){mqq.invoke("data","writeH5Data",e,function(e){n(e)})})}},choosePhoto:function(e){if(a){require.async(o.getApiUrl(),function(n){if(n.compare("6.5")!=-1){window.mqq.invoke("QZImagePicker","choosePhoto",{pickerType:e.type||0,compressType:e.compressType||0,maxPickCount:e.maxNum||1,clipByH5:e.clipByH5||false,userInfo:e.userInfo||{}})}else{window.mqq.invoke("QZImagePicker","choosePhoto",{type:e.type||0,quality:e.compressType||.5,maxNum:e.maxNum||1})}})}else if(r){require.async(o.getApiUrl(),function(){var n="qzonephoto";if(e.type==0||!e.type){n="album"}QZAppExternal.call({
type:"qzonephoto",key:"custom_image",params:{giftId:1,maxPixel:1e6}});window.QZAppExternal&&(QZAppExternal.fireEvent=function(e){})})}},getNetworkInfo:function(e){e=e||function(){};var n={"-1":"unknown",0:"noSignal",1:"wifi",2:"2g",3:"3g",4:"4g"};if(window.mqq){var t;mqq.invoke("device","getNetworkInfo",function(i){if(t)return;var o=i&&(i.data||i)||{};var a=o.type;t=true;e(n[a+""]||n["-1"])});setTimeout(function(){if(!t){t=true;e("wifi")}},2e3)}else{e("wifi")}},getDeviceInfo:function(e){function n(n){n.model=n.modelName||n.modelVersion||n.model||"";if(o.platform==="ios"&&(n.model==="x86_64"&&window.screen.width*window.devicePixelRatio===1125&&window.screen.height*window.devicePixelRatio===2436||(n.model==="iPhone10,3"||n.model==="iPhone10,6"||n.model==="iPhone X"))){n.modelTag="iPhoneX"}else{n.modelTag=n.model}e&&e(n||{})}function t(){if(window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match(/(iPhone)/)){
if(window.screen&&screen.availHeight==812&&screen.availWidth==375){if(window.innerHeight=="375"&&window.innerWidth=="812"||window.innerHeight=="812"&&window.innerWidth=="375"){e({modelTag:"iPhoneX"})}else{e({})}}else{e({})}}else{e({})}}if(window.mqq){if(r){mqq.invoke("device","getDeviceInfo",function(e){n(e.data||{})})}else if(a){mqq.device.getDeviceInfo(n)}else{t()}}else{t()}}};return s});define.pack("./msg",["zepto"],function(require,e,n){var t=require("zepto");var i,o={succ:"hook",fail:"cancel",info:"info",loading:"loading",noicon:"noIcon"}
;var a=['<style type="text/css" id="q_Msgbox_Style">',".gb-tips {position:fixed;width:100%;top:30%;text-align:center;z-index:9999;font-size:14px}",".gb-tips .gb-tips-layer {position:relative;display:inline-block;max-width:54%;padding:8px 10px 8px 38px;text-align:left;line-height:22px;background:rgba(0,0,0,.7);color:#fff;border-radius:5px;max-width:220px}",".gb-tips .gb-tips-layer.no-icon {padding:8px 10px}",".gb-tips .gb-tips-layer .icon-hook {position:absolute;top:12px;left:12px;width:17px;height:12px;background-image:url(//qzonestyle.gtimg.cn/qz-act/public/mobile/img/tick-white.png?max_age=19830212&d=20130918105242);background-size:17px 12px}",".gb-tips .gb-tips-layer .icon-info {position:absolute;top:7px;left:7px;width:24px;height:24px;background-image:url(//qzonestyle.gtimg.cn/qz-act/public/mobile/img/info-white.png?max_age=19830212&d=20130918105242);background-size:24px 24px}",".gb-tips .gb-tips-layer .icon-cancel {position:absolute;left:12px;top:11px;width:16px;height:16px;background-image:url(//qzonestyle.gtimg.cn/qz-act/public/mobile/img/close-white.png?max_age=19830212&d=20130918105242);background-size:16px 16px}",".gb-tips .gb-tips-layer .icon-loading {position:absolute;top:3px;left:3px;height:32px;width:32px;background:url(//qzonestyle.gtimg.cn/qz-proj/weishi-mobile/img/loading.gif?max_age=19830212&d=20130918105242) center center no-repeat;background-size:20px 20px;-webkit-animation:mask 600ms infinite step-start;-moz-animation:mask 600ms infinite step-start;-ms-animation:mask 600ms infinite step-start;-o-animation:mask 600ms infinite step-start;animation:mask 600ms infinite step-start}","</style>"].join("\n")
;e.show=function(n,a,s,c){i&&clearTimeout(i);e.hide();if(arguments.length==1){a=n;n=undefined}if(!s&&!c&&(window.HYB&&HYB.browserInfo&&HYB.browserInfo.client==="qq")&&window.mqq){var l=3;if(n==="succ"){l=1}else if(n==="fail"){l=2}mqq.ui&&mqq.ui.showTips&&mqq.ui.showTips({text:a,iconMode:l});return}c=c||{};var f="200px";if(c.middle)f=t(window).height()/2-38+"px";if(c.vertical)f="50%";t("body").append(r({icon:o[n]||o["info"],content:a||"",vertical:c.vertical,top:f}));i=setTimeout(e.hide,s||2e3)};e.log=function(e){(new Image).src="//www.qq.com/log?log="+e};e.hide=e._hide=function(){t("#q_Msgbox").remove();t("#q_Msgbox_Style").remove()};function r(e){var n=t('<div class="gb-tips" id="q_Msgbox" ><div class="gb-tips-layer"><i></i>'+s(e.content)+"</div></div>");if(e.icon==="noIcon"){n.find(".gb-tips-layer").addClass("no-icon")}else{n.find("i").addClass("icon-"+e.icon)}if(e.vertical)n.find(".gb-tips-layer").css("transform","rotateZ(90deg) translateY(-50%)");n.css("top",e.top)
;return t(a+n[0].outerHTML)}function s(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\x60/g,"&#96;").replace(/\x27/g,"&#39;").replace(/\x22/g,"&quot;")}});define.pack("./object",["zepto"],function(require,e,n){var t=require("zepto");var i={create:function(e,n){var i;if(Object.create){if(t.isPlainObject(n)){var o={};for(var a in n){o[a]={configurable:true,enumerable:true,value:n[a],writable:true}}n=o}i=Object.create(e,n)}else{function r(){}r.prototype=e;i=new r;if(t.isPlainObject(n)){for(var s in n){if(n.hasOwnProperty(s)){i[s]=n[s]}}}}i._super=e;return i},extends:function(e,n,t){n=n||hybrid.emptyFn;e.prototype=i.create(n.prototype,t);return e},inherite:function(e,n,t){n=n||hybrid.emptyFn;e.prototype=i.create(n.prototype,t);return e}};return i});define.pack("./page",[],function(require,e,n){var t=location.hostname==="h5.qzone.qq.com"||location.hostname==="h5s.qzone.qq.com";var i,o=true;n.exports={config:function(e){},first:function(e){
if(!t||!o){e()}return this},then:function(e,n){if(t&&o||!n){e()}else{i=e}o=false;return this},success:function(e){i&&i();i=undefined;return this},fail:function(){return this}}});define.pack("./pay",["zepto","./util","./browser","./msg","./user"],function(require,e,n){var t=require("zepto"),i=require("./util"),o=require("./browser"),a=require("./msg"),r=require("./user");var s={vip:{1:"com.tencent.yellowdiamond.nonrenewing.onemonth",3:"com.tencent.yellowdiamond.nonrenewing.threemonth",6:"com.tencent.yellowdiamond.nonrenewing.sixmonth",12:"com.tencent.yellowdiamond.nonrenewing.oneyear"},luxury:{1:"com.tencent.mqq.Luxuryyellowdiamond.nonrenewing.1months",3:"com.tencent.mqq.Luxuryyellowdiamond.nonrenewing.3months",6:"com.tencent.mqq.Luxuryyellowdiamond.nonrenewing.6months",12:"com.tencent.mqq.Luxuryyellowdiamond.nonrenewing.12months"},star:{1:"com.tencent.mqq.superstar.nonrenewing.1month",3:"com.tencent.mqq.superstar.nonrenewing.3months",6:"com.tencent.mqq.superstar.nonrenewing.6months",
12:"com.tencent.mqq.superstar.nonrenewing.12months"}};var c={qq:{vip:"1450000531",luxury:"1450001581",star:"1450005760"},qzone:{vip:"1450000202",luxury:"1450001580",star:"1450006078"}};var l={vip:{1:"一个月黄钻",3:"三个月黄钻",6:"六个月黄钻",12:"一年黄钻"},luxury:{1:"一个月豪华黄钻",3:"三个月豪华黄钻",6:"六个月豪华黄钻",12:"一年豪华黄钻"},star:{1:"一个月星钻",3:"三个月星钻",6:"六个月星钻",12:"一年星钻"}};var f={vip:"COMMON_VIP",luxury:"NOBLE_VIP",star:"STAR_VIP"};var d={payVip:function(e){var n=this,a;a=t.extend({type:"vip",month:3,aid:"hybrid",autopay:false,directPay:false,succCallback:function(){},errCallback:function(){}},e);function r(){function e(){var e=i.formatQua(a.qua);var t=parseFloat(e.version||0);if(a.type==="star"&&t<6.3){n._payStar(a)}else{if(o.platform==="android"){n._payQQAndroid(a)}else if(o.platform==="ios"){n._payQQIos(a)}else{n._payH5(a)}}}if(!a.qua){o.getQua().done(function(n){a.qua=n;e()})}else{e()}}function s(){if(a.type==="star"&&o.compareVersion("6.3.0","lt")){n._payStar(a)}else{if(o.platform==="android"){
n._payQzoneAndroid(a)}else if(o.platform==="ios"){n._payQzoneIos(a)}else{n._payH5(a)}}}if(o.client==="qq"){if(typeof mqq==="object"){r()}else{require.async(o.getApiUrl(),function(){r()})}}else if(o.client==="qzone"){if(typeof QZAppExternal==="object"){s()}else{require.async(o.getApiUrl(),function(){s()})}}else{n._payH5(a)}},payItem:function(e){},payIap:function(e){var n;var i;e=t.extend({aid:"hybrid"},e);this.getPf(e.aid).done(function(t){if(o.client==="qq"){n={app_id:e.offerid||c["qq"][e.type],qq_product_name:e.productname||l[e.type][e.month],pf:e.pf||t,pfkey:"pfKey",zoneId:e.zoneId||"1",product_id:e.productid||s[e.type][e.month],product_type:e.producttype===undefined?4:e.producttype,quantity:1,is_deposit_game_coin:e.isDepositGameCoin||0,pay_item:e.payitem||e.month+"",var_item:e.varItem||"aid="+(e.aid.match(/-|_/)?"":"jhios_")+e.aid||"",apple_pay_source:"yellow_vip_center"};i=function(){try{mqq.pay.pay(n,function(n,t){if(n===0){e.succCallback&&e.succCallback()}else{
e.errCallback&&e.errCallback({code:n,message:t})}})}catch(e){}}}else if(o.client==="qzone"){n={offerid:e.offerid||c["qzone"][e.type],productid:e.productid||s[e.type][e.month].replace(".mqq",""),payitem:e.payitem||e.month+"",quantity:1,productname:e.productname||l[e.type][e.month],isDepositGameCoin:e.isDepositGameCoin||0,pf:e.pf||t,pfkey:"pfKey",zoneId:e.zoneId||"1",producttype:e.producttype||4,varItem:e.varItem||"aid="+(e.aid.match(/-|_/)?"":"gf_")+e.aid||""};i=function(){try{mqq.invoke("qzone","qzoneBuyVip",{param:n});document.addEventListener("WEBAPP_BUYVIP",function(n){document.removeEventListener("WEBAPP_BUYVIP",arguments.callee);if(n.data.value===0){e.succCallback&&e.succCallback()}else{e.errCallback&&e.errCallback({code:n&&n.data&&n.data.value,message:n&&n.data&&n.data.message})}})}catch(e){}}}if(typeof window.mqq==="object"){i()}else{require.async(o.getApiUrl(),function(){i()})}})},_isJailBreakend:function(){var e=this;var n=t.Deferred();if(typeof e._isYY==="boolean"){
n.resolve(e._isYY)}else{var i=setTimeout(function(){n.resolve(false)},2e3);require.async(o.getApiUrl(),function(){if(!window.mqq){n.resolve(false);clearTimeout(i)}else{mqq.invoke("device","isJailBreakend",{},function(t){e._isYY=!!(t&&t.isJailBreakend*1||t.data&&t.data.isJailBreakend*1);console.info("isJailBreakend:",e._isYY);clearTimeout(i);n.resolve(e._isYY)})}})}return n},getAid:function(e){e=e||"";var n=this;var i=t.Deferred();var a,r=o.client==="qzone";var s=/^(yy|gf|yyjhios|jhios|an|jhan)(_|-)/;if(o.platform==="ios"){n._isJailBreakend().done(function(n){a=r?n?"yy":"gf":n?"yyjhios":"jhios";console.info("fix aid :",e,"->",a+(n?"-":"_")+e.replace(s,""));i.resolve(a+(n?"-":"_")+e.replace(s,""))})}else{a=r?"an":"jhan";console.info("fix aid :",e,"->",a+"_"+e.replace(s,""));i.resolve(a+"_"+e.replace(s,""))}return i},getPf:function(e){var n=this;var i=t.Deferred();this.getAid(e).done(function(e){o.getQua().done(function(t){t=t||o.getQuaString();var a=[];if(o.client==="qzone"){
a.push("mqzone")}else if(o.client==="qq"){a.push("mqq")}if(o.platform==="ios"){a.push("1000")}else{a.push("2013")}a.push(t);if(o.platform==="ios"){a.push("1000")}else{a.push("2013")}a.push(e);if(o.platform==="ios"){n._isJailBreakend().done(function(e){if(e){a[2]=a[2].replace("_APP_A","_APP_JB")}i.resolve(a.join("-"))})}else{i.resolve(a.join("-"))}}).fail(function(){i.reject()})});return i},_payQQIos:function(e){var n=this;var t=e.qua||"V1_IPH_SQ_5.2.1_182_APP_D";var o=i.formatQua(t);var r=o.appType==="APP"?0:1;var s=parseFloat(o.version||0);if(s>=5.7){window.QzCoverJSInterface={onReceive:function(n){if(n.type=="YellowInfo"){e.succCallback(n)}}};mqq.addEventListener("openVipInfo",function(n,t){mqq.removeEventListener("openVipInfo",arguments.callee);a.show("info","正在获取开通状态...",1e3);setTimeout(function(){e.succCallback&&e.succCallback()},1e3)});n.getAid(e.aid).done(function(n){try{window.mqq.invoke("QzCover","openYellowDiamond",{from:"",page:"",aid:n,viptype:f[e.type],openmonth:e.month})
}catch(e){}})}else{n._payH5(e)}},_payQQAndroid:function(e){var n=e.qua||"V1_AND_SQ_5.6.1_182_YYB_D";var t=i.formatQua(n);var o=parseFloat(t.version||0);var a=e.aid||"";if(!e.forceQQWallet&&o>=5.6){window.QzCoverJSInterface={onReceive:function(n){if(n.type=="YellowInfo"){e.succCallback(n)}}};mqq.addEventListener("openVipInfo",function(n,t){e.succCallback(n)});window.mqq.invoke("QzCover","openYellowDiamond",{from:"qzone",page:"1",aid:a.match(/-|_/)?a:"jhan_"+a,viptype:f[e.type],openmonth:e.month})}else{var s={offerId:"1450000153",userId:r.getUin(),openMonth:e.month,serviceCode:"xxjzgw",serviceName:"黄钻",aid:"jhan_"+e.aid,provideUin:e.toUin||r.getUin()};try{mqq.tenpay.openService(s,function(n){if(n&&n.resultCode===0){e.succCallback()}else{e.errCallback()}})}catch(n){var c="http://pay.qq.com/h5/index.shtml?m=buy&c=xxjzgw&pf=2103&aid=jhan_"+e.aid+"&ru="+encodeURIComponent(location.href);location.href=c}}},_payQzoneIos:function(e){mqq.addEventListener("openVipInfo",function(n,t){
mqq.removeEventListener("openVipInfo",arguments.callee);if(n.status==="success"){a.show("info","正在获取开通状态...",1e3);setTimeout(function(){e.succCallback&&e.succCallback(n)},1e3)}});this.getAid(e.aid).done(function(n){QZAppExternal.openVip({aid:n,payType:"xxjzgw",openmonth:e.month,autopay:e.autopay||false,vippaydirect:e.directPay||false,viptype:f[e.type],offerid:c["qzone"][e.type],productid:s[e.type][e.month].replace(".mqq","")})})},_payQzoneAndroid:function(e){var n=e.aid||"";QZAppExternal.openVip({aid:n.match(/-|_/)?n:"an_"+n,payType:"xxjzgw",openmonth:e.month,autopay:e.autopay||false,vippaydirect:e.directPay||false,viptype:f[e.type]});mqq.addEventListener("openVipInfo",function(n,t){e.succCallback(n)})},_payH5:function(e){var n="",t,i;var a=e.su||'jsbridge://Qzone/H5PayCallBack?p={"status":"success", "vipType" : "'+f[e.type]+'"}';if(o.client==="qzone"){n="yy-"}else if(o.client==="qq"){n="yyjhios-"}if(e.type==="star"){i="cjxzxn"}else if(e.type==="luxury"){i="xxjzghh"}else{i="xxjzgw"}
t="http://pay.qq.com/h5/index.shtml?m=buy&pf=2103"+"&c="+i+"&n="+e.month+"&aid="+n+e.aid+"&ru="+encodeURIComponent(location.href)+"&su="+encodeURIComponent(a)+"&as="+(e.directPay?1:0)+"&ap="+(e.autopay?1:0);window.location.href=t},payQQIap:function(){return d._payQQIap.apply(d,arguments)},_payQQIap:function(e){var n=this;if(!e.productId&&t.inArray(e.month,[1,3,6,12])===-1){e.month=3}this.getAid(e.aid).done(function(t){n.getPf(t).done(function(n){var i=e.provideType!=="uin"?"":"&provide_uin="+e.provideUin+"&provide_no_type="+e.provideType;var o={app_id:e.app_id||c["qq"][e.type],qq_product_name:e.productName||l[e.type][e.month],pf:e.pf||n,pfkey:"pfKey",zoneId:"1",product_id:e.productId||s[e.type][e.month],product_type:e.hasOwnProperty("productType")?e.productType:4,quantity:1,is_deposit_game_coin:0,pay_item:e.pay_item||e.month+"",var_item:encodeURIComponent("aid="+t+"&from=qyourprofileyellowdiamond&id="+(e.productId||s[e.type][e.month])+i),apple_pay_source:"yellow_vip_center"};try{
mqq.pay.pay(o,function(n,t){if(n===0){e.succCallback&&e.succCallback();mqq.invoke("Qzone","H5PayCallBack",{status:"success",vipType:f[e.type]})}else{e.errCallback&&e.errCallback({code:n,message:t})}})}catch(e){}})})},payQzoneIap:function(){return d._payQzoneIap.apply(d,arguments)},_payQzoneIap:function(e){var n=this;if(!e.productId&&t.inArray(e.month,[1,3,6,12])===-1){e.month=3}this.getAid(e.aid).done(function(t){n.getPf(t).done(function(n){var i=e.provideType!=="uin"?"":"&provide_uin="+e.provideUin+"&provide_no_type="+e.provideType;var o={offerid:e.offerid||c["qzone"][e.type],productid:e.productId||s[e.type][e.month].replace(".mqq",""),payitem:e.pay_item||e.month+"",quantity:1,productname:e.productName||l[e.type][e.month],isDepositGameCoin:0,pf:e.pf||n,pfkey:"pfKey",zoneId:"1",producttype:e.hasOwnProperty("productType")?e.productType:4,varItem:encodeURIComponent("from=qyourprofileyellowdiamond&id="+(e.productId||s[e.type][e.month].replace(".mqq",""))+"&aid="+t+i)};console.log(o);try{
mqq.invoke("qzone","qzoneBuyVip",{param:o});document.addEventListener("WEBAPP_BUYVIP",function(n){document.removeEventListener("WEBAPP_BUYVIP",arguments.callee);if(n.data.value===0){e.succCallback&&e.succCallback();mqq.invoke("Qzone","H5PayCallBack",{status:"success",vipType:f[e.type]})}else{e.errCallback&&e.errCallback({code:n&&n.data&&n.data.value,message:n&&n.data&&n.data.message})}})}catch(e){}})})},_payStar:function(e){var n="http://xing.qq.com/?qua="+e.qua+"&aid="+e.aid+"&_wv=1";if(o.client==="qzone"){mqq.invoke("ui","openUrl",{url:n,target:1,style:1})}else{mqq.ui.openUrl({url:n,target:1,style:1})}}};return d});define.pack("./proxy",["./ajax"],function(require,e,n){return require("./ajax")});define.pack("./qcloud.speed",["zepto","./util","./user"],function(require,e,n){var t=require("zepto");var i=require("./util");var o=require("./user");var a=function(){};function r(e){var n=[];for(var t in e){if(e.hasOwnProperty(t)){if(e[t]!==""&&e[t]!==undefined){
n.push(t+"="+encodeURIComponent(e[t]))}}}return n.join("&")}function s(e){e=e||{};var n=location.hostname,t=location.pathname;if(n==="h5s.qzone.qq.com"||n==="h5.qzone.qq.com"){if(t.split("/").length>3){t=t.split("/").slice(0,3).join("/")}}this.configData={appid:"10006",appkey:"c373ba4a1ce77b27601e887e9f8eb3f4",siteName:n,pageName:t};for(var i in e){if(e.hasOwnProperty(i))this.configData[i]=e[i]}}s.prototype.config=function(e){if(Object.prototype.toString.call(e)!=="[object Object]")e={};for(var n in e){if(e.hasOwnProperty(n))this.configData[n]=e[n]}};s.prototype.report=function(e,n){n=n||e||{};var a=this;if(!n.points){return}a.check(function(e){var s=n.siteName||a.configData.siteName;var c=n.pageName||a.configData.pageName;if(!s||!c)return console.log("qcloud.speed: 无siteName或pageName");if(c=="/visitor/qzone"&&e.client!=="qq"){return}a.getAppPoints(function(l){if(!("baseTime"in n)){if("baseTime"in a.configData){n.baseTime=a.configData.baseTime}else{
n.baseTime=l.webviewStart||l.clickStart||window.HYB&&HYB.loadTimes&&HYB.loadTimes.startLoad}}n.baseTime=parseInt(n.baseTime);if(isNaN(n.baseTime)){console.log("qcloud.speed: 无基准时间");return}if(!a.configData.noClientInfo&&a.configData.noFirstFilter!==true){if(e.client==="qq"&&!l.isFirstRequest){console.log("qcloud.speed: qq非首次模式, 不报");return}else if(e.client==="qzone"&&"isFirstRequest"in l&&!l.isFirstRequest){console.log("qcloud.speed: qzone非首次模式, 不报");return}}if(!a.appPointsReported){if(!("20"in n.points)&&(l.webviewStart||l.clickStart))n.points[20]=l.webviewStart||l.clickStart;if(!("21"in n.points)&&l.pageStart)n.points[21]=l.pageStart;if(!("22"in n.points))n.points[22]=window.HYB&&HYB.loadTimes&&HYB.loadTimes.syncCssLoad||n.baseTime;if(!("23"in n.points))n.points[23]=window.HYB&&HYB.loadTimes&&HYB.loadTimes.domReady||n.baseTime}else{delete n.points[20];delete n.points[21];delete n.points[22];delete n.points[23]}for(var f in n.points){if(n.points.hasOwnProperty(f)){
if(isNaN(n.points[f]=parseInt(n.points[f]))){console.log("qcloud.speed: 测速点"+f+"无法转换成整型, 取消上报");return}n.points[f]=n.points[f]-n.baseTime}}if("24"in n.points){if(n.points[24]<0||n.points[24]>1e4){return console.log("qcloud.speed: 考核点24的值"+n.points[24]+" 有异常")}}n.points.siteName=s;n.points.pageName=c;n.points.flag5=1;a.getAPN(function(l){a.getDevice(function(f){if(n.points[21])a.appPointsReported=true;var d=r({appid:a.configData.appid,appkey:a.configData.appkey,speedparams:r(n.points),apn:l||"",device:f||"",platform:e.platform||"",app:e.client||"",_:Math.random()});n.points=t.extend({1:-1,2:-1,3:-1,4:-1,5:-1,6:-1,7:-1,8:-1,9:-1,10:-1,11:-1,12:-1,13:-1,14:-1,15:-1,16:-1,17:-1,18:-1,19:-1,20:-1,21:-1,22:-1,23:-1,24:-1,25:-1,26:-1,27:-1,28:-1,29:-1,30:-1,31:-1,32:-1,33:-1,34:-1,35:-1,36:-1,37:-1,38:-1,39:-1,40:-1,41:-1,42:-1,43:-1,44:-1,45:window.HYB&&HYB.loadTimes&&HYB.loadTimes.startLoad||-1},n.points);var u={};var p=Object.keys(n.points);for(var m=0;m<p.length;m++){
u["hb_"+p[m]]=n.points[p[m]]}var g=0;var h=document.head.getElementsByTagName("link");if(h.length>1){g=1}else if(h.length===1){var v=h[0].href;if(v.indexOf(".css")!==-1){g=1}}var w=r({siteName:s,pageName:c,uin:o.getUin()||"0000",appid:a.configData.appid,appkey:a.configData.appkey,speedparams:JSON.stringify(u),apn:l||"",device:f||"",platform:e.platform||"",app:e.client||"",_:Math.random(),isLinkIn:g});(new Image).src="https://huatuo.weiyun.com/report.cgi?"+d;var q=i.getNodeDomain()||"h5.qzone.qq.com";(new Image).src="https://"+q+"/report/compass/dc03998?"+w;if(window.isAlpha){var y=new XMLHttpRequest;y.open("POST","https://"+q+"/log/post/speedlog",true);y.setRequestHeader("Content-Type","text/plain");y.withCredentials=true;y.send("speedlog"+n.points.pageName+": "+JSON.stringify(n.points,null,2)+"\r\n");(new Image).src="https://"+q+"/log/post/speedlog?"+d}logger.log("qcloud.speed: 上报成功",n.points)})})})})};s.prototype.check=function(){var e;var n;var t;return function(i){
if(e&&t)return i(t);if(n)return console.log("qcloud.speed: 基础检查不通过，禁止上报");var o=this;if(window.HYB&&HYB.browserInfo&&HYB.browserInfo.compareVersion){a(HYB.browserInfo)}else{require.async("./browser",function(e){a(e)})}function a(a){t=a;if(!(t.client==="qq"||!t.client==="qzone")&&o.configData.noClientInfo===undefined){o.configData.noClientInfo=true}if(o.configData.noClientInfo){return i(t)}if(a.platform!=="ios"&&a.platform!=="android"||a.client!=="qq"&&a.client!=="qzone"){console.log("qcloud.speed: 非客户端环境 不上报");n=true;return}if(a.platform==="ios"&&a.compareVersion&&a.compareVersion("6.6.1","eq")){n=true;console.log("qcloud.speed: ios结合版6.6.1有bug 不上报");return}if(a.platform==="ios"&&a.compareVersion&&a.compareVersion("6.6.1","eq")){n=true;console.log("qcloud.speed: ios结合版6.6.1有bug 不上报");return}if(window.mqq){e=true;i(t)}else{require.async("jssdk",function(){if(window.mqq){e=true;i(t)}})}}}}();s.prototype.getAppPoints=function(){var e;return function(n){if(this.configData.noClientInfo){
return n({})}if(e){n(e)}else{mqq.invoke("data","getPerformance",function(t){var i=t&&(t.data||t)||{};console.log("qcloud.speed: getPerformance",t);if(t&&(t.code==0||t.ret==0||t.result==0)){n(e=i)}else{console.log("qcloud.speed: 客户端测速点获取失败, 终止上报")}})}}}();s.prototype.getAPN=function(){var e,n={"-1":"unknown",1:"wifi",2:"2g",3:"3g",4:"4g"};return function(t){if(this.configData.noClientInfo){return t("")}if(e){t(e)}else{mqq.invoke("device","getNetworkInfo",function(i){var o=i&&(i.data||i)||{};logger.log("qcloud.speed: getNetwork",i);t(e=n[o.type+""]||n["-1"])})}}}();s.prototype.getDevice=function(){var e;return function(n){if(this.configData.noClientInfo){return n("")}if(e){n(e)}else{mqq.invoke("device","getDeviceInfo",function(t){var i=t&&(t.data||t)||{};console.log("qcloud.speed: getDeviceInfo",t);n(e=i.modelVersion||i.model||"unknown")})}}}();s.prototype.simpleReport=function(e){var n=this;if(!e.points)return;e.points.siteName=n.configData.siteName
;e.points.pageName=n.configData.pageName;e.points.flag5=1;var t=r({appid:n.configData.appid,appkey:n.configData.appkey,speedparams:r(e.points),apn:e.apn||"",device:e.deviceData||"",platform:e.platform||"",app:e.client||"",_:Math.random()});(new Image).src="https://huatuo.weiyun.com/report.cgi?"+t;if(window.isAlpha){var o=i.getNodeDomain()||"h5.qzone.qq.com";var a=new XMLHttpRequest;a.open("POST","https://"+o+"/log/post/speedlog",true);a.setRequestHeader("Content-Type","text/plain");a.withCredentials=true;a.send("speedlog"+n.configData.pageName+": "+JSON.stringify(e.points,null,2)+"\r\n");(new Image).src="https://"+o+"/log/post/speedlog?"+t}logger.log("qcloud.speed: 上报成功",e.points)};var c=new s({});e.create=function(e){return new s(e)};e.config=function(){c.config.apply(c,arguments)};e.report=function(){logger.log("send speed report",arguments[0]);c.report.apply(c,arguments)};e.simpleReport=function(){logger.log("send speed simpleReport",arguments[0]);c.simpleReport.apply(c,arguments)}
;e.add=e.performance=e.register=a});define.pack("./router",["./util"],function(require,e,n){var t=require("./util");var i,o="onhashchange"in window,a="pushState"in history,r="addEventListener"in window,s=document.documentMode,c=o&&(s===void 0||s>7),l,f,d=(n.uri||n.id).match(/^[^\/]*\/\/[^\/]*/)[0]+location.pathname.substring(0,location.pathname.lastIndexOf("/")+1),u="&",p=false,m="page";var g,h;var v={};var w={};e.start=function(e){if(!i){l=e||"index";if(p){if(a){window.addEventListener("popstate",x,false)}}else{if(!c){return false}else if(r){window.addEventListener("hashchange",x,false)}else if(o){window.onhashchange=x}}i=true;x()}};e.setting=function(n){n=n||{};m=n.paramName||"page";p=n.useState;d=n.basePath||d;u=n.splitTag||"&";if(window.HYB&&window.HYB.jsHttps){d=d.replace("http://","https://")}if(window.isH5Test||window.imgcacheProxy){var t=window.HYB&&window.HYB._domains&&window.HYB._domains.imgcache?window.HYB._domains.imgcache:"qzonestyle.gtimg.cn"
;d=d.replace("//qzonestyle.gtimg.cn/","//"+t+"/")}return e};e.go=function(e,n){if(!e){return}if(p){if(a){var t={};t[m]=e;switch(n){case"replace":history.replaceState(t,e,q(y(e)));break;case"popover":h=q(e);break;default:history.pushState(t,e,q(y(e)))}}else{switch(n){case"replace":window.location=q(e);break;case"popover":h=q(e);break;default:if(mqq&&mqq.ui&&mqq.ui.openUrl){mqq.ui.openUrl({url:q(e),target:1,style:1})}else{window.location=q(e)}}}x({},true)}else{e="#!/"+e;switch(n){case"replace":location.replace(e);if(!c){x()}break;case"popover":h=location.href.split("#")[0]+e;x();break;default:location.hash=e;if(!c){x()}}}};e.setHash=function(n,i){i=i||{};var o=t.toUrlParam(i,"&");e.go(n+"?"+o)};e.replaceHash=function(n,i){i=i||{};var o=t.toUrlParam(i,"&");e.go(n+"?"+o,"replace")};e.parseCurrentUrl=function(){return k(location.href)};e.on=function(e,n,t){v[e]={go:n,back:t};if(!i){location.hash="";if(!c){return false}else if(r){window.addEventListener("hashchange",b,false)}else if(o){
window.onhashchange=b}i=true;x()}};e.addToUrl=q;e.values={};function q(e,n){return window.location.protocol+"//"+window.location.host+(n||window.location.pathname)+y(e)}function y(e){var n=e.split("?");var i={};i[m]=n[0];var o=n[1]&&n[1].split(u)||[];for(var a=0;a<o.length;a++){var r=o[a].split("=");i[r[0]]=r[1]}var s=t.parseUrl(window.location.href).params;if(s){for(var a in i){s[a]=i[a]}}else{s=i}var c="";for(var a in s){c+="&"+a+"="+s[a]}if(c)c=c.slice(1);return"?"+c+window.location.hash}function b(e){h=window.location.href;if(!i)return;var n=k(g);var t=k(h);g=h;var o=t.page&&v[t.page],a=n.page&&v[n.page];if(!n.page){o&&o.go(t.state)}else if(!t.page){a&&a.back(n.state)}else{a&&a.back(n.state,true);o&&o.go(t.state,true)}}function x(e,n){if(!i||g===window.location.href)return;h=h||window.location.href;if(!i)return;var t=k(g||e&&e.oldURL);var o=k(h);g=h;h=undefined;_(t,o)}function k(e){e=e||"";var n=window.decodeURIComponent;if(p){var i=e?t.parseUrl(e):{};return{url:i.href,
page:i.params&&i.params[m]||"",state:i.params||{}}}else{var o=e.indexOf("#!/"),a=o>=0?e.slice(o+3):"";var r=a.indexOf("?"),s=r>=0?a.slice(r+1):"";var c=r>=0?a.slice(0,r):a;var l=s.split(u),f={};for(var d=0;d<l.length;d++){var g=l[d].replace(/\+/g,"%20"),h=g.indexOf("="),v=~h?g.slice(0,h):g,w=~h?g.slice(h+1):"";try{v=n(v);w=n(w)}catch(e){console.log(e)}f[v]=t.encodeHtml(w)}return{url:e,page:c,state:f}}}function _(n,t){if(f&&n.page===t.page){f.show&&f.show(t.state)||f.init&&f.init(t.state)}else if(t.page===""){e.go(l,"replace")}else{var i,o;if(t.page.indexOf("/")!==-1){var a=t.page.split("/");i=a[0];o=a[1]}else{o=t.page}seajs.use(d+(i?i+"/index":o),function(n){if(n){if(i){if(o==="index"){f&&f.hide&&f.hide();n.show&&n.show(t.state)||n.init&&n.init(t.state);f=n}else{if(!w[i]){w[i]=true;n.show&&n.show(t.state)||n.init&&n.init(t.state)}seajs.use(d+i+"/"+o,function(e){f&&f.hide&&f.hide();e.show&&e.show(t.state);f=e})}}else{f&&f.hide&&f.hide();n.show&&n.show(t.state);f=n}}else{
e.go(l,"replace")}})}}});define.pack("./schema",["zepto","./wx","./msg","./util","./browser"],function(require,e,n){var t=require("zepto"),i=require("./wx"),o=require("./msg"),a=require("./util"),r=require("./browser");var s=navigator.userAgent.toLowerCase();var c=false;if(s.indexOf("like mac os x")>0){var l=/os [\d._]*/gi;var f=s.match(l);var d=(f+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".");var u=d+"";if(u!="undefined"&&u.length>0){var p=u.split(".");if(p&&p.length){d=p[0]*1;if(d>=9){c=true}}}}var m={callSchema:function(e){var n=this;e=e||{};var o=e.schema;var s=e.androidUrl||"http://m.qzone.com/l?g=65";var c=e.iosUrl||"https://itunes.apple.com/cn/app/qq-kong-jian/id364183992?mt=8";var l=e.otherUrl||"http://qzs.qq.com/qzone/hybrid/page/download/client_update.html?activityID=6";var f=e.packageName||"com.qzone";var d=e.schemaName||"mqzonev2";var u=e.schemaTask||{};u.schemaName=u.schemaName||d;u.packageName=u.packageName||f;var p=r.platform=="android";var m=r.platform=="ios"
;var g=r.client=="qq";var h=r.client=="wx";var v=r.client=="qzone";var w=r.client=="fm";var q=(navigator.userAgent||"").match(/WeiBo/i);var y=parent!=window;var b=function(e){if(e&&typeof e=="function"){var n=this;var t=function(){e(n)};if(typeof window.WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",t,false)}else if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",t);document.attachEvent("onWeixinJSBridgeReady",t)}}else{t()}}};n.isWxJsBridgeReady=false;var x=l;if(p){x=s}else if(m){x=c}var k=function(){n.setLocation(o);if(m&&"com.tencent.radio"==f){setTimeout(function(){if(false===document.hidden){n.download(x,u,e)}},2e3)}else{setTimeout(function(){n.download(x,u,e)},800)}};if(y){k()}else if(g){seajs.use([r.getApiUrl()],function(t){if(mqq&&mqq.app&&mqq.app.isAppInstalled){mqq.app.isAppInstalled(mqq.iOS?d:f,function(t){if(t){n.setLocation(o)}else{var i=r.isGMPackage();i.done(function(t){if(!t){n.download(x,u,e)
}else{window.location.href="market://details?id="+f}})}})}else{k()}})}else if(h&&n.getWeixinVersion()>=n.formatVersion("4.0.0")){b(function(){if(n.isWxJsBridgeReady){return}n.isWxJsBridgeReady=true;if(window.WeixinJSBridge){WeixinJSBridge.invoke("getInstallState",{packageName:f,packageUrl:o},function(t){if(p&&t&&t.err_msg&&t.err_msg.indexOf("get_install_state:yes")>-1||m){if(n.getWeixinVersion()<n.formatVersion("6.5.6")){n.setLocation(o);if(m){var a=new Date;setTimeout(function(){if(new Date-a>2100){return}if(m&&document.hidden===false){n.download(x,u,e)}},2e3)}}else{if("nextradio"==d||"com.tencent.radio"==f){o=o.replace(d+"://","");i.initWXConf().done(function(t){t.invoke("launchApplication",{appID:"wxa9763b5ce513e3f9",parameter:o,extInfo:o},function(t){console.log(t);if("launchApplication:fail"==t.err_msg){n.download(x,u,e)}})}).fail(function(){console.log("initWXConf fail")})}else{WeixinJSBridge.invoke("launchApplication",{schemeUrl:o},function(t){
if(t&&"launchApplication:fail"==t.err_msg){n.download(x,u,e)}})}}}else{n.download(x,u,e)}})}else{k()}})}else if(v){if(e.qzoneUseNewHandler===true){n.setLocation(o)}else{var _="";if(m){_=o}else if(p){_=f}seajs.use(r.getApiUrl(),function(){try{window.QZAppExternal.isAppInstall(_,function(t){if(t.code==0&&(t.data.ret===true||t.data.ret==="true")){n.setLocation(o)}else{n.download(x,u,e)}})}catch(t){n.download(x,u,e)}})}}else if(w){n.setLocation(o);e.isCheck=false}else if(q){if("nextradio"==d||"com.tencent.radio"==f){if(m){var I=location.hostname==="fm.qq.com"?"fm.qzone.qq.com":"fm.qq.com";location.href=location.protocol+"//"+I+"/applink?s="+encodeURIComponent(o)+"&appUrl="+(a.getUrlParam("appUrl")||"")}else{seajs.use(["//qzonestyle.gtimg.cn/touch/proj-radio/css/style-pop-guide.css"],function(e){t("body").append(['<section class="fm-pop-guide"><div class="pic-wrap"><div class="pic"></div></div><div class="tip-wrap"><span class="tip">请使用浏览器打开</span></div></section>'].join(""))
;var n=function(e){e.preventDefault()};document.addEventListener("touchmove",n,false);t(".fm-pop-guide").click(function(e){document.removeEventListener("touchmove",n,false);t(this).remove()})})}}}else{if(p||m){k()}else{n.download(x,u,e)}}if(e.isCheck===true){n.check(function(){n.download(x,u,e)})}},setLocation:function(e){var n=this;if("wx"==r.client&&n.getWeixinVersion()>=n.formatVersion("6.5.6")){var t=function(e){if(e&&typeof e=="function"){var n=this;var t=function(){e(n)};if(typeof window.WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",t,false)}else if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",t);document.attachEvent("onWeixinJSBridgeReady",t)}}else{t()}}};n.isWxJsBridgeReady=false;t(function(){if(n.isWxJsBridgeReady){return}n.isWxJsBridgeReady=true;if(window.WeixinJSBridge){if(e.indexOf("nextradio://")>-1){WeixinJSBridge.invoke("getInstallState",{packageName:"com.tencent.radio",packageUrl:e
},function(n){console.log(n);if(n&&n.err_msg&&n.err_msg.indexOf("get_install_state:yes")>-1){e=e.replace("nextradio://","");i.initWXConf().done(function(n){n.invoke("launchApplication",{appID:"wxa9763b5ce513e3f9",parameter:e,extInfo:e},function(e){console.log(e)})}).fail(function(){console.log("initWXConf fail")})}})}else{WeixinJSBridge.invoke("launchApplication",{schemeUrl:e},function(e){})}}})}else{try{if(c&&!r.client){location.href=e}else{n.callIframe(e)}}catch(e){}}},callQzone:function(e){var n=this;if(e&&e!=""){e=e.replace("mqzone://","mqzonev2://")}n.setLocation(e)},download:function(e,n,t){var i=this;i.downloadAdapter(e,n,t)},downloadAdapter:function(e,n,t){var i=this;if(r.platform=="android"&&n){if("wx"==r.client&&n.name&&n.url&&n.md5){var o=function(e){if(e&&typeof e=="function"){var n=this;var t=function(){e(n)};if(typeof window.WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",t,false)}else if(document.attachEvent){
document.attachEvent("WeixinJSBridgeReady",t);document.attachEvent("onWeixinJSBridgeReady",t)}}else{t()}}};i.isWxJsBridgeReady=false;o(function(){if(i.isWxJsBridgeReady){return}i.isWxJsBridgeReady=true;var o=0;var a={task_name:n.name,task_url:n.url,file_md5:n.md5};if(n.thumb){a["thumb_url"]=n.thumb}if(window.WeixinJSBridge){WeixinJSBridge.invoke("addDownloadTask",a,function(n){if(n.download_id){o=n.download_id}else{window.location.href=e}});WeixinJSBridge.on("wxdownload:state_change",function(e){if(e.state==="download_succ"){WeixinJSBridge.invoke("installDownloadTask",{download_id:o},function(e){if(typeof n.onFinish==="function"){n.onFinish(e)}else{i.callSchema(t)}})}})}})}else if(r.client=="qq"&&n.appid&&n.url&&n.packageName&&n.name){seajs.use([r.getApiUrl()],function(e){if(mqq&&mqq.app&&mqq.app.downloadApp){mqq.app.downloadApp({appid:n.appid,url:n.url,packageName:n.packageName,actionCode:"2",via:n.packageName,appName:n.name},function(e){if(e.state===4){setTimeout(function(){
mqq.app.downloadApp({appid:n.appid,url:n.url,packageName:n.packageName,actionCode:"5",via:n.packageName,appName:n.name},function(e){if(typeof n.onFinish==="function"){n.onFinish(e)}else{i.callSchema(t)}})},200)}})}})}else if(t&&t.androidUrlIframe===true){i.callIframe(e)}else{window.location.href=e}}else if(r.platform=="android"&&t&&t.androidUrlIframe===true){i.callIframe(e)}else{window.location.href=e}},getWeixinVersion:function(){var e=this;var n=s.match(/micromessenger\/([\d\.]+)/);return e.formatVersion(n&&n[1]||"0")},formatVersion:function(e){e=e||"";var n=e.split(".");for(var t=0,i=n.length;t<i;t++){var o=parseInt(n[t],10);if(o<10){n[t]="0"+o}}return n.join(".")},callIframe:function(e){var n=document.createElement("div");n.style.display="none";n.innerHTML='<iframe id="schemaDiv" src="'+e+'" scrolling="no" width="0" height="0"></iframe>';document.body.appendChild(n);setTimeout(function(){document.body.removeChild(n)},800)},check:function(){var e=false;var n=0;var t=true
;return function(i){var o=(new Date).getTime();var a=2e3;if(n!==0){return}n=setTimeout(function(){n=0;if(new Date-o>a+100){return}if(r.platform==="ios"&&document.hidden===false){i()}else if(r.client==="qq"||r.client==="qzone"){t&&i()}},a);if(!e&&r.platform!=="ios"){e=true;mqq&&mqq.addEventListener("pageVisibility",function(e){if(!(e.data&&e.data.visible)){t=false}});document.addEventListener("qbrowserVisibilityChange",function(e){if(e.hidden){t=false}})}}}()};return m});define.pack("./stat",["zepto","./util"],function(require,e,n){var t=require("zepto");var i=require("./util");function o(){}function a(e){e=document.cookie.match(new RegExp("(?:^|;\\s*)"+e+"=([^;]*)"));return e&&e[1]||""}function r(e){var n=[],t;for(t in e)if(e.hasOwnProperty(t))n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}function s(e,n){n=n||window.location;var t=new RegExp("(\\?|#|&)"+e+"=(.*?)(&|#|$)");var i=(n.href||"").match(t);return l(decodeURIComponent(i?i[2]:""))}
function c(e,n){for(var t in n)if(n.hasOwnProperty(t)&&n[t]!==undefined)e[t]=n[t];return e}function l(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\x60/g,"&#96;").replace(/\x27/g,"&#39;").replace(/\x22/g,"&quot;")}function f(e){var n=document.createElement("a");n.href=e;return n}function d(){var e=document.cookie.match(/(^|;|\s)*pvid=([^;]*)(;|$)/);var n;if(e&&e.length>2){n=e[2]}else{n=Math.round(Math.random()*2147483647)*(new Date).getUTCMilliseconds()%1e10;document.cookie="pvid="+n+"; path=/; domain=qq.com; expires=Sun, 18 Jan 2038 00:00:00 GMT;"}return"&pvid="+n}var u=window.HYB||{};var p={uin:function(e){if(e=a("uin"))return parseInt(e.replace("o",""),10);if(e=a("p_uin"))return parseInt(e.replace("o",""),10);return""}(),personid:a("person_id")||"",apn:function(e){e=/NetType\/(\S+)/.exec(window.navigator&&navigator.userAgent||"");return e&&e[1]||""}(),client:u.browserInfo&&u.browserInfo.client||"",qua:u.browserInfo&&u.browserInfo.qua||"",
quaVersion:u.browserInfo&&u.browserInfo.quaVersion||"",platform:u.browserInfo&&u.browserInfo.platform||"",os:u.browserInfo&&u.browserInfo.os||""};e.reportPV=function(e,n,t){e=e||"h5.qzone.qq.com";n=n||location.pathname.substring(1).replace("/",".");t=c({referURL:document.referrer||"",referDomain:e,rate:1},t||{});if(Math.random()>t.rate)return;var o=i.getNodeDomain()||"h5.qzone.qq.com";(new Image).src="https://"+o+"/proxy/domain/pingfore.qq.com/pingd?dm="+e+"&url="+n+"&tt=-&rdm="+t.referDomain+"&rurl="+t.referURL+d()+"&scr=-&scl=-&lang=-&java=1&cc=-&pf=-&tz=-8&ct=-&vs=3.3&emu="+Math.random()};e._pgvGetUserInfo=d;e.reportHotClick=function(e,n,t,o){n=n||"m.qzone.com";t=t||location.pathname.substring(1).replace("/",".");o=o||{rate:1};if(Math.random()>o.rate)return;var a=i.getNodeDomain()||"h5.qzone.qq.com";(new Image).src="https://"+a+"/proxy/domain/pingfore.qq.com/pingd?dm="+n+".hot&url="+t+"&tt=-&hottag="+e+"&hotx=9999&hoty=9999&rand="+Math.random()};e.text={report:function(e,n){
var t=i.getNodeDomain()||"h5.qzone.qq.com";var o=new XMLHttpRequest;o.open("POST","https://"+t+"/log/post/"+(n||"hybrid")+"?uin="+(p.uin||p.personid||101010101),true);o.setRequestHeader("Content-Type","text/plain");o.withCredentials=true;o.send("\n\n\n\n"+e+"\n\n\n")}};e.md={report:function(e,n){e=e||{};n=n||{};if(!e||!e.fromId||!e.toId||!e.interfaceId)return;if(Math.random()>=(n.rate||.1))return;var t=i.getNodeDomain()||"h5.qzone.qq.com";(new Image).src="https://"+t+"/report/md?"+r(e)+"&r="+Math.random()}};e.compass={report:function(e,n,t){t=t||1;if(Math.random()>t)return;n=c({app_id:n.app_id,actiontype:n.actiontype,subactiontype:n.subactiontype,reserves:n.reserves,reserves2:n.reserves2,uin:p.uin,touin:p.uin,qua:p.qua.replace("Qzone/",""),app_version:p.quaVersion,platform:p.platform,page_type:3,t:(new Date).getTime()},n);var o=i.getNodeDomain()||"h5.qzone.qq.com";(new Image).src="https://"+o+"/report/compass/"+e+"?"+r(n)}};e.habo={report:function(e){e=c({appid:"1000361",
releaseversion:p.qua,commandid:"",apn:p.apn,resultcode:0,touin:p.uin,r:Math.random()},e);(new Image).src="http://wspeed.qq.com/w.cgi?"+r(e)}};e.returnCode=function(){var e={domain:"",cgi:"",type:1,code:1,delay:0,rate:1},n,t=[],i=1e3,o;if(location.protocol==="https:"||window.HYB&&window.HYB.jsHttps){n="https://huatuocode.weiyun.com/code.cgi"}else{n="http://c.isdspeed.qq.com/code.cgi"}function a(){var e=["key="+"domain,cgi,type,code,time,rate","r="+Math.random()],i=p.uin;if(i)e.push("uin="+i);if(t&&t.length){var o=0;while(t.length){if(e.join("&").length>1e3){break}var r=t.shift();e.push([o+1,1].join("_")+"="+r[0]);e.push([o+1,2].join("_")+"="+r[1]+"?ref=h5");e.push([o+1,3].join("_")+"="+r[2]);e.push([o+1,4].join("_")+"="+r[3]);e.push([o+1,5].join("_")+"="+r[4]);e.push([o+1,6].join("_")+"="+r[5]);o++}}if(o>0){(new Image).src=n+"?"+e.join("&");t.length&&setTimeout(a,1e3)}}return function(n){var r=c({},e,n);r.rate=1;if((r.rate==1||Math.random()<1/r.rate)&&n.cgi){
var s=f(n.cgi),l=s.pathname.replace(/^([^\/])/,"/$1"),d=s.hostname;t.push([n.domain||d,l,r.type,r.code,r.delay,r.rate]);o&&clearTimeout(o);o=setTimeout(a,i)}}}();e.generateMobileInfo=o;e.speed={init:o,add:o,addByArr:o,send:o};e.iSpeed={init:o,send:o};e.performance=o;e.huatuo={init:o,add:o,send:o};var m={};e.reportNewCompass=function(e){var n=function(){var e=t.Deferred();if(m.deviceInfo){e.resolve(m.deviceInfo);return e}if(p.client==="qq"||p.client==="qzone"){window.mqq&&mqq.invoke&&mqq.invoke("device","getDeviceInfo",function(n){if(n&&n.data){m.deviceInfo={mobileType:n.data.modelVersion||n.data.model,osVersion:n.data.systemVersion}}else{m.deviceInfo={mobileType:"unknown",osVersion:"unknown"}}e.resolve(m.deviceInfo)})}else{m.deviceInfo={mobileType:"unknown",osVersion:"unknown"};e.resolve(m.deviceInfo)}setTimeout(function(){e.resolve({mobileType:"unknown",osVersion:"unknown"})},2e3);return e};var o=function(){var e=t.Deferred();if(m.networkType){e.resolve(m.networkType);return e}
if(p.client==="qq"){window.mqq&&mqq.invoke&&mqq.invoke("device","getNetworkType",function(n){m.networkType={"-1":"unknown",0:"NotReachable",1:"wifi",2:"2G",3:"3G",4:"4G"}[n]||"unknown";e.resolve(m.networkType)})}else if(p.client==="qzone"){QZAppExternal&&QZAppExternal.getConn(function(n){if(n&&n.code==0){m.networkType=n.data}else{m.networkType="unknown"}e.resolve(m.networkType)})}else{m.networkType="unknown";e.resolve(m.networkType)}setTimeout(function(){e.resolve("unknown")},2e3);return e};function a(e){var n=[];var t;for(t in e){if(e.hasOwnProperty(t))n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]))}return n.join("&")}t&&t.when&&t.when(n(),o()).done(function(n,o){var r=t.extend({uid:p.uin,to_uid:p.uin,qua:p.qua,network_type:o,mobile_type:n.mobileType,os_version:n.osVersion},e);var s=i.getNodeDomain()||"h5.qzone.qq.com";(new Image).src="https://"+s+"/report/compass/"+(r.table||"dc03363")+"?"+a(r);return true})};e.reportLogin=function(){if(!p.uin){return}var n=20
;var t=function(){e.reportNewCompass({table:"pf00034",uin:p.uin,touin:p.uin,page_type:2,login_from:n,report_from:3,platform:p.platform,app_version:p.quaVersion})};if(p.client==="qq"){require.async("jssdk",function(){if(window.mqq&&mqq.data&&mqq.data.getWebRunEnv){mqq.data.getWebRunEnv(function(e){if(e&&e.code===0&&e.data){if(["group","friend","discussGroup"].indexOf(e.data.env_type)!==-1){console.log("QQ auto report qzone login");n=18;t()}}})}});if(s("reportLogin")=="wxtoqq"){n=21;t()}}else if(p.client!=="qzone"){console.log("auto report qzone login");if(p.client==="wx"){n=19}t()}};if(!window.notAutoReportPv){(function(){var n=function(){var e=location.pathname;if(!e||e.length<=0){e=location.hostname;return e}if(e.match(/^\/weishi\//)){e=e.replace(/\/\w{14,1000}/g,"/_")}e=e.substr(1).replace(/(qzone\/hybrid\/(module\/)?|\.html|\/?\d{5,1000})/g,"");if(window.autoReportPvPath){e=window.autoReportPvPath}e+=location.protocol==="https:"||u.jsHttps?".https":".http"
;e=e.indexOf("photo/v7/page/photo")!==-1?decodeURIComponent(s("init")):e;if(!e)e="index.html";return e.replace(/\//gi,".")}();if(p.client==="qq"){n+=".in_mqq_client"}else if(p.client==="qzone"){n+=".in_mqzone_client"}else if(p.client==="ws"){n+=".in_weishi_client"}else if(p.client==="wx"){n+=".in_weixin_client"}else{n+=".in_other_client"}if(p.platform==="android"){n+=".android"}else if(p.platform==="ios"){n+=".ios"}else{n+=".otherplatform"}e.reportPV("h5.qzone.qq.com",n)})()}if(!window.notAutoReportQzoneLogin){(function(){e.reportLogin()})()}});define.pack("./storage",["zepto"],function(require,e,n){var t=require("zepto");var i={};i.cookie=function(){var e=document.domain.split("."),n=e.length,t=e.slice(n-2,n).join(".");return{name:"cookie",isSupported:typeof document.cookie=="string",init:function(){},set:function(e,n,i,o,a){var r;if(a){r=new Date;r.setTime(r.getTime()+36e5*a)}
document.cookie=e+"="+n+"; "+(r?"expires="+r.toGMTString()+"; ":"")+("path="+(o||"/")+"; ")+("domain="+(i||t)+";")},get:function(e,n){if(!n){var t=new RegExp("(?:^|;\\s*)"+e+"=([^;]*)");var i=document.cookie.match(t);return i&&i[1]||""}else{var t=new RegExp("(?:^|;\\s*)"+e+"=([^;]*)","g");var o="",i;while((i=t.exec(document.cookie))&&o===""){o=i&&i[1]||""}return o}},del:function(e,n,i){document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+("path="+(i||"/")+"; ")+("domain="+(n||t)+";")},clear:function(){var e=document.cookie.match(/\w+=[^;]*/g);if(e){for(var n=0,t=e.length;n<t;n++){this.del(e[n].split("=")[0])}}}}}();try{i.localStorage={name:"localStorage",isSupported:!!window.localStorage,init:function(){},set:function(e,n){localStorage.setItem(e,n)},get:function(e){return localStorage.getItem(e)},del:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear()}}}catch(e){}i.data=function(e,n){var i={keyConfig:"_keyConfig",clear:function(e){
var n=this[this.keyConfig];e[n]=undefined;delete e[n]}};var o=function(e,n,o){var a=e,r,s,c,l;if(this.hasOwnProperty(a)){r=this[a]}else{r=undefined}if(t.isPlainObject(n)){if(!r){this[a]=n}else{l=arguments;c=l.callee;for(var f in n){c.call(this,e,f,n[f])}}return false}if(!r){r=hybrid.object.create(i);r[i.keyConfig]=a;this[a]=r}if(n){if(o===undefined){s=r[n]}else{r[n]=o;s=r}}else{s=r}return s};return o.call(hybrid,"_globalStore",e,n)};return i});define.pack("./user",["zepto","./util","./ajax"],function(require,e,n){var t=require("zepto"),i=require("./util");var o={},a;function r(e){var n=new RegExp("(?:^|;\\s*)"+e+"=([^;]*)"),t=document.cookie.match(n);return t&&t[1]||""}if(a=r("uin")){a=parseInt(a.replace("o",""),10);o.uin=a}else if(a=r("p_uin")){a=parseInt(a.replace("o",""),10);o.uin=a}return{getToken:function(){var e=null,n=null;return function(){var t=r("skey")||"",i=5381,o=n;if(t){if(t!==e){e=t;var a=0,s=t.length;for(;a<s;++a){i+=(i<<5)+t.charAt(a).charCodeAt()}n=o=i&2147483647}
}else{n=o=""}return o}}(),getPskeyToken:function(){var e=null,n=null;return function(){var t=r("p_skey")||r("skey")||r("rv2")||r("access_token")||"",i=5381,o=n;if(t){if(t!==e){e=t;var a=0,s=t.length;for(;a<s;++a){i+=(i<<5)+t.charAt(a).charCodeAt()}n=o=i&2147483647}}else{n=o=""}return o}}(),getUserInfo:function(e){var n=false;return function(e){var i=t.Deferred();var a="http://activity.qzone.qq.com/fcg-bin/v2/fcg_get_user_info";if(location.protocol==="https:"||window.HYB&&window.HYB.jsHttps){a="//h5.qzone.qq.com/proxy/domain/activity.qzone.qq.com/fcg-bin/v2/fcg_get_user_info"}e=e||{};if(n&&!e.nocache){i.resolve(o)}else{require("./ajax").request({type:"get",forceLogin:false,data:{emoji:e.emoji?"1":"0"},dataType:"jsonp",url:a}).done(function(e){if(e.code===0){n=true;o=e.data;i.resolve(e.data)}else{i.reject(e.message)}}).fail(function(){i.reject("获取用户信息失败")})}return i.promise()}}(),getUin:function(){return o.uin},setUin:function(e){a=e;o.uin=e},getAvatar:function(e,n,o){
o=o||window.HYB&&HYB.browserInfo&&HYB.browserInfo.client||"qq";if(o==="qq"||"fm"==o){var a=[40,100,140];n=n?~t.inArray(n,a)?n:100:100;return"//q.qlogo.cn/openurl/"+e+"/"+e+"/"+n+"?rf=qz_hybrid&c="+i.base62().encode("qz_hybrid@"+e)}else{var a=[30,50,100];n=n?~t.inArray(n,a)?n:50:50;return"//qlogo"+(e%4+1)+".store.qq.com/qzone/"+e+"/"+e+"/"+n}},refreshLoginKey:function(){setTimeout(function(){location.href="https://h5.qzone.qq.com/refreshskey/index?from=hybridLib&refer_url="+encodeURIComponent(location.href.replace(/\bsid[^&#]*/g,"").replace("?&","?"))},0)}}});define.pack("./util",["zepto"],function(require,e,n){var t=require("zepto");var i={parseUrl:function(e){var n=document.createElement("a"),t={};n.href=e;t={href:e,origin:undefined,protocol:n.protocol.replace(":",""),hostname:n.hostname,host:n.hostname,port:n.port,search:n.search,hash:n.hash,pathname:n.pathname.replace(/^([^\/])/,"/$1"),params:function(){var e={},t=n.search.replace(/^\?/,"").split("&"),o=t.length,a=0,r;for(;a<o;a++){
if(!t[a]){continue}var s=t[a].indexOf("=");e[t[a].substr(0,s)]=i.encodeHtml(decodeURIComponent(escape(t[a].substr(s+1))))}return e}()};return t},getQueryObj:function(e){var e=e||location.href;return this.parseUrl(e).params},formatLeftTime:function(e){var n=m=h=0;n=parseInt(e/1e3);n=n||1;if(n>=60){m=parseInt(n/60);n=n%60}if(m>=60){h=parseInt(m/60);m=m%60}return[h?h+"小时":"",m?m+"分":"",n?n+"秒":""].join("")},toUrlParam:function(e){var n=[];if(!e){return""}for(var t in e){if(typeof e[t]=="string"&&e[t]||typeof e[t]=="number"){n.push(t+"="+e[t])}}return n.join("&")},appendUrlParam:function(e,n,t){if(typeof n=="string"){n=n.replace(/^&/,"")}else{n=i.toUrlParam(n)}if(!n){return e}if(t){if(e.indexOf("#")==-1){e+="#"+n}else{e+="&"+n}}else{if(e.indexOf("#")==-1){if(e.indexOf("?")==-1){e+="?"+n}else{e+="&"+n}}else{var o=e.split("#");if(o[0].indexOf("?")==-1){e=o[0]+"?"+n+"#"+(o[1]||"")}else{e=o[0]+"&"+n+"#"+(o[1]||"")}}}return e},encodeHtml:function(e){
return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\x60/g,"&#96;").replace(/\x27/g,"&#39;").replace(/\x22/g,"&quot;")},decodeHtml:function(e){return(e+"").replace(/&quot;/g,'"').replace(/&#0*39;/g,"'").replace(/&#0*96;/g,"`").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},cut:function(e,n,t){e=String(e);n-=0;t=t||"...";if(isNaN(n))return e;var i=e.length,o=Math.min(Math.floor(n/2),i),a=this._getRealLen(e.slice(0,o));for(;o<i&&a<n;o++)a+=1+(e.charCodeAt(o)>255);return e.slice(0,a>n?o-1:o)+(o<i?t:"")},_getRealLen:function(e,n){if(typeof e!="string")return 0;if(!n)return e.replace(/[^\x00-\xFF]/g,"**").length;else{var t=e.replace(/[\x00-\xFF]/g,"");return e.length-t.length+encodeURI(t).length/3}},insertStyleSheet:function(e,n){var t=document.createElement("style");t.type="text/css";e&&(t.id=e);document.getElementsByTagName("head")[0].appendChild(t);if(n){if(t.styleSheet){t.styleSheet.cssText=n}else{
t.appendChild(document.createTextNode(n))}}return t.sheet||t},insertStyleLink:function(e,n){var t=document.createElement("link");t.rel="stylesheet";e&&(t.id=e);document.getElementsByTagName("head")[0].appendChild(t);if(n){t.href=n}return t},imgdpr:function(){if(window.devicePixelRatio>1.3){return imgdpr="@2x."}else{return"."}},formatDate:function(e,n){var t=n,i="";t=t.replace(/yyyy|yy/,function(n){if(n.length===4){return e.getFullYear()}else{return(e.getFullYear()+"").slice(2,4)}}).replace(/MM|M/,function(n){if(n.length===2&&e.getMonth()<9){return"0"+(e.getMonth()+1)}else{return e.getMonth()+1}}).replace(/dd|d/,function(n){if(n.length===2&&e.getDate()<10){return"0"+e.getDate()}else{return e.getDate()}}).replace(/HH|H/,function(n){if(n.length===2&&e.getHours()<10){return"0"+e.getHours()}else{return e.getHours()}}).replace(/hh|h/,function(n){var t=e.getHours();if(t>11){i="PM"}else{i="AM"}t=t>12?t-12:t;if(n.length===2&&t<10){return"0"+t}else{return t}}).replace(/mm/,function(n){
if(e.getMinutes()<10){return"0"+e.getMinutes()}else{return e.getMinutes()}}).replace(/ss/,function(n){if(e.getSeconds()<10){return"0"+e.getSeconds()}else{return e.getSeconds()}}).replace("tt",i);return t},getUrlParam:function(e,n,t){n=n||window.location;var o=new RegExp("(\\?|#|&)"+e+"=(.*?)(&|#|$)");var a=(n.href||"").match(o);var r=decodeURIComponent(a?a[2]:"");t=t||{};if(t.encodeHtml!==false){r=i.encodeHtml(r)}return r},formatQua:function(e){e=e.toUpperCase();var n=e.split("_");var t=/^(AND|IOS|IPH)$/;var i=/^[a-zA-Z0-9]+$/;var o=/^\d+\.\d+\.\d+$/;var a=/^\d+$/;var r;if(n.length==7&&t.test(n[1])&&i.test(n[2])&&o.test(n[3])&&a.test(n[4])){r={os:n[1],app:n[2],version:n[3],subVersion:n[4],appType:n[5],meybeQua:e}}else{r={}}return r},base64:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var n=function(e){var n={};for(var t=0,i=e.length;t<i;t++)n[e.charAt(t)]=t;return n}(e);var t=String.fromCharCode;var i=function(e){if(e.length<2){
var n=e.charCodeAt(0);return n<128?e:n<2048?t(192|n>>>6)+t(128|n&63):t(224|n>>>12&15)+t(128|n>>>6&63)+t(128|n&63)}else{var n=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return t(240|n>>>18&7)+t(128|n>>>12&63)+t(128|n>>>6&63)+t(128|n&63)}};var o=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;var a=function(e){return e.replace(o,i)};var r=function(n){var t=[0,2,1][n.length%3],i=n.charCodeAt(0)<<16|(n.length>1?n.charCodeAt(1):0)<<8|(n.length>2?n.charCodeAt(2):0),o=[e.charAt(i>>>18),e.charAt(i>>>12&63),t>=2?"=":e.charAt(i>>>6&63),t>=1?"=":e.charAt(i&63)];return o.join("")};var s=function(e){return e.replace(/[\s\S]{1,3}/g,r)};var c=function(e){return s(a(e))};var l=function(e,n){return!n?c(e):c(e).replace(/[+\/]/g,function(e){return e=="+"?".":"*"}).replace(/=/g,"")};var f=function(e){return l(e,true)};var d=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g");var u=function(e){switch(e.length){case 4:
var n=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=n-65536;return t((i>>>10)+55296)+t((i&1023)+56320);case 3:return t((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return t((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}};var p=function(e){return e.replace(d,u)};var m=function(e){var i=e.length,o=i%4,a=(i>0?n[e.charAt(0)]<<18:0)|(i>1?n[e.charAt(1)]<<12:0)|(i>2?n[e.charAt(2)]<<6:0)|(i>3?n[e.charAt(3)]:0),r=[t(a>>>16),t(a>>>8&255),t(a&255)];r.length-=[0,0,2,1][o];return r.join("")};var g=function(e){return e.replace(/[\s\S]{1,4}/g,m)};var h=function(e){return p(g(e))};var v=function(e){return h(e.replace(/[\.\*]/g,function(e){return e=="."?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};var w={atob:g,btoa:s,fromBase64:v,toBase64:l,utob:a,encode:l,encodeURI:f,btou:p,decode:v};return w},base62:function(){return{decode:function(e){return i.base64().decode(e.replace(/ic/g,"/").replace(/ib/g,"+").replace(/ia/g,"i"))},
encode:function(e){return i.base64().encode(e).replace(/[=i\+\/]/g,function(e){switch(e){case"=":return"";case"i":return"ia";case"+":return"ib";case"/":return"ic";default:return""}})}}},http2https:function(e){e=e||"";var n;if("string"==typeof e){n=e.replace("http://","https://")}else{n=e}return n},transferUbbToImg:function(){var e=window.devicePixelRatio>1?"@2x":"";return function(n){var t=/iPhone|iPad/.test(navigator.userAgent);var i=new RegExp("\\[em\\]e(\\d{3,10})\\[\\/em\\]","g"),o=n,a,r;while(a=i.exec(n)){var s=t?".gif":a[1]<200?".png":".gif";r="<img class='i-emoji-m' src='//qzonestyle.gtimg.cn/qzone/em/e"+a[1]+e+s+"' alt='表情' >";o=o.replace(a[0],r)}return o}}(),getValueByPaths:function(e,n,t){if(!n||!e){return e}var n=[].concat(n);var i;for(var o=0;o<n.length;++o){var a=n[o];if(Object.prototype.toString.call(a)!=="[object String]"){continue}a=a.trim();a=a.replace(/^\.|\.$/g,"");var r=a.split(".");var i=e;for(var s=0;s<r.length;++s){var c=r[s];if(i[c]!==undefined&&i[c]!==null){
if(s===r.length-1){i=i[c];return i}else{i=i[c]}}else{if(o===n.length-1){return t}else{break}}}}return t},getSnapUrl:function(e,n){if(!e){n&&n(e)}var t=document.createElement("canvas");var i=new Image;i.crossOrigin="anonymous";i.onload=function(){var i=this.width,o=this.height;if(i&&o){t.width=i;t.height=o;t.getContext("2d").drawImage(this,0,0,i,o);try{var a=t.toDataURL("image/gif");n&&n(a)}catch(t){n&&n(e)}}};i.onerror=function(){n&&n(e)};i.src=e.replace(/https?\/\//,"//proxy.gtimg.cn/tx_tls_gate=")},loadedImages:null,tempAnchor:null,loadImage:function(e){var n=t.Deferred(),i=this;if(typeof e==="string"){e={url:e}}if(!this.loadedImages){this.loadedImages={}}if(e.name&&this.loadedImages[e.name]){n.resolve(this.loadedImages[e.name].image);return n}var o=new Image,a="",r=Date.now(),s=false;if(!e.name){e.name=r}this.loadedImages[e.name]={image:o,timeInt:0};if(e.crossOrigin===undefined){a=this._determineCrossOrigin(e.url)}else if(e.crossOrigin){a="anonymous"}o.crossOrigin=a
;o.onload=function(){logger.log("image success",{url:e.url,delay:Date.now()-r});clearTimeout(i.loadedImages[e.name].timeInt);s||n.resolve(this)};o.onerror=function(){logger.log("image error",{url:e.url,delay:Date.now()-r});clearTimeout(i.loadedImages[e.name].timeInt);s||n.reject(this)};this.loadedImages[e.name].timeInt=setTimeout(function(){logger.log("image timeout",{url:e.url,delay:Date.now()-r});s=true;n.reject(o)},e.timeout||3e3);logger.log("image send request",{url:e.url});o.src=e.url;return n},_determineCrossOrigin:function(e,n){if(e.indexOf("data:")===0){return""}n=n||window.location;if(!this.tempAnchor){this.tempAnchor=document.createElement("a")}this.tempAnchor.href=e;e=this.parseUrl(this.tempAnchor.href);var t=!e.port&&n.port===""||e.port===n.port;if(e.hostname!==n.hostname||!t||e.protocol!==n.protocol){return"anonymous"}return""},nodeDomains:["h5.qzone.qq.com","h5s.qzone.qq.com","h5test.qzone.qq.com","fm.qq.com","fm.qzone.qq.com","h5.abcmouse.qq.com","h5.weishi.qq.com"],
getNodeDomain:function(){var e="h5.qzone.qq.com";var n=window.location.hostname;if(this.nodeDomains.indexOf){if(~this.nodeDomains.indexOf(n)){e=n}}else{var t,i;for(t in this.nodeDomains){i=this.nodeDomains[t];if(i===n){e=n;break}}}return e}};return i});define.pack("./webapp",[],function(require,e,n){e.flatObj=function(e){var n={};var t=function(e,i){var o=Object.prototype.toString.call(i),a,r;if(o!=="[object Object]"&&o!=="[object Array]"){if(!e){n=i}else{n[e]=i}return}for(var a in i){r=(!!e?e+".":"")+(o==="[object Array]"?"_Array":"")+a;t(r,i[a])}};t("",e);return n}});define.pack("./wx",["./ajax","./stat","zepto"],function(require,e,n){var t=require("./ajax"),i=require("./stat"),o=require("zepto");var a={},r={},s=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","launchApplication","getNetworkType","previewImage"],c={},l={},f={};function d(e,n){if(!a[e]||!r[e])return false;for(var t=0;t<n.length;t++){if(!r[e][n[t]])return false}return true}
function u(e,n,t){a[n]=t;if(!r[n])r[n]={};e.forEach(function(e){r[n][e]=true})}function p(e,n){if(!f[e])return false;return true}function m(e,n){if(!c[e]){c[e]=[]}n.map(function(n){if(!~c[e].indexOf(n)){c[e].push(n)}})}function g(e,n){if(!l[e])l[e]=[];l[e].push(n)}function h(e){f[e]=false;l[e]=[];c[e]=[]}function v(e,n){l[e].map(function(e){e.resolve(n)});h(e)}function w(e,n){l[e].map(function(e){e.reject(n)});h(e)}e.initWXConf=function(e){var n=o.Deferred();var r={weishi:"wxc1fc5d34fc24f53b",qzone:"wx62b3b91d3cf7c8c2"},l,h=e||s;if(~location.hostname.indexOf("weishi")){l=r.weishi}else{l=r.qzone}if(d(l,h)){n.resolve(a[l]);return n}var q=[];h.map(function(e){q.push(e)});m(l,q);g(l,n);if(p(l)){return n}f[l]=true;require.async("//res.wx.qq.com/open/js/jweixin-1.0.0.js",function(e){if(!e||!e.config){w(l);return n}var o=t.request({url:"//activity.qzone.qq.com/fcg-bin/fcg_act_weixin_jssdk_sig",requestType:"jsonp",dataType:"jsonp",data:{url:location.href.replace(location.hash,""),appid:l}})
;o.done(function(n){if(n.code===0){var t=n.data;e&&e.config&&e.config({debug:false,beta:true,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:c[l]});e&&e.error&&e.error(function(e){if(e.errMsg==="config:invalid signature"){i&&i.returnCodeV4&&i.returnCodeV4({domain:"activity.qzone.qq.com",cgi:"/activity/wxjssdk/invalid_signature",type:3,code:1,delay:300})}});e.ready(function(){u(h,l,e);v(l,e)})}else{console.log("weixin_jssdk_sig error",n);w(l,n)}}).fail(function(){w(l,{})})});return n}});define.pack("./tmpl",[],function(require,e,n){var t={encodeHtml:function(e){return(e+"").replace(/[\x26\x3c\x3e\x27\x22\x60]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},dialog:function(e){var n=[],t=function(e){n.push(e)},i=t;n.push('    <div id="jsbridge-dialog-div">\n        <div class="ui-modal jsbridge-dialog">\n            <div class="ui-modal-bd">\n                <div class="content">');t(e.title);n.push('                    <span class="tips">')
;t(e.text);n.push('</span>\n                </div>\n            </div>\n            <footer class="ui-modal-ft">\n                <button class="btn btn-confirm jsbridge-dialog-confirm-button" data-val="0">');t(e.okBtnText);n.push('</button>\n                <button class="btn btn-cancel jsbridge-dialog-cancel-button" data-val="1">');t(e.cancelBtnText);n.push('</button>\n            </footer>\n        </div>\n        <div class="ui-modal-mask"></div>\n    </div>');return n.join("")}};return t});

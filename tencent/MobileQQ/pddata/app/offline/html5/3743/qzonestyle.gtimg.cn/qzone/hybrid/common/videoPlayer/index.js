"use strict";var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i){if(Object.prototype.hasOwnProperty.call(i,n)){e[n]=i[n]}}}return e};var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function _possibleConstructorReturn(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _inherits(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}
function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}(function(){var e=[],t=parseFloat(seajs.version);define([],function(require,i,n){var s=n.uri||n.id,r=s.split("?")[0].match(/^(.+\/)([^\/]*?)(?:\.js)?$/i),o=r&&r[1],a=r&&"./"+r[2],l=0,u=e.length,c,p;a=a.replace(/\.r[0-9]{15}/,"");for(;l<u;l++){p=e[l];if(typeof p[0]==="string"){a===p[0]&&(c=p[2]);p[0]=o+p[0].replace("./","");t>1&&define.apply(this,p)}}e=[];require.get=require;return typeof c==="function"?c.apply(this,arguments):require});define.pack=function(){e.push(arguments);t>1||define.apply(null,arguments)}})();define.pack("./events/config",[],function(require,e,t){t.exports=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","fullscreenchange","click","mouseleave","mouseenter"]})
;define.pack("./events/creator",["./config","./video/index","../pub/util","./video/Volumechange","./video/Loadedmetadata","./video/Timeupdate","./video/Fullscreenchange","./player/PCClick","./player/index"],function(require,e,t){var i=require("./config");var n=require("./video/index");var s=require("../pub/util");var r={Volumechange:require("./video/Volumechange"),Loadedmetadata:require("./video/Loadedmetadata"),Timeupdate:require("./video/Timeupdate"),Fullscreenchange:require("./video/Fullscreenchange"),Click:s.platform==="pc"?require("./player/PCClick"):require("./player/index"),Mouseenter:require("./player/index"),Mouseleave:require("./player/index")};for(var o=0;o<i.length;o++){var a=i[o];var l=a.charAt(0).toLocaleUpperCase()+a.substring(1);r[l]=r[l]||n}t.exports={create:function e(t,i,n){if(!s.isFunction(i)&&t){i=r[t.charAt(0).toLocaleUpperCase()+t.substring(1)]}if(i){n.name=n.name||t;return new i(n)}else{return null}}}})
;define.pack("./events/player/PCClick",["../../pub/util","../../pub/data"],function(require,e,t){var i=require("../../pub/util");var n=require("../../pub/data");var s=function(){function e(t){_classCallCheck(this,e);this.props=t;this.handleMousedown=this.handleMousedown.bind(this);this.handleClick=this.handleClick.bind(this)}_createClass(e,[{key:"on",value:function e(){var t=this.props,i=t.player,n=t.name;i.container&&i.container.addEventListener("mousedown",this.handleMousedown);i.container&&i.container.addEventListener("click",this.handleClick)}},{key:"off",value:function e(){var t=this.props,i=t.player,n=t.name;i.container&&i.container.removeEventListener("mousedown",this.handleMousedown);i.container&&i.container.removeEventListener("click",this.handleClick)}},{key:"handleMousedown",value:function e(t){var i=this.props.player;i.container.setAttribute("data-clickx",t.clientX);i.container.setAttribute("data-clicky",t.clientY)}},{key:"handleClick",value:function e(t){
var i=this.props,n=i.player,s=i.name;var r=parseInt(n.container.getAttribute("data-clickx"));var o=parseInt(n.container.getAttribute("data-clicky"));if(t.clientX===r&&t.clientY===o){n.log("[event] "+s);n.emit(s,t)}}}]);return e}();t.exports=s});define.pack("./events/player/index",["../../pub/util","../../pub/data"],function(require,e,t){var i=require("../../pub/util");var n=require("../../pub/data");var s=function(){function e(t){_classCallCheck(this,e);this.props=t;this.emit=this.emit.bind(this)}_createClass(e,[{key:"on",value:function e(){var t=this.props,i=t.player,n=t.name;i.container&&i.container.addEventListener(n,this.emit)}},{key:"off",value:function e(){var t=this.props,i=t.player,n=t.name;i.container&&i.container.removeEventListener(n,this.emit)}},{key:"emit",value:function e(t){var i=this.props,n=i.player,s=i.name;n.log("[event] "+s);n.emit(s,t)}}]);return e}();t.exports=s})
;define.pack("./events/video/Fullscreenchange",["../../pub/util","../../video/fullscreenApi"],function(require,e,t){var i=require("../../pub/util");var n=require("../../video/fullscreenApi");var s=function(){function e(t){_classCallCheck(this,e);this.props=t;this.fullScreenElement=null;this.fullscreenchange=this.fullscreenchange.bind(this);this.webkitbeginfullscreen=this.webkitbeginfullscreen.bind(this);this.webkitendfullscreen=this.webkitendfullscreen.bind(this)}_createClass(e,[{key:"on",value:function e(){var t=this.props.player;var s=t.video||[];if(s&&!i.isArray(s)){s=[s]}for(var r=0;r<s.length;r++){s[r].addEventListener&&s[r].addEventListener("webkitbeginfullscreen",this.webkitbeginfullscreen);s[r].addEventListener&&s[r].addEventListener("webkitendfullscreen",this.webkitendfullscreen)}document.addEventListener(n().fullscreenchange,this.fullscreenchange)}},{key:"off",value:function e(){var t=this.props.player;var s=t.video||[];if(s&&!i.isArray(s)){s=[s]}for(var r=0;r<s.length;r++){
s[r].removeEventListener&&s[r].removeEventListener("webkitbeginfullscreen",this.webkitbeginfullscreen);s[r].removeEventListener&&s[r].removeEventListener("webkitendfullscreen",this.webkitendfullscreen)}document.removeEventListener(n().fullscreenchange,this.fullscreenchange)}},{key:"fullscreenchange",value:function e(t){var i=this.props.player;if(document[n().fullscreenElement]){this.fullScreenElement=document[n().fullscreenElement];if(this.fullScreenElement!==i.container&&this.fullScreenElement!==i.videoTag())return;i._private.videoSize=i.props.videoSize;i.props.videoSize="contain";i._private.isFullScreen=true}else{if(this.fullScreenElement!==i.container&&this.fullScreenElement!==i.videoTag())return;this.fullScreenElement=null;i.props.videoSize=i._private.videoSize;i._private.videoSize=null;i._private.isFullScreen=false}if(i._private.isFullScreen&&i.container.className.indexOf("vpjs-fullscreen")===-1){i.container.className+=" vpjs-fullscreen"}else{
i.container.className=i.container.className.replace(" vpjs-fullscreen","")}i.setTimeout(function(e){i.videoSize()},0);this.emit(t)}},{key:"webkitendfullscreen",value:function e(t){var i=this.props.player;i._private.isFullScreen=false;i.container.className=i.container.className.replace(" vpjs-fullscreen","");this.emit(t)}},{key:"webkitbeginfullscreen",value:function e(t){var i=this.props.player;i._private.isFullScreen=true;i.container.className+=" vpjs-fullscreen";this.emit(t)}},{key:"emit",value:function e(t){var i=this.props,n=i.player,s=i.name;n.log("[event] "+s);n.emit(s,t)}}]);return e}();t.exports=s});define.pack("./events/video/Loadedmetadata",["./index"],function(require,e,t){var i=require("./index");var n=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,[{key:"emit",value:function e(t){var i=this.props,n=i.player,s=i.name;if(this.prevSrc!=n.src()){
console.log("Loadedmetadata videoSize");this.prevSrc=n.src();setTimeout(n.videoSize.bind(n),0)}n.log("[event] "+s);n.emit(s,t)}}]);return t}(i);t.exports=n});define.pack("./events/video/Timeupdate",["./index"],function(require,e,t){var i=require("./index");var n=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.isResize=false;i.bind();return i}_createClass(t,[{key:"bind",value:function e(){var t=this;var i=this.props.player;i.on("loadedmetadata",function(e){return t.isResize=true})}},{key:"emit",value:function e(t){var i=this.props,n=i.player,s=i.name;if(this.isResize){console.log("Timeupdate videoSize");this.isResize=false;setTimeout(n.videoSize.bind(n),0)}n.log("[event] "+s);n.emit(s,t)}}]);return t}(i);t.exports=n});define.pack("./events/video/Volumechange",["./index"],function(require,e,t){var i=require("./index");var n=function(e){_inherits(t,e);function t(e){
_classCallCheck(this,t);return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}_createClass(t,[{key:"emit",value:function e(t){var i=this.props,n=i.player,s=i.name;if(n._private.isMuted!==n.muted()||n._private.volume!==n.volume()){n._private.isMuted=n.muted();n._private.volume=n.volume();n.log("[event] "+s);n.emit(s,t)}}}]);return t}(i);t.exports=n});define.pack("./events/video/index",["../../pub/util"],function(require,e,t){var i=require("../../pub/util");var n=function(){function e(t){_classCallCheck(this,e);this.props=t;this.emit=this.emit.bind(this)}_createClass(e,[{key:"on",value:function e(){var t=this.props,n=t.player,s=t.name;var r=n.video||[];if(r&&!i.isArray(r)){r=[r]}for(var o=0;o<r.length;o++){r[o].addEventListener&&r[o].addEventListener(s,this.emit)}}},{key:"off",value:function e(){var t=this.props,n=t.player,s=t.name;var r=n.video||[];if(r&&!i.isArray(r)){r=[r]}for(var o=0;o<r.length;o++){
r[o].removeEventListener&&r[o].removeEventListener(s,this.emit)}}},{key:"emit",value:function e(t){var i=this.props,n=i.player,s=i.name;n.log("[event] "+s);n.emit(s,t)}}]);return e}();t.exports=n});define.pack("./index",["./pub/util","./pub/data","./mixins/Events","./video/Base","./video/creator","./plugins/creator"],function(require,e,t){var i=require("./pub/util");var n=require("./pub/data");var s=require("./mixins/Events");var r=require("./video/Base");var o=require("./video/creator");var a=require("./plugins/creator");var l=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!t.playerId&&!i.inputElement(t)){throw"playerId or element or container cannot be null"}return e.getPlayers(t)};l.pluginsConfig=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return n.pluginsConfig(_extends({},n.pluginsConfig(),e))};l.eventsConfig=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}
;return n.eventsConfig(_extends({},n.eventsConfig(),e))};l.getPlayers=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(e.playerId){return n.players(e.playerId)}if(!i.inputElement(e))return n.players();var t=n.getPlayerId(e);var s=void 0;if(t&&n.players(t)){s=n.players(t)}else{s=o.create(e)}return s};l.getPlayerId=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return n.getPlayerId(e)};l.registerPlugin=function(e,t){return a.registerPlugin(e,t)};l.registerVideo=function(e,t){return o.registerVideo(e,t)};l.getPlugins=function(e){return a.getPlugins(e)};l.util=i;l.autoplay=i.autoplay;l.BaseVideo=r;l.reset=function(){n.clearPlayers()};l.emit=s.prototype.emit;window.addEventListener("resize",function(e){var t=l.getPlayers();Object.keys(t).forEach(function(e){t[e].videoSize()})});t.exports=l});define.pack("./mixins/Events",["../pub/util"],function(require,e,t){var i=require("../pub/util");var n={};var s=function(){function e(){
_classCallCheck(this,e)}_createClass(e,[{key:"on",value:function e(t,s){var r=this;var o="";if(!this.id){return}if(!t){return}if(t.indexOf(".")<0){o=t+"."}o=this.id+"."+(o||t);var a=function(e){return function(t){try{e&&e.call(r,t)}catch(e){console.error(e.message+"\n"+e.stack)}}}(s);var l=s.__id__||i.getRandom();s&&(s.__id__=l);a&&(a.__id__=l);a.__name__=s.__name__;n[o]=n[o]||[];n[o].push(a);if(t!=="dispose"){var u=function e(){r.off(t)};u.__id__=l;u.__name__=t;this.on("dispose",u)}}},{key:"off",value:function e(t,i){var s="";if(!this.id){return}t=t||"";if(t&&t.indexOf(".")<0){s=t+"."}s=this.id+"."+(s||t);for(var r in n){if(r.indexOf(s)!==0)continue;if(i){if(i.__id__){for(var o=0;o<n[r].length;o++){if(t==="dispose"&&i.__id__===n[r][o].__id__&&i.__name__===n[r][o].__name__||t!=="dispose"&&i.__id__===n[r][o].__id__){n[r].splice(o,1);n[r].length===0&&delete n[r];break}}i.__name__=t;t!=="dispose"&&this.off("dispose",i)}}else{if(t!=="dispose"){for(var a=0;a<n[r].length;a++){
n[r][a].__name__=t;this.off("dispose",n[r][a])}}delete n[r]}}}},{key:"emit",value:function e(t,i){this.dispatch(t,i)}},{key:"dispatch",value:function e(t,i){var s="";if(!this.id){return}if(!t){return}if(t.indexOf(".")<0){s=t+"."}s=this.id+"."+(s||t);for(var r in n){if(r.indexOf&&r.indexOf(s)===-1)continue;var o=n[r].slice();for(var a=0;a<o.length;a++){o[a]&&o[a](i)}}}}]);return e}();t.exports=s});define.pack("./mixins/Interval",[],function(require,e,t){var i=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"setInterval",value:function(e){function t(t,i){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e,t){var i=this;var n=this;var s=setInterval(function(){e&&e();i.off&&i.off("dispose",r)},t);function r(){n.clearInterval(s)}this.on&&this.on("dispose",r);return s})},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e){
clearInterval(e);this.off&&this.off("dispose");return e})}]);return e}();t.exports=i});define.pack("./mixins/Log",[],function(require,e,t){var i=20;var n=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"log",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(t){var n=new Date;var s=n.getMilliseconds();var r=n.getSeconds();var o=n.getMinutes();var a=n.getHours();this._mixins_log=this._mixins_log||[];t="[videoplayer]\n[time] "+(a+":"+o+":"+r+"."+s)+"\n"+t;try{var l=this.buffered()||[];var u=[];for(var c=0;c<l.length;c++){u.push(l.start(c)+"--\x3e"+l.end(c))}t+=u.length?"\n[buffered] "+u.join(" "):""}catch(e){}this._mixins_log.push(t);if(this._mixins_log.length>i){this._mixins_log.shift()}if(this.props&&this.props.debug===true||location.href.indexOf("vpjs_debug=1")!==-1){console.log(t)}}return this._mixins_log}}]);return e}();t.exports=n});define.pack("./mixins/Timeout",[],function(require,e,t){var i=function(){function e(){
_classCallCheck(this,e)}_createClass(e,[{key:"setTimeout",value:function(e){function t(t,i){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e,t){var i=this;var n=this;var s=setTimeout(function(){e&&e();i.off&&i.off("dispose",r)},t);function r(){n.clearTimeout(s)}this.on&&this.on("dispose",r);return s})},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e){clearTimeout(e);this.off&&this.off("dispose");return e})}]);return e}();t.exports=i});define.pack("./mixins/index",[],function(require,e,t){function i(e){if(e==null){throw new TypeError("Cannot convert undefined or null to object")}e=Object(e);for(var t=1;t<arguments.length;t++){var i=arguments[t];if(i!=null){n(e,i);n(e.prototype,i.prototype)}}return e}function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{}
;var i=Object.getOwnPropertyNames(t);for(var n=0,s=i.length;n<s;n++){var r=i[n];if(r!=="constructor"&&r!=="prototype"&&r!=="name"&&r!=="length"){try{var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,o)}catch(e){console.error("defineProperty debug key: "+r);console.error(e)}}}}t.exports=i});define.pack("./plugins/UIBigPlayButton/html",[],function(require,e,t){t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.url||"//qzonestyle.gtimg.cn/qzone/hybrid/common/videoPlayer/img/big-play-button.png";var i=e.width||60;var n=e.height||60;return'\n        <span style="background: url('+t+") no-repeat center;\n            background-size: cover;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: "+i+"px;\n            height: "+n+"px;\n            margin-left: -"+i/2+"px;\n            margin-top: -"+n/2+'px;\n            cursor: pointer;">\n        </span>\n    '}})
;define.pack("./plugins/UIBigPlayButton/index",["./html","../../pub/util","../../pub/data"],function(require,e,t){var i=require("./html");var n=require("../../pub/util");var s=require("../../pub/data");var r=function(){function e(t){_classCallCheck(this,e);this.props=t;var i=this.props,n=i.player,s=i.show;this.isShow=s||n.controls();this.hasPlay=false;this.handleClicked=this.handleClicked.bind(this);this.Loadstart=this.Loadstart.bind(this);this.onSuspend=this.onSuspend.bind(this);this.onPlaying=this.onPlaying.bind(this);this.onTimeupdate=this.onTimeupdate.bind(this);this.onCanplay=this.onCanplay.bind(this);this.forceShow=this.forceShow.bind(this);this.show=this.show.bind(this);this.hide=this.hide.bind(this);this.create();n.on("UIBigPlayButton.show",this.forceShow);n.on("UIBigPlayButton.hide",this.hide);n.on("loadstart",this.Loadstart);n.on("canplay",this.onCanplay);n.on("waiting",this.hide);n.on("seeking",this.hide)}_createClass(e,[{key:"create",value:function e(){
var t=this.props.player;var i=document.createElement("div");i.id="vpjs-videoBigPlayButton-"+t.id;i.style.display=this.isShow?"block":"none";i.innerHTML=this.html();this.videoBigPlayButton=i;t.container.appendChild(i);i.addEventListener("click",this.handleClicked)}},{key:"forceShow",value:function e(){if(this.isShow)return;this.isShow=true;this.videoBigPlayButton&&(this.videoBigPlayButton.style.display="block")}},{key:"show",value:function e(){var t=this.props,i=t.player,e=t.show;if((this.isShow||!i.controls())&&!e)return;this.isShow=true;this.videoBigPlayButton&&(this.videoBigPlayButton.style.display="block")}},{key:"hide",value:function e(){if(!this.isShow)return;this.isShow=false;this.videoBigPlayButton&&(this.videoBigPlayButton.style.display="none")}},{key:"handleClicked",value:function e(t){var i=this.props.player;t.stopPropagation();t.preventDefault();if(this.props.onClick){this.props.onClick}else{i.play()}}},{key:"Loadstart",value:function e(t){var i=this.props.player
;i.on("timeupdate",this.onTimeupdate);i.on("playing",this.onPlaying);i.on("suspend",this.onSuspend);this.hide()}},{key:"onSuspend",value:function e(t){var i=this.props.player;i.off("suspend",this.onSuspend);this.show()}},{key:"onTimeupdate",value:function e(t){this.hasPlay=true;var i=this.props.player;i.off("timeupdate",this.onTimeupdate);i.off("playing",this.onPlaying);i.off("suspend",this.onSuspend);this.hide()}},{key:"onPlaying",value:function e(t){this.hasPlay=true;var i=this.props.player;i.off("timeupdate",this.onTimeupdate);i.off("playing",this.onPlaying);i.off("suspend",this.onSuspend);this.hide()}},{key:"onCanplay",value:function e(t){if(this.hasPlay===false){this.show()}}},{key:"html",value:function e(){if(n.isFunction(this.props.html)){return this.props.html(this.props)}else if(n.isString(this.props.html)){return this.props.html}else{return i(this.props)}}},{key:"dispose",value:function e(){var t=this.props.player;t.off("UIBigPlayButton.show",this.forceShow)
;t.off("UIBigPlayButton.hide",this.hide);t.off("loadstart",this.hide);t.off("waiting",this.hide);t.off("seeking",this.hide);t.off("playing",this.onPlaying);t.off("timeupdate",this.onTimeupdate);t.off("suspend",this.onSuspend);t.off("canplay",this.onCanplay);this.videoBigPlayButton.removeEventListener("click",this.handleClicked);t.container.removeChild(this.videoBigPlayButton)}}]);return e}();t.exports=r});define.pack("./plugins/UIControls/VoiceControls",["../../pub/util","../../pub/data"],function(require,e,t){var i=require("../../pub/util");var n=require("../../pub/data");var s=function(){function e(t){_classCallCheck(this,e);this.props=t;var i=this.props.player;this.voiceBtn=t.voiceBtn;this.voiceProcess=t.voiceProcess;this.voiceProcessBtn=t.voiceProcessBtn;this.voiceProcessBar=t.voiceProcessBar;this.isHoverVoice=false;this.dragging=false;this.hoverTimer=0;this.voiceCurrHeight=0;this.lastTouchY;this.updateVolumnDoms();this.event();this.bind()}_createClass(e,[{key:"event",
value:function e(){var t=this;var i=this.props.player;this.voiceBtnHover=function(e){e.stopPropagation();clearTimeout(t.hoverVoiceTimer);t.isHoverVoice=true;t.voiceProcess.style.visibility="visible"};this.voiceBtnBlur=function(e){e.stopPropagation();t.isHoverVoice=false;if(t.dragging){return}clearTimeout(t.hoverVoiceTimer);t.hoverVoiceTimer=i.setTimeout(function(){t.voiceProcess.style.visibility="hidden"},500)};this.voiceBtnClick=function(e){e.stopPropagation();e.preventDefault();var n=i.muted()||i.volume()==0;if(n){i.muted(false);i.volume(parseFloat(t.volume?t.volume:.5))}else{i.muted(true);t.volume=i.volume()}};this.handleMouseMove=function(e){t.onMouseMove(e)};this.handleMouseUp=function(e){t.onMouseUp(e)};this.voiceProcessDragStart=function(e){t.dragging=true;t.onVoiceDragStart(e);t.onVoiceDragMove(e)};this.voiceProcessClick=function(e){e.stopPropagation();e.preventDefault()};this.voiceProcessDragMove=function(e){if(!t.dragging)return;t.onVoiceDragMove(e)}
;this.voiceProcessDragEnd=function(e){if(!t.dragging)return;t.onVoiceDragEnd(e)}}},{key:"bind",value:function e(){var t=this;var n=this.props.player;n.on("volumechange",function(e){t.updateVolumnDoms()});this.voiceBtn.addEventListener("click",this.voiceBtnClick);if(i.platform==="pc"){this.voiceBtn.addEventListener("mouseover",this.voiceBtnHover);this.voiceBtn.addEventListener("mouseleave",this.voiceBtnBlur);this.voiceProcess.addEventListener("mousedown",this.voiceProcessDragStart);this.voiceProcess.addEventListener("click",this.voiceProcessClick);n.container.addEventListener("mousemove",this.voiceProcessDragMove);n.container.addEventListener("mouseup",this.voiceProcessDragEnd);n.container.addEventListener("mouseleave",this.voiceProcessDragEnd)}}},{key:"updateVolumnDoms",value:function e(){var t=this.props.player;var i=t.muted();var n=t.volume();if(i){this.voiceCurrHeight=0;this.onVolumeChange(0)}else{this.voiceCurrHeight=this.voiceProgressHeight()*n;this.onVolumeChange(n)}}},{
key:"voiceProgressHeight",value:function e(){if(i.isFunction(this.props.voiceProgressHeight)){return this.props.voiceProgressHeight()}else if(i.isNumber(this.props.voiceProgressHeight)){return this.props.voiceProgressHeight}else{return 60}}},{key:"onVolumeChange",value:function e(t){if(this.props.onVolumeChange){this.props.onVolumeChange(t)}else{if(t){this.voiceBtn.setAttribute("data-status","");this.voiceProcessBar.style.height=t*this.voiceProgressHeight()+"px"}else{this.voiceBtn.setAttribute("data-status","muted");this.voiceProcessBar.style.height="0px"}}}},{key:"onVoiceDragStart",value:function e(t){t.stopPropagation();t.preventDefault();clearTimeout(this.hoverTimer);this.props.onVoiceDragStart&&this.props.onVoiceDragStart(t);this.dragging=true;this.lastTouchY=this.voiceProcessBtn.getBoundingClientRect().top}},{key:"onVoiceDragMove",value:function e(t){t.stopPropagation();t.preventDefault();this.props.onVoiceDragMove&&this.props.onVoiceDragMove(t);var i=t.clientY
;var n=this.props.player;var s=this.lastTouchY-i;var r=this.voiceCurrHeight+s;var o=n.muted();r=Math.min(r,this.voiceProgressHeight());r=Math.max(r,0);this.lastTouchY=i;var a=(r/this.voiceProgressHeight()).toFixed(2);this.voiceCurrHeight=r;if(o&&a>0){n.muted(false)}else if(!o&&a==0){n.muted(true)}n.volume(parseFloat(a))}},{key:"onVoiceDragEnd",value:function e(t){var i=this;t.stopPropagation();t.preventDefault();var n=this.props.player;this.props.onVoiceDragEnd&&this.props.onVoiceDragEnd(t);clearTimeout(this.hoverTimer);this.dragging=false;if(!this.isHoverVoice){this.hoverTimer=n.setTimeout(function(){i.voiceProcess.style.visibility="hidden"},500)}}},{key:"dispose",value:function e(){var t=this.props.player;this.voiceBtn.removeEventListener("click",this.voiceBtnClick);if(i.platform==="pc"){this.voiceBtn.removeEventListener("mouseover",this.voiceBtnHover);this.voiceBtn.removeEventListener("mouseleave",this.voiceBtnBlur)
;this.voiceProcess.removeEventListener("mousedown",this.voiceProcessDragStart);this.voiceProcess.removeEventListener("click",this.voiceProcessClick);t.container.removeEventListener("mousemove",this.voiceProcessDragMove);t.container.removeEventListener("mouseup",this.voiceProcessDragEnd);t.container.removeEventListener("mouseleave",this.voiceProcessDragEnd)}}}]);return e}();t.exports=s});define.pack("./plugins/UIControls/html",[],function(require,e,t){e.main=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.duration||"00:00";var i=e.buttons||""
;return'\n        <div class="vpjs-controls">\n            \x3c!-- 直播进度 S--\x3e\n            <div class="vpjs-progress-pane">\n                <div class="vpjs-controls-progress">\n                    <div class="vpjs-buffer-bar" style="width: 0px;">\n                    </div>\n                    <div class="vpjs-progress-bar" style="width: 0px;">\n                        <svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="26" height="26" viewBox="-6.5 -6.5 26 26" class="vpjs-progress-icon-pointer">\n                            <circle fill="#fff" cx="6" cy="6" r="6"/>\n                            <circle class="vpjs-icon-pointer-hover" fill="#ffc028" cx="4" cy="4" r="4" transform="translate(2.6, 2.6) scale(0.875, 0.875)"/>\n                        </svg>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="vpjs-controls-left">\n                \x3c!-- 播放按钮 --\x3e\n                <div class="vpjs-controls-btn">\n                    <svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="32" viewBox="-7 -8 28 32" class="vpjs-ui-icon vpjs-btn-play">\n                        <path class="vpjs-icon-play" d="M0.975,1.125 L0.975,16.818 C1.207,17.046 1.582,17.046 1.814,16.818 L13.804,9.384 C14.036,9.156 14.036,8.786 13.804,8.558 L1.814,1.125 C1.582,0.897 1.207,0.897 0.975,1.125 Z"/>\n                        <path class="vpjs-icon-pause" d="M13.000,16.000 C13.000,16.000 9.969,16.000 9.969,16.000 C9.416,16.000 8.969,15.552 8.969,15.000 C8.969,15.000 8.969,1.000 8.969,1.000 C8.969,0.448 9.416,0.000 9.969,0.000 C9.969,0.000 13.000,0.000 13.000,0.000 C13.552,0.000 14.000,0.448 14.000,1.000 C14.000,1.000 14.000,15.000 14.000,15.000 C14.000,15.552 13.552,16.000 13.000,16.000 ZM4.000,16.000 C4.000,16.000 1.000,16.000 1.000,16.000 C0.448,16.000 0.000,15.552 0.000,15.000 C0.000,15.000 0.000,0.997 0.000,0.997 C0.000,0.444 0.448,-0.003 1.000,-0.003 C1.000,-0.003 4.000,-0.003 4.000,-0.003 C4.552,-0.003 5.000,0.444 5.000,0.997 C5.000,0.997 5.000,15.000 5.000,15.000 C5.000,15.552 4.552,16.000 4.000,16.000 Z"/>\n                    </svg>\n                </div>\n                \n                <div class="vpjs-controls-btn">\n                    <span class="vpjs-time">\n                        <b class="j-cur-time-text">00:00</b>/<span class="j-total-time-text">'+t+'</span>\n                    </span>\n                </div>\n            </div>\n\n            <div class="vpjs-controls-right">\n                '+i+"\n            </div>\n        </div>\n    "
};e.fullScreenBtn=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}
;return'\n        <svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="25" viewBox="-4.5 -4 28 25" class="vpjs-ui-icon">\n            <path class="vpjs-icon-fullscreen" d="M18.020,7.027 L18.020,7.031 L18.019,7.031 C17.985,7.587 17.533,8.031 16.969,8.031 C16.461,8.031 16.061,7.665 15.958,7.187 L15.958,4.156 C15.958,3.916 15.910,3.688 15.836,3.473 L11.364,8.038 C10.970,8.432 10.330,8.432 9.935,8.038 C9.540,7.644 9.540,7.005 9.935,6.611 L14.373,2.150 C14.191,2.099 14.002,2.062 13.804,2.062 L10.721,2.062 C10.289,1.928 9.969,1.539 9.969,1.063 C9.969,0.476 10.444,-0.000 11.031,-0.000 C11.053,-0.000 11.071,0.011 11.092,0.012 L11.092,-0.000 L15.865,-0.000 C17.037,-0.000 18.020,0.951 18.020,2.125 L18.020,6.911 C18.021,6.931 18.031,6.948 18.031,6.969 C18.031,6.989 18.021,7.006 18.020,7.027 ZM4.596,14.913 C4.778,14.964 4.966,15.000 5.165,15.000 L8.341,15.000 C8.774,15.134 9.094,15.461 9.094,15.937 C9.094,16.524 8.618,17.000 8.031,17.000 C8.010,17.000 7.992,16.989 7.971,16.988 L7.971,17.000 L3.104,17.000 C1.931,17.000 0.980,16.049 0.980,14.875 L0.980,10.058 C0.979,10.038 0.969,10.021 0.969,10.000 C0.969,9.979 0.979,9.962 0.980,9.942 L0.980,9.938 L0.981,9.938 C1.015,9.381 1.467,8.937 2.031,8.937 C2.539,8.937 2.907,9.304 3.010,9.781 L3.010,12.813 C3.010,13.053 3.059,13.281 3.133,13.496 L7.573,8.993 C7.968,8.599 8.608,8.599 9.003,8.993 C9.397,9.387 9.397,10.026 9.003,10.420 L4.596,14.913 Z"/>\n            <path class="vpjs-icon-shrink" d="M16.690,1.701 C16.690,1.701 12.596,5.850 12.596,5.850 C12.778,5.901 12.966,5.938 13.165,5.938 C13.165,5.938 15.247,5.938 15.247,5.938 C15.680,6.072 16.000,6.461 16.000,6.937 C16.000,7.524 15.524,8.000 14.937,8.000 C14.916,8.000 14.898,7.989 14.877,7.988 C14.877,7.988 14.877,8.000 14.877,8.000 C14.877,8.000 11.104,8.000 11.104,8.000 C9.931,8.000 8.980,7.049 8.980,5.875 C8.980,5.875 8.980,2.058 8.980,2.058 C8.979,2.038 8.969,2.021 8.969,2.000 C8.969,1.979 8.979,1.962 8.980,1.942 C8.980,1.942 8.980,1.937 8.980,1.937 C8.980,1.937 8.981,1.937 8.981,1.937 C9.015,1.382 9.467,0.938 10.031,0.938 C10.540,0.938 10.939,1.304 11.042,1.781 C11.042,1.781 11.042,3.813 11.042,3.813 C11.042,4.053 11.090,4.281 11.164,4.496 C11.164,4.496 15.261,0.274 15.261,0.274 C15.655,-0.120 16.295,-0.120 16.690,0.274 C17.085,0.668 17.085,1.307 16.690,1.701 ZM7.988,15.031 C7.988,15.031 7.987,15.031 7.987,15.031 C7.953,15.587 7.502,16.031 6.938,16.031 C6.429,16.031 6.061,15.665 5.958,15.187 C5.958,15.187 5.958,13.156 5.958,13.156 C5.958,12.916 5.910,12.688 5.836,12.473 C5.836,12.473 1.708,16.694 1.708,16.694 C1.313,17.088 0.673,17.088 0.279,16.694 C-0.116,16.300 -0.116,15.662 0.279,15.268 C0.279,15.268 4.373,11.056 4.373,11.056 C4.191,11.005 4.002,10.969 3.804,10.969 C3.804,10.969 1.722,10.969 1.722,10.969 C1.289,10.834 0.969,10.508 0.969,10.031 C0.969,9.444 1.444,8.969 2.031,8.969 C2.053,8.969 2.071,8.980 2.092,8.981 C2.092,8.981 2.092,8.969 2.092,8.969 C2.092,8.969 5.865,8.969 5.865,8.969 C7.038,8.969 7.988,9.920 7.988,11.094 C7.988,11.094 7.988,14.911 7.988,14.911 C7.989,14.931 8.000,14.948 8.000,14.969 C8.000,14.989 7.989,15.006 7.988,15.027 C7.988,15.027 7.988,15.031 7.988,15.031 Z" />\n        </svg>\n    '
};e.popupBtn=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}
;return'\n        <svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="28" viewBox="-5.5 -5.5 28 28" class="vpjs-ui-icon">\n            <path d="M15.000,13.000 C15.000,13.000 5.937,13.000 5.937,13.000 C4.833,13.000 3.937,12.105 3.937,11.000 C3.937,11.000 3.937,2.000 3.937,2.000 C3.937,0.895 4.833,0.000 5.937,0.000 C5.937,0.000 15.000,0.000 15.000,0.000 C16.105,0.000 17.000,0.895 17.000,2.000 C17.000,2.000 17.000,11.000 17.000,11.000 C17.000,12.105 16.105,13.000 15.000,13.000 ZM15.000,2.000 C15.000,2.000 5.937,2.000 5.937,2.000 C5.937,2.000 5.937,11.000 5.937,11.000 C5.937,11.000 15.000,11.000 15.000,11.000 C15.000,11.000 15.000,2.000 15.000,2.000 ZM2.000,15.000 C2.000,15.000 10.000,15.000 10.000,15.000 C10.000,15.000 10.000,14.000 10.000,14.000 C10.000,14.000 12.000,14.000 12.000,14.000 C12.000,14.000 12.000,15.000 12.000,15.000 C12.000,16.105 11.105,17.000 10.000,17.000 C10.000,17.000 2.000,17.000 2.000,17.000 C0.895,17.000 -0.000,16.105 -0.000,15.000 C-0.000,15.000 -0.000,7.000 -0.000,7.000 C-0.000,5.895 0.895,5.000 2.000,5.000 C2.000,5.000 3.000,5.000 3.000,5.000 C3.000,5.000 3.000,7.000 3.000,7.000 C3.000,7.000 2.000,7.000 2.000,7.000 C2.000,7.000 2.000,15.000 2.000,15.000 Z"/>\n        </svg>\n    '
};e.voiceBtn=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}
;return'\n        <svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="24.18" viewBox="-3 -2.59 28 24.18" class="vpjs-ui-icon">\n            <path class="vpjs-icon-voice" d="M18.219,17.421 C18.057,17.551 17.864,17.616 17.671,17.616 L17.669,17.612 C17.417,17.612 17.166,17.503 16.994,17.292 C16.691,16.919 16.747,16.371 17.119,16.068 C18.958,14.573 20.012,12.355 20.012,9.988 C20.012,7.621 18.958,5.405 17.121,3.908 C16.749,3.605 16.691,3.057 16.996,2.684 C17.300,2.312 17.846,2.254 18.219,2.559 C20.464,4.387 21.752,7.095 21.752,9.990 C21.752,12.885 20.464,15.591 18.219,17.421 ZM16.365,13.367 C16.203,13.497 16.010,13.562 15.817,13.562 L15.817,13.558 C15.565,13.558 15.315,13.449 15.142,13.238 C14.840,12.865 14.895,12.317 15.268,12.014 C15.880,11.515 16.231,10.777 16.231,9.988 C16.231,9.200 15.880,8.460 15.268,7.962 C14.895,7.659 14.838,7.111 15.142,6.738 C15.447,6.366 15.993,6.308 16.365,6.613 C17.386,7.443 17.971,8.674 17.971,9.990 C17.971,11.306 17.385,12.536 16.365,13.367 ZM11.503,18.990 C11.073,18.990 10.642,18.809 10.223,18.452 L5.938,15.015 L3.592,15.015 C2.153,15.015 0.983,13.843 0.983,12.404 L0.983,7.566 C0.983,6.126 2.153,4.955 3.592,4.955 L5.938,4.955 L10.223,1.392 C10.644,1.035 11.073,0.854 11.503,0.854 L11.503,0.852 C12.239,0.852 12.982,1.415 12.982,2.668 L12.982,17.176 C12.982,17.650 12.876,18.048 12.669,18.360 C12.401,18.760 11.976,18.990 11.503,18.990 ZM5.389,6.978 L3.873,6.978 C3.393,6.978 3.003,7.368 3.003,7.849 L3.003,12.030 C3.003,12.511 3.393,12.994 3.873,12.994 L5.389,12.994 L5.389,6.978 ZM10.992,3.342 L7.128,6.510 L7.128,11.684 L7.097,6.560 L5.423,7.033 L5.389,13.005 L7.139,13.472 L7.139,13.472 L10.992,16.631 L10.992,3.342 Z"/>\n            <path class="vpjs-icon-silence" d="M18.845,10.500 L20.651,12.306 C21.035,12.690 21.035,13.313 20.651,13.698 C20.266,14.082 19.643,14.082 19.259,13.698 L17.453,11.892 L15.663,13.682 C15.279,14.066 14.656,14.066 14.271,13.682 C13.887,13.298 13.887,12.674 14.271,12.290 L16.061,10.500 L14.287,8.726 C13.902,8.341 13.902,7.718 14.287,7.334 C14.671,6.949 15.294,6.949 15.679,7.334 L17.453,9.108 L19.243,7.318 C19.627,6.934 20.251,6.934 20.635,7.318 C21.020,7.702 21.020,8.326 20.635,8.710 L18.845,10.500 ZM11.503,18.990 C11.073,18.990 10.642,18.809 10.223,18.452 L5.938,15.015 L3.592,15.015 C2.154,15.015 0.983,13.843 0.983,12.404 L0.983,7.566 C0.983,6.126 2.154,4.955 3.592,4.955 L5.938,4.955 L10.223,1.392 C10.644,1.035 11.073,0.854 11.503,0.854 L11.503,0.852 C12.239,0.852 12.982,1.415 12.982,2.668 L12.982,17.176 C12.982,17.650 12.876,18.048 12.669,18.360 C12.401,18.760 11.976,18.990 11.503,18.990 ZM5.389,6.978 L3.873,6.978 C3.393,6.978 3.003,7.368 3.003,7.849 L3.003,12.030 C3.003,12.511 3.393,12.994 3.873,12.994 L5.389,12.994 L5.389,6.978 ZM10.992,3.342 L7.128,6.510 L7.128,11.684 L7.097,6.560 L5.423,7.033 L5.389,13.005 L7.139,13.472 L7.139,13.472 L10.992,16.631 L10.992,3.342 Z"/>\n        </svg>\n\n        <div class="vpjs-voice-progress-container" style="visibility: hidden;">\n            <div class="vpjs-voice-progress">\n                <div class="vpjs-voice-progress-bar">\n                    <svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="21.66" height="21.66" viewBox="-6.5 -6.5 26 26" class="vpjs-voice-icon-pointer">\n                        <circle fill="#fff" cx="6" cy="6" r="6"/>\n                        <circle class="vpjs-icon-pointer-hover" fill="#ffc028" cx="4" cy="4" r="4" transform="translate(2.6, 2.6) scale(0.875, 0.875)"/>\n                    </svg>\n                </div>\n            </div>\n        </div>\n    '
}});define.pack("./plugins/UIControls/index",["./html","./style","../../pub/util","../../pub/data","./VoiceControls"],function(require,e,t){var i=require("./html");var n=require("./style");var s=require("../../pub/util");var r=require("../../pub/data");var o=require("./VoiceControls");var a={progressElement:{classAttr:"progressClass",classVal:".vpjs-progress-pane"},progressBarElement:{classAttr:"progressBarClass",classVal:".vpjs-progress-bar"},voiceProcessElement:{classAttr:"voiceProcessClass",classVal:".vpjs-voice-progress-container"},voiceProcessBtnElement:{classAttr:"voiceProcessBtnClass",classVal:".vpjs-voice-icon-pointer"},voiceProcessBarElement:{classAttr:"voiceProcessBarClass",classVal:".vpjs-voice-progress-bar"},controlBtnElement:{classAttr:"controlBtnClass",classVal:".vpjs-btn-play"},currentTimeElement:{classAttr:"currentTimeClass",classVal:".j-cur-time-text"},totalTimeElement:{classAttr:"totalTimeClass",classVal:".j-total-time-text"}};var l=function(){function e(t){var i=this
;_classCallCheck(this,e);this.props=t;var n=this.props.player;this.props.fade=this.props.fade!==false;this.isShow=false;this.dragging=false;this.dragtime=-1;this.isReady=false;this.isHover=!!n.props.isHover;this.hoverTimer=0;this.clickEvent=s.platform==="pc"?"click":"touchend";this.createContainer();this.event();var r=function e(t){i.createControls();i.bind();i.props.ready&&i.props.ready({container:i.videoControlBar,buttons:i.buttons});n.on("UIControls.show",i.show);n.on("UIControls.hide",i.hide);n.off("durationchange",e);n.off("playing",e);i.isReady=true};n.on("durationchange",r);n.on("playing",r);n.on("playing",this.show)}_createClass(e,[{key:"event",value:function e(){var t=this;var i=this.props.player;this.show=this.show.bind(this);this.hide=this.hide.bind(this);this.videoHover=function(e){t.isHover=true;clearTimeout(t.hoverTimer);t.fadeIn()};this.videoBlur=function(e){t.isHover=false;!i.paused()&&t.fadeOut()};this.videoClick=function(e){t.toggleFade();clearTimeout(t.hoverTimer)
;t.hoverTimer=i.setTimeout(function(){!t.isHover&&!i.paused()&&t.fadeOut()},3e3)};this.controlBtnClickEvent=function(e){e.stopPropagation();e.preventDefault();if(i.paused()){i.play()}else{i.pause()}t.props.onControlBtnClick&&t.props.onControlBtnClick({container:t.videoControlBar})};this.progressClick=function(e){e.preventDefault();e.stopPropagation()};this.progressDragStart=function(e){t.dragging=true;t.onDragStart(e);t.onDragMove(e)};this.progressDragMove=function(e){if(!t.dragging)return;t.onDragMove(e)};this.progressDragEnd=function(e){if(!t.dragging)return;t.onDragEnd(e)}}},{key:"bind",value:function e(){var t=this;var i=this.props.player;var n=function e(n){t.videoControlBar.setAttribute("data-status","play");clearTimeout(t.hoverTimer);t.hoverTimer=i.setTimeout(function(){!t.isHover&&!i.paused()&&t.fadeOut()},3e3)};i.on("play",n);i.on("playing",n);i.on("ended",function(e){clearTimeout(t.hoverTimer);t.fadeIn()});i.on("pause",function(e){
t.videoControlBar.setAttribute("data-status","pause")});i.on("timeupdate",function(e){if(t.dragging)return;var n=i.currentTime();if(n>0){t.updateProgress(n)}});this.el("controlBtnElement").addEventListener(this.clickEvent,this.controlBtnClickEvent);this.el("progressElement").addEventListener(this.clickEvent,this.progressClick);if(s.platform==="pc"){this.el("progressElement").addEventListener("mousedown",this.progressDragStart);window.addEventListener("mousemove",this.progressDragMove);window.addEventListener("mouseup",this.progressDragEnd);this.props.fade&&i.on("mouseenter",this.videoHover);this.props.fade&&i.on("mouseleave",this.videoBlur)}else{this.el("progressElement").addEventListener("touchstart",this.progressDragStart);this.el("progressElement").addEventListener("touchmove",this.progressDragMove);this.el("progressElement").addEventListener("touchend",this.progressDragEnd);this.props.fade&&i.on("click",this.videoClick)}}},{key:"createContainer",value:function e(){
var t=this.props.player;if(this.videoControlBar)return;var i=this.videoControlBar=document.createElement("div");i.id="vpjs-videoControlBar-"+t.id;i.className=s.CONST.CLASS.CONTROLS+" vpjs-fade vpjs-fadein";i.style.cssText="position: absolute; left: 0; right: 0; top: 0; bottom: 0; display: "+(this.isShow?"block":"none");i.setAttribute("data-status","pause");t.container.appendChild(i)}},{key:"createControls",value:function e(){var t=this.props.player;if(!this.videoControlBar)return;this.videoControlBar.innerHTML=this.html({duration:t.duration()});this.createButtons()}},{key:"createButtons",value:function e(){var t=this;var n=this.props.player;var s={fullScreen:{html:i.fullScreenBtn(),ready:function e(t){n.on("fullscreenchange",function(e){var i=t.element;if(n.isFullScreen()){i.setAttribute("data-status","fullscreen")}else{i.setAttribute("data-status","")}})},onClick:function e(t){t.stopPropagation();t.preventDefault();if(n.isFullScreen()){n.exitFullscreen()}else{n.requestFullscreen()}}},
popup:{html:i.popupBtn()},voice:{html:i.voiceBtn(),ready:function e(i){var s=i.element;if(!s)return;t.voiceControls=new o({player:n,voiceBtn:s,voiceProcess:t.el("voiceProcessElement"),voiceProcessBtn:t.el("voiceProcessBtnElement"),voiceProcessBar:t.el("voiceProcessBarElement"),voiceProgressHeight:t.props.voiceProgressHeight,onVolumeChange:t.props.onVolumeChange,onVoiceDragStart:t.props.onVoiceDragStart,onVoiceDragMove:t.props.onVoiceDragMove,onVoiceDragEnd:t.props.onVoiceDragEnd})},onClick:function e(){}}};this.buttons=this.buttons||[];this.props.buttons=this.props.buttons||[{name:"fullScreen"},{name:"voice"}];var r=this.videoControlBar.querySelector(".vpjs-controls-right");var a=function e(i){var o=t.props.buttons[i];if(s[o.name]){o=_extends({},s[o.name],o)}if(!o.html)return"continue";if(o.name==="fullScreen"&&!n.supportsFullScreen())return"continue";var a=document.createElement("div");a.innerHTML=o.html;a.className="vpjs-controls-btn";a.addEventListener(t.clickEvent,function(e){
o.onClick.call(n,e)});r.appendChild(a);o.ready&&o.ready.call(t,{element:a});t.buttons.push(a)};for(var l=0;l<this.props.buttons.length;l++){var u=a(l);if(u==="continue")continue}}},{key:"show",value:function e(){var t=this.props.player;if(this.isShow||!t.controls())return;this.isShow=true;this.videoControlBar&&(this.videoControlBar.style.display="block")}},{key:"hide",value:function e(){if(!this.isShow)return;this.isShow=false;this.videoControlBar&&(this.videoControlBar.style.display="none")}},{key:"toggleFade",value:function e(){var t=this.videoControlBar.className;if(t.indexOf("vpjs-fadeout")!==-1){this.fadeIn()}else{this.fadeOut()}}},{key:"fadeOut",value:function e(){var t=this.videoControlBar.className;if(t.indexOf("vpjs-fadeout")!==-1)return;t=t.replace(" vpjs-fadein","");t=t+" vpjs-fadeout";this.videoControlBar.className=t}},{key:"fadeIn",value:function e(){var t=this.videoControlBar.className;if(t.indexOf("vpjs-fadein")!==-1)return;t=t.replace(" vpjs-fadeout","")
;t=t+" vpjs-fadein";this.videoControlBar.className=t}},{key:"percent",value:function e(t){t=t||0;var i=Math.floor(this.props.player.duration()||0);t=Math.max(0,t);t=Math.min(t,i);var e=i!==0?t/i:0;e=Math.max(0,Math.min(1,e));return e}},{key:"formatTime",value:function e(t){return new Date(t*1e3-8*3600*1e3).toTimeString().substr(0,8).replace(/^00:/,"")}},{key:"updateProgress",value:function e(t){if(!this.isShow)return;var i=this.percent(t);this.onProgressUpdate({container:this.videoControlBar,currentTime:t,percent:i,duration:this.props.player.duration(),progressLength:this.progressLength()})}},{key:"el",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var i=a[t];var n="_"+t;if(!this[n]){this.props[i.classAttr]=this.props[i.classAttr]||i.classVal;this[n]=this.videoControlBar.querySelector(this.props[i.classAttr])}return this[n]}},{key:"onDragStart",value:function e(t){t.stopPropagation();t.preventDefault()
;this.props.onDragStart&&this.props.onDragStart(t);this._lastPosX=this.progressPosition();this.props.player.pause()}},{key:"onDragMove",value:function e(t){t.stopPropagation();t.preventDefault();var i=Math.floor(this.props.player.duration());this.dragtime=this.dragtime===-1?this.props.player.currentTime():this.dragtime;this.props.onDragMove&&this.props.onDragMove(t);var n=this.getClientX(t);var s=n-this._lastPosX;var r=this.percent(this.dragtime)*this.progressLength();this.dragtime=(r+s)/this.progressLength()*i;this.dragtime=Math.max(0,this.dragtime);this.dragtime=Math.min(this.dragtime,i);this.updateProgress(this.dragtime);this._lastPosX=n}},{key:"onDragEnd",value:function e(t){t.stopPropagation();t.preventDefault();this.props.onDragEnd&&this.props.onDragEnd(t);this.props.player.currentTime(this.dragtime);this.props.player.play();this.dragging=false;this.dragtime=-1;this._lastPosX=null}},{key:"getClientX",value:function e(t){if(s.platform==="pc"){return t.clientX||0}else{
return t.touches&&t.touches[0]&&t.touches[0].clientX||0}}},{key:"onProgressUpdate",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(s.isFunction(this.props.onProgressUpdate)){this.props.onProgressUpdate(t)}else{this.el("currentTimeElement").innerHTML=this.formatTime(t.currentTime);this.el("totalTimeElement").innerHTML=this.formatTime(t.duration);this.el("progressBarElement").style.width=Number(t.percent*t.progressLength).toFixed(2)+"px"}}},{key:"progressPosition",value:function e(){if(s.isFunction(this.props.progressPosition)){return this.props.progressPosition()}else{return this.el("progressElement").getBoundingClientRect().left+this.percent(this.props.player.currentTime())*this.progressLength()}}},{key:"progressLength",value:function e(){if(s.isFunction(this.props.progressLength)){return this.props.progressLength({container:this.videoControlBar})}else if(s.isNumber(this.props.progressLength)){return this.props.progressLength}else{
return this.el("progressElement").clientWidth||0}}},{key:"style",value:function e(){var t="_videoPlayer_UIControls_style";if(s.isFunction(this.props.style)){return this.props.style({id:t,style:n()})}else if(s.isObject(this.props.style)){return this.props.style}else{return{id:t,style:n()}}}},{key:"html",value:function e(t){if(s.isFunction(this.props.html)){return this.props.html(t)}else if(s.isString(this.props.html)){return this.props.html}else{var n=this.style()||{};s.loadStyle(n.id,n.style);t.duration=this.formatTime(t.duration);return i.main(t)}}},{key:"dispose",value:function e(){if(!this.isReady)return;this.el("controlBtnElement").removeEventListener(this.clickEvent,this.controlBtnClickEvent);this.el("progressElement").removeEventListener(this.clickEvent,this.progressClick);if(s.platform==="pc"){this.el("progressElement").removeEventListener("mousedown",this.progressDragStart);window.removeEventListener("mousemove",this.progressDragMove)
;window.removeEventListener("mouseup",this.progressDragEnd)}else{this.el("progressElement").removeEventListener("touchstart",this.progressDragStart);this.el("progressElement").removeEventListener("touchmove",this.progressDragMove);this.el("progressElement").removeEventListener("touchend",this.progressDragEnd)}this.voiceControls&&this.voiceControls.dispose()}}]);return e}();t.exports=l});define.pack("./plugins/UIControls/style",["../../pub/util"],function(require,e,t){var i=require("../../pub/util");t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t="."+i.CONST.CLASS.CONTAINER+" ."+i.CONST.CLASS.CONTROLS
;return"\n        "+t+" .vpjs-controls {\n            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAACWCAYAAAAfduJyAAAANUlEQVR42mNgIAowMoFIVIJYMWwSZKpjJNlQRvJkqaiNWDdTWweZJjNSEAaMpAQOxW4hgwUA1XsBVs9mpkIAAAAASUVORK5CYII=);\n            height: 42px;\n            background-repeat: repeat-x;\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            right: 0;\n        }\n        \n        "+t+" .vpjs-controls-left,\n        "+t+" .vpjs-controls-right {\n            position: relative;\n            height: 100%;\n            display: -webkit-flex;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-align-items: center;\n            -ms-flex-align: center;\n            align-items: center;\n            -webkit-justify-content: center;\n            -ms-flex-pack: center;\n            justify-content: center;\n            -webkit-flex-direction: row;\n            -ms-flex-direction: row;\n            flex-direction: row;\n        }\n\n        "+t+" .vpjs-controls-left {\n            float: left;\n        }\n\n        "+t+" .vpjs-controls-right {\n            float: right;\n        }\n\n        "+t+" .vpjs-controls-left .vpjs-controls-btn {\n            margin-left: 4px;\n        }\n\n        "+t+" .vpjs-controls-right .vpjs-controls-btn {\n            margin-right: 4px;\n        }\n\n        "+t+" .vpjs-controls-btn {\n            position: relative;\n            text-align: center;\n            -webkit-flex: none;\n            -ms-flex: none;\n            flex: none;\n            display: -webkit-flex;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-align-items: center;\n            -ms-flex-align: center;\n            align-items: center;\n            -webkit-justify-content: center;\n            -ms-flex-pack: center;\n            justify-content: center;\n            -webkit-flex-direction: column;\n            -ms-flex-direction: column;\n            flex-direction: column;\n        }\n        \n        "+t+" .vpjs-time {\n            color: #999;\n            vertical-align: middle\n        }\n        \n        "+t+" .vpjs-time > b {\n            color: #fff\n        }\n\n        "+t+" .vpjs-icon-pause,\n        "+t+" .vpjs-icon-play,\n        "+t+" .vpjs-icon-silence,\n        "+t+" .vpjs-icon-shrink,\n        "+t+" .vpjs-icon-pointer-hover,\n        "+t+" .vpjs-controls-btn[data-status=muted] .vpjs-icon-voice,\n        "+t+" .vpjs-controls-btn[data-status=fullscreen] .vpjs-icon-fullscreen {\n            display: none;\n        }\n        \n        "+t+"[data-status=pause] .vpjs-icon-play,\n        "+t+"[data-status=play] .vpjs-icon-pause,\n        "+t+" .vpjs-controls-btn[data-status=muted] .vpjs-icon-silence,\n        "+t+" .vpjs-controls-btn[data-status=fullscreen] .vpjs-icon-shrink {\n            display: block;\n        }\n\n        "+t+" .vpjs-voice-icon-pointer {\n            cursor: pointer;\n            position: absolute;\n            left: -9.5px;\n            top: -10.83px;\n        }\n\n        "+t+" .vpjs-progress-icon-pointer {\n            cursor: pointer;\n            position: absolute;\n            right: -13px;\n            top: -12px;\n        }\n\n        "+t+" .vpjs-voice-progress-container {\n            cursor: pointer;\n            position: absolute;\n            width: 28px;\n            height: 76px;\n            bottom: 25px;\n            padding: 14px 0;\n            z-index: 2;\n        }\n\n        "+t+" .vpjs-voice-progress {\n            position: absolute;\n            background-color: rgba(0, 0, 0, .4);\n            left: 6px;\n            width: 14px;\n            height: 76px;\n            border-radius: 7px;\n            z-index: 2;\n        }\n\n        "+t+' .vpjs-voice-progress:before {\n            content: "";\n            height: 60px;\n            width: 2px;\n            background-color: #777;\n            position: absolute;\n            left: 6px;\n            top: 8px;\n        }\n\n        '+t+" .vpjs-voice-progress-bar {\n            background-color: #fff;\n            position: absolute;\n            left: 6px;\n            width: 2px;\n            bottom: 8px;\n        }\n\n        "+t+" .vpjs-progress-pane {\n            cursor: pointer;\n            position: absolute;\n            left: 0;\n            right: 0;\n            top: -20px;\n            margin: 0 10px;\n            height: 20px;\n            z-index: 1;\n        }\n        \n        "+t+" .vpjs-controls-progress {\n            height: 2px;\n            border-radius: 1px;\n            background-color: rgba(255,255,255,.3);\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            right: 0;\n        }\n\n        "+t+" .vpjs-buffer-bar {\n            background-color: rgba(255,255,255,.5);\n            height: 2px;\n            border-radius: 1px;\n            position: absolute;\n        }\n        \n        "+t+" .vpjs-progress-bar {\n            background-color: #fff;\n            height: 2px;\n            border-radius: 1px;\n            position: relative;\n        }\n\n        "+t+" .vpjs-ui-icon {\n            cursor: pointer;\n            display: block;\n            margin: auto;\n            fill: #fff;\n        }\n\n        "+(i.platform==="pc"?"\n            "+t+" .vpjs-ui-icon:hover {\n                fill: #ffc028;\n            }\n            \n            "+t+" .vpjs-progress-icon-pointer:hover .vpjs-icon-pointer-hover,\n            "+t+" .vpjs-voice-icon-pointer:hover .vpjs-icon-pointer-hover {\n                display: block;\n            }\n        ":"")+"\n            \n    "
}});define.pack("./plugins/UIError/html",[],function(require,e,t){t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.background||"//qzonestyle.gtimg.cn/qzone/hybrid/common/videoPlayer/img/error.jpg";var i=e.message||"网络异常，请重试";var n="-30deg, #89bac9, #d8cecd, #89bac9"
;return'\n        <div style="position: absolute;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n            background: -webkit-linear-gradient('+n+");\n            background: -o-linear-gradient("+n+");\n            background: -moz-linear-gradient("+n+");\n            background: linear-gradient("+n+');\n            z-index: 98;">\n        </div>\n        <div style="position: absolute;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n            background: url('+t+') no-repeat center;\n            background-size: cover;\n            z-index: 99;">\n            <p style="position: absolute;\n                left: 50%;\n                top: 50%;\n                text-align: center;\n                width: 200px;\n                margin-left: -100px;\n                margin-top: -9px;">\n                <span class="vpjs-error-message" style="vertical-align: middle;">\n                    '+i+"\n                </span>\n            </p>\n        </div>\n    "
}});define.pack("./plugins/UIError/index",["./html","../../pub/util","../../pub/data"],function(require,e,t){var i=require("./html");var n=require("../../pub/util");var s=require("../../pub/data");var r=function(){function e(t){_classCallCheck(this,e);this.props=t;var i=this.props.player;this.hide=this.hide.bind(this);this.show=this.show.bind(this);this.enable=this.enable.bind(this);this.disable=this.disable.bind(this);this._enable=true;this.create();i.on("error",this.show);i.on("playing",this.hide);i.on("UIError.show",this.show);i.on("UIError.hide",this.hide);i.on("UIError.enable",this.enable);i.on("UIError.disable",this.disable)}_createClass(e,[{key:"create",value:function e(){var t=this.props.player;var i=document.createElement("div");i.id="vpjs-videoError-"+t.id;i.style.display="none";i.innerHTML=this.html();this.videoError=i;t.container.appendChild(i)}},{key:"enable",value:function e(){this._enable=true}},{key:"disable",value:function e(){this._enable=false;this.hide()}},{
key:"show",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this._enable===false)return;var i=this.props.player;var n=i.error()||{};var s=t.code||n.code||-1e3;var r=t.message||this.message();this.videoError.querySelector(".vpjs-error-message").innerHTML=r||"视频播放失败("+s+")";this.videoError.style.display="block"}},{key:"hide",value:function e(){this.videoError.style.display="none"}},{key:"html",value:function e(){if(n.isFunction(this.props.html)){return this.props.html()}else if(n.isString(this.props.html)){return this.props.html}else{return i({background:this.props.background,message:this.message()})}}},{key:"message",value:function e(){if(typeof this.props.message==="string"){return this.props.message}else if(typeof this.props.message==="function"){return this.props.message(this.props.player)}return""}},{key:"dispose",value:function e(){var t=this.props.player;t.off("error",this.show);t.off("playing",this.hide);t.off("UIError.show",this.show)
;t.off("UIError.hide",this.hide);t.off("UIError.enable",this.enable);t.off("UIError.disable",this.disable);t.container.appendChild(this.videoError)}}]);return e}();t.exports=r});define.pack("./plugins/UILoading/html",[],function(require,e,t){t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.url;var i=e.inner;var n=e.width||40;var s=e.height||24;if(!t){t="//qzonestyle.gtimg.cn/aoi/img/video-loading-bg.png";i="//qzonestyle.gtimg.cn/aoi/img/video-loading.gif"}
return'\n        <div style="background: url('+t+") no-repeat center;\n                background-size: cover;\n                width: "+n+"px;\n                height: "+s+"px;\n                position: absolute;\n                left: 50%;\n                top: 50%;\n                margin-left: -"+n/2+"px;\n                margin-top: -"+s/2+'px;">\n            '+(i?'\n                <i style="background: url('+i+");  display: block; width: "+n+"px; height: "+s+'px;"></i>\n            ':"")+"\n        </div>\n    "}});define.pack("./plugins/UILoading/index",["./html","../../pub/util","../../pub/data"],function(require,e,t){var i=require("./html");var n=require("../../pub/util");var s=require("../../pub/data");var r=function(){function e(t){_classCallCheck(this,e);this.props=t;this.isShow=false;var i=this.props.player;this.show=this.show.bind(this);this.hide=this.hide.bind(this);this.create();i.on("loadstart",this.show);i.on("waiting",this.show);i.on("seeking",this.show)
;i.on("canplay",this.hide);i.on("suspend",this.hide);i.on("stalled",this.hide);i.on("timeupdate",this.hide)}_createClass(e,[{key:"create",value:function e(){var t=this.props.player;var i=document.createElement("div");i.id="vpjs-videoLoading-"+t.id;i.style.display="none";i.innerHTML=this.html();this.videoLoading=i;t.container.appendChild(i)}},{key:"show",value:function e(){if(this.isShow)return;var t=this.props.player;this.isShow=true;this.videoLoading&&(this.videoLoading.style.display="block");t.emit("UILoading.show")}},{key:"hide",value:function e(){if(!this.isShow)return;var t=this.props.player;this.isShow=false;this.videoLoading&&(this.videoLoading.style.display="none");t.emit("UILoading.hide")}},{key:"html",value:function e(){if(n.isFunction(this.props.html)){return this.props.html(this.props)}else if(n.isString(this.props.html)){return this.props.html}else{return i(this.props)}}},{key:"dispose",value:function e(){var t=this.props.player;t.off("loadstart",this.show)
;t.off("waiting",this.show);t.off("seeking",this.show);t.off("canplay",this.hide);t.off("suspend",this.hide);t.off("stalled",this.hide);t.off("timeupdate",this.hide);t.container.removeChild(this.videoLoading)}}]);return e}();t.exports=r});define.pack("./plugins/UIMask/html",[],function(require,e,t){t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return'\n        <div style="top: 0; left: 0; bottom: 0; position: absolute; right: 0;"></div>\n    '}});define.pack("./plugins/UIMask/index",["./html","../../pub/util","../../pub/data"],function(require,e,t){var i=require("./html");var n=require("../../pub/util");var s=require("../../pub/data");var r=function(){function e(t){_classCallCheck(this,e);this.props=t;this.createMask()}_createClass(e,[{key:"createMask",value:function e(){var t=this.props.player;var i=document.createElement("div");i.id="vpjs-videoMask-"+t.id;i.innerHTML=this.html();this.videoMask=i;t.container.appendChild(i)}},{key:"html",
value:function e(){if(n.isFunction(this.props.html)){return this.props.html(this.props)}else if(n.isString(this.props.html)){return this.props.html}else{return i(this.props)}}},{key:"dispose",value:function e(){var t=this.props.player;t.container.appendChild(this.videoMask)}}]);return e}();t.exports=r});define.pack("./plugins/UIPoster/html",[],function(require,e,t){t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.url||"";var i=e.size||"contain";var n=e.color||"#000";return'\n        <div style="background:url('+t+") no-repeat center;\n            background-size: "+i+";\n            background-color: "+n+';\n            position: absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;">\n        </div>\n    '}});define.pack("./plugins/UIPoster/index",["./html","../../pub/util","../../pub/data"],function(require,e,t){var i=require("./html");var n=require("../../pub/util")
;var s=require("../../pub/data");var r=function(){function e(t){_classCallCheck(this,e);this.props=t;this.isShow=true;var i=this.props.player;this.show=this.show.bind(this);this.hide=this.hide.bind(this);this.update=this.update.bind(this);this.resize=this.resize.bind(this);this.handleTimeupdate=this.handleTimeupdate.bind(this);this.create();if(n.platform==="pc"){i.on("playing",this.hide)}i.on("timeupdate",this.handleTimeupdate);i.on("UIPoster.show",this.show);i.on("UIPoster.update",this.update);i.on("UIPoster.hide",this.hide);i.on("UIPoster.resize",this.resize)}_createClass(e,[{key:"create",value:function e(){var t=this.props.player;var n=document.createElement("div");n.id="vpjs-videoPoster-"+t.id;n.innerHTML=i({url:t.poster(),size:t.props.videoSize,color:this.props.color});this.videoPoster=n;t.container.appendChild(n)}},{key:"update",value:function e(){var t=this.props.player;if(this.videoPoster){this.videoPoster.innerHTML=i({url:t.poster(),size:t.props.videoSize,
color:this.props.color})}else{this.create()}}},{key:"resize",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.videoPoster)return;var i=this.videoPoster.firstElementChild;i.style.backgroundSize=t.size}},{key:"show",value:function e(){if(this.isShow)return;var t=this.props.player;var i=this.videoPoster.firstElementChild;i.style.backgroundImage=t.poster();this.isShow=true;this.videoPoster&&(this.videoPoster.style.display="block")}},{key:"hide",value:function e(){if(!this.isShow)return;this.isShow=false;this.videoPoster&&(this.videoPoster.style.display="none")}},{key:"handleTimeupdate",value:function e(t){if(!this.isShow)return;var i=this.props.player;var s=i.currentTime();if(n.platform==="android"){if(s>.3){this.hide()}}else{if(s>0){this.hide()}}}},{key:"dispose",value:function e(){var t=this.props.player;if(n.platform==="pc"){t.off("playing",this.hide)}t.off("timeupdate",this.handleTimeupdate);t.off("UIPoster.show",this.show)
;t.off("UIPoster.hide",this.hide);t.off("UIPoster.resize",this.resize);t.off("UIPoster.update",this.update);t.container.appendChild(this.videoPoster)}}]);return e}();t.exports=r});define.pack("./plugins/creator",["../pub/util","../mixins/index","./UIPoster/index","./UILoading/index","./UIBigPlayButton/index","./UIMask/index","./UIControls/index","./UIError/index"],function(require,e,t){var i=require("../pub/util");var n=require("../mixins/index");var s={UIPoster:require("./UIPoster/index"),UILoading:require("./UILoading/index"),UIBigPlayButton:require("./UIBigPlayButton/index"),UIMask:require("./UIMask/index"),UIControls:require("./UIControls/index"),UIError:require("./UIError/index")};t.exports={create:function e(t,n,r){if(!i.isFunction(n)&&t){n=s[t.charAt(0).toLocaleUpperCase()+t.substring(1)]}if(n){return new n(r)}else{return null}},registerPlugin:function e(t,n){if(!t||!n){console.warn("registerPlugin name or factory cannnot be null")}if(!i.isFunction(n)){
console.warn("registerPlugin factory must be a function")}s[t]=n},getPlugins:function e(t){if(t!==undefined&&t!==null){return s[t]}return s}}});define.pack("./pub/data",["../events/config"],function(require,e,t){var i=require("../events/config");t.exports=new function(){var e={};this.plugins=function(t,i){if(i!==undefined&&i!==null&&t!==undefined&&t!==null){e[t]=i}if(t!==undefined&&t!==null){return e[t]}return e};var t={UIPoster:"",UIMask:"",UIControls:"",UILoading:"",UIBigPlayButton:"",UIError:""};this.pluginsConfig=function(e){if(e!==undefined&&e!==null){t=e}return t};var n={};for(var s=0;s<i.length;s++){n[i[s]]=""}this.eventsConfig=function(e){if(e!==undefined&&e!==null){n=e}return n};var r={};window.players=this.players=function(e,t){if(t!==undefined&&t!==null&&e!==undefined&&e!==null){r[e]=t}if(e!==undefined&&e!==null){return r[e]}return r};this.clearPlayers=function(){for(var e in r){r[e].dispose()}r={}};this.getPlayerId=function(){
var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.element||e.container;if(!t)return null;return t.getAttribute("data-vpjs-video-id")}}});define.pack("./pub/util",[],function(require,e,t){e.CONST={CLASS:{CONTAINER:"vpjs-playerContainer",CONTROLS:"vpjs-videoControlBar"}};function i(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}e.isFunction=i("Function");e.isObject=i("Object");e.isString=i("String");e.isNumber=i("Number");e.isArray=Array.isArray||i("Array");e.isPlainObject=function(e){return isObject(e)&&Object.getPrototypeOf(e)==Object.prototype};e.inputElement=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return e.element||e.container};e.param=function(e){var t=[];for(key in e){t.push(encodeURIComponent(key)+"="+encodeURIComponent(e[key]))}return t.join("&")};e.autoplay=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}
;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};if(e.isFunction(t)){i=t;t={}}var n;var s=200;var r=5;var o=0;var a=document.createElement("video");var l=a.style;function u(e){o++;clearTimeout(n);var t=e&&e.type==="playing"||a.currentTime!==0;if(!t&&o<r){n=setTimeout(u,s);return}a.removeEventListener("playing",u,false);i(t);if(a.parentNode){a.parentNode.removeChild(a)}}l.cssText="position: absolute; height: 1px; width: 1px; display: none;"
;a.src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAs1tZGF0AAACrgYF//+q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjYwMSBhMGNkN2QzIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNSAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEwIHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAD2WIhAA3//728P4FNjuZQQAAAu5tb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAAZAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACGHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAZAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAgAAAAIAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAGQAAAAAAAEAAAAAAZBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAACgAAAAEAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAE7bWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAA+3N0YmwAAACXc3RzZAAAAAAAAAABAAAAh2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAgACAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwFkAAr/4QAYZ2QACqzZX4iIhAAAAwAEAAADAFA8SJZYAQAGaOvjyyLAAAAAGHN0dHMAAAAAAAAAAQAAAAEAAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAAsUAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU2LjQwLjEwMQ=="
;a.setAttribute("autoplay","autoplay");a.setAttribute("webkit-playsinline",true);a.setAttribute("playsinline",true);document.body.appendChild(a);setTimeout(function(){a.addEventListener("playing",u,false);n=setTimeout(u,s)},0)};e.getRandom=function(){var e=(new Date).getTime()+Math.ceil(Math.random()*1e4);return e};e.platform=function(){var e=navigator.userAgent||navigator.vendor||window.opera;if(/windows phone/i.test(e)){return"wp"}if(/android/i.test(e)){return"android"}if(/iPad|iPhone|iPod/.test(e)&&!window.MSStream){return"ios"}return"pc"}();e.loadStyle=function(e,t){if(e&&!document.getElementById(e)){var i=document.createElement("style");i.type="text/css";i.id=e;i.appendChild(document.createTextNode(t));document.head.appendChild(i)}}});define.pack("./video/Base",["./util","./fullscreenApi","../pub/util","../pub/data","../mixins/index","../mixins/Events","../mixins/Timeout","../mixins/Interval","../mixins/Log"],function(require,e,t){var i=require("./util")
;var n=require("./fullscreenApi");var s=require("../pub/util");var r=require("../pub/data");var o=require("../mixins/index");var a=require("../mixins/Events");var l=require("../mixins/Timeout");var u=require("../mixins/Interval");var c=require("../mixins/Log");var p=function(){_createClass(e,null,[{key:"plugins",get:function e(){return true}}]);function e(t){var n=this;_classCallCheck(this,e);this.id=s.getRandom();this.props=t||{};i.defineProps(this);this._private={isMuted:this.muted(),volume:this.volume(),isFullScreen:false,isHover:false,video:[]};i.createContainer(this);i.createPlugins(this);i.createEvents(this);this.createVideo(function(e){n.video=e;i.initProps(n);n.runEvents("on");if(n.props.canvas===true){n.createCanvas(function(e){return n.canvas=e});n.canvasRequestID=requestAnimationFrame(function(){i.updateCanvas(n)})}});r.players(this.id,this)}_createClass(e,[{key:"createVideo",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){}
;var i=this.props||{};var n=this.props.attrs||{};var s="";for(var r in n){s+=r+'="'+n[r]+'"'}this.videoContainer.innerHTML='\n            <video id="vpjs-video-'+this.id+'"\n                webkit-playsinline="true"\n                playsinline="true"\n                x-webkit-airplay="true"\n                '+(n.style?"":'style="width: 100%; height: auto"')+"\n                "+(this.muted()?'muted="muted"':"")+"\n                "+(i.url||i.src?'src="'+(i.url||i.src)+'"':"")+"\n                "+s+" >\n            </video>\n        ";t(this.videoContainer.firstElementChild)}},{key:"createCanvas",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){};var i=document.createElement("canvas");i.id="vpjs-canvas-"+this.id;i.style.cssText="width: 100%; height: 100%";this.videoContainer.appendChild(i);t(i)}},{key:"videoTag",value:function e(){return this.video}},{key:"runPlugins",value:function e(t){var i=this.plugins||{};for(var n in i){
if(s.isFunction(i[n][t])){i[n][t](this)}}}},{key:"runEvents",value:function e(t){var i=this.events||{};for(var n in i){if(s.isFunction(i[n][t])){i[n][t](this)}}}},{key:"src",value:function e(t){var i=this.videoTag();if(t!==null&&t!==undefined&&i){if(t===""){i.pause();i.removeAttribute("src");i.load()}else{i.src=t}}return i&&i.src||null}},{key:"load",value:function e(){var t=this.videoTag();return t&&t.load()}},{key:"play",value:function e(){var t=this.videoTag();return t&&t.play()}},{key:"pause",value:function e(){var t=this.videoTag();return t&&t.pause()}},{key:"stop",value:function e(){this.currentTime(0);this.pause()}},{key:"replay",value:function e(){this.stop();this.play()}},{key:"paused",value:function e(){var t=this.videoTag();return t&&t.paused}},{key:"width",value:function e(t){if(t!==null&&t!==undefined){t=s.isNumber(t)?t+"px":t;this.container&&(this.container.style.width=t)}try{
return this.container.getBoundingClientRect().width||parseInt(window.getComputedStyle(this.container).width)||0}catch(e){return parseInt(window.getComputedStyle(this.container).width)||0}}},{key:"height",value:function e(t){if(t!==null&&t!==undefined){t=s.isNumber(t)?t+"px":t;this.container&&(this.container.style.height=t)}try{return this.container.getBoundingClientRect().height||parseInt(window.getComputedStyle(this.container).height)||0}catch(e){return parseInt(window.getComputedStyle(this.container).height)||0}}},{key:"controls",value:function e(t){if(t!==null&&t!==undefined){t?this.emit("UIControls.show"):this.emit("UIControls.hide")}return this.props.controls}},{key:"poster",value:function e(t){if(t!==null&&t!==undefined){this.emit("UIPoster.update")}return this.props.poster}},{key:"isFullScreen",value:function e(){return this._private.isFullScreen}},{key:"supportsFullScreen",value:function e(){var t=this.container;var i=this.videoTag()
;return!!(i.webkitEnterFullScreen||t[n().requestFullscreen])}},{key:"requestFullscreen",value:function e(){var t=this.container;var i=this.videoTag();if(s.platform==="android"){if(i.webkitEnterFullScreen){i.webkitEnterFullScreen()}else if(t[n().requestFullscreen]){t[n().requestFullscreen]()}}else{if(t[n().requestFullscreen]){t[n().requestFullscreen]()}else if(i.webkitEnterFullScreen){i.webkitEnterFullScreen()}}}},{key:"exitFullscreen",value:function e(){var t=this.videoTag();var i=void 0;if(s.platform==="android"){if(t.webkitExitFullscreen){i=t.webkitExitFullscreen()}else if(document[n().exitFullscreen]){i=document[n().exitFullscreen]()}}else{if(document[n().exitFullscreen]){i=document[n().exitFullscreen]()}else if(t.webkitExitFullscreen){i=t.webkitExitFullscreen()}}if(i&&i.catch){i.catch(function(e){return console.log(e)})}return i}},{key:"canPlayType",value:function e(t){var i=document.createElement("video");return i.canPlayType(t)}},{key:"videoSize",value:function e(t){var i=this
;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t=t||this.props.videoSize||"contain";this.props.videoSize=t;var s=this.videoTag();var r=this.canvas;if(!s)return;var o=n.videoWidth||this.videoWidth();var a=n.videoHeight||this.videoHeight();var l=n.width||this.width();var u=n.height||this.height();console.log("videoWidth: "+o+", videoHeight: "+a+", ctnWidth: "+l+", ctnHeight: "+u);if(o===0||a===0||l===0||u===0){if((o===0||a===0)&&this.poster()){this._private.posterImage=new Image;this._private.posterImage.src=this.poster();this._private.posterImage.addEventListener("load",function(e){i.videoSize(i.props.videoSize,{videoWidth:e.target.width,videoHeight:e.target.height})})}return}var c=a/o;var p=u/l;var h=0;var d=0;var v=void 0,f=void 0,g=void 0,A=void 0;if(t=="cover"){if(c>p){g="auto";A=(c/p).toFixed(4)*100+"%";h=-((c-p)/2*100).toFixed(4)+"%"}else{g=(p/c).toFixed(4)*100+"%";A="auto";d=-((p/c-1)/2*100).toFixed(4)+"%"}}else{if(c>p){g=(p/c).toFixed(4)*100+"%";A="auto"
;d=-((p/c-1)/2*100).toFixed(4)+"%"}else{g="auto";A=(c/p).toFixed(4)*100+"%";h=-((c-p)/2*100).toFixed(4)+"%"}}this.log("[video] container size: "+l+", "+u);if(this.props.canvas===true){v="width: 100%; height: 100%; margin-top: 0; margin-left: 0; position: absolute; left: 0; top: 0;";f="width: 1px; height: 1px; margin-top: 0; margin-left: 0; position: absolute; left: 0; top: 0; z-index: -9999";r.width=l;r.height=u;r.setAttribute("style",v);s.setAttribute("style",f)}else{f="width: "+g+"; height: "+A+"; margin-top: "+h+"; margin-left: "+d+"; position: absolute; left: 0; top: 0;";s.setAttribute("style",f)}this.emit("UIPoster.resize",{size:t})}},{key:"dispose",value:function e(){cancelAnimationFrame(this.canvasRequestID);this.runEvents("off");this.src("");this.container.parentNode&&this.container.parentNode.removeChild(this.container);this.runPlugins("dispose");this.emit("dispose");this._private={};s.inputElement(this.props).removeAttribute("data-vpjs-video-id");delete r.players()[this.id]}
}]);return e}();o(p,a,l,u,c);t.exports=p});define.pack("./video/creator",["./Base","./style","../pub/util","../pub/data"],function(require,e,t){var i=require("./Base");var n=require("./style");var s=require("../pub/util");var r=require("../pub/data");var o={BaseVideo:i};var a={create:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s.loadStyle("vpjs-player-style",n());var i="BaseVideo";var a=void 0;var l=void 0;for(var u in o){if(t["is"+u]||t[u]){i=u}}a=o[i];if(a.plugins!==false){t.plugins=_extends({},r.pluginsConfig(),t.plugins||{})}if(a.events!==false){t.events=_extends({},r.eventsConfig(),t.events||{})}l=new a(t);try{l.log("[video] create "+u+" Player: "+JSON.stringify(t,null,2))}catch(e){}return l},registerVideo:function e(t,n){if(!t||!n){console.warn("registerVideo name or factory cannnot be null")}if(n.prototype instanceof i){o[t]=n}else{console.warn("registerVideo factory must extend BaseVideo")}}};t.exports=a})
;define.pack("./video/fullscreenApi",[],function(require,e,t){var i=null;t.exports=function(){if(i)return i;i={};var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var t=e[0];var n=void 0;for(var s=0;s<e.length;s++){if(e[s][1]in document){n=e[s];break}}if(n){for(var r=0;r<n.length;r++){i[t[r]]=n[r]}}return i}})
;define.pack("./video/style",["../pub/util"],function(require,e,t){var i=require("../pub/util");t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t="."+i.CONST.CLASS.CONTAINER
;return"\n        .vpjs-fullscreen {\n            width: 100% !important;\n            height: 100% !important;\n            padding-top: 0 !important;\n        }\n\n        .vpjs-fullscreen .vpjs-videoControlBar {\n            z-index: 2147483647\n        }\n\n        "+t+" video::-webkit-media-controls-enclosure {\n            display:none !important;\n        }\n\n        "+t+" video::-webkit-media-controls-start-playback-button {\n            display:none !important;\n        }\n\n        "+t+":-moz-full-screen {\n            position: asbolute;\n        }\n\n        "+t+" .vpjs-fade {\n            -webkit-transition: opacity 0.3s ease-in, visibility 0.2s ease-in;\n            -moz-transition: opacity 0.3s ease-in, visibility 0.2s ease-in;\n            -o-transition: opacity 0.3s ease-in, visibility 0.2s ease-in;\n            transition: opacity 0.3s ease-in, visibility 0.2s ease-in;\n        }\n\n        "+t+" .vpjs-fadein {\n            visibility: visible;\n            opacity: 1;\n        }\n\n        "+t+" .vpjs-fadeout {\n            visibility: hidden;\n            opacity: 0;\n        }\n\n    "
}});define.pack("./video/util",["../pub/util","../events/creator","../plugins/creator"],function(require,e,t){var i=require("../pub/util");var n=require("../events/creator");var s=require("../plugins/creator");var r={muted:{default:false,accept:{muted:true,true:true,false:false}},autoplay:{default:false,accept:{autoplay:true,true:true,false:false}},loop:{default:false,accept:{loop:true,true:true,false:false}},preload:{default:"auto",accept:{metadata:"metadata",auto:"auto",none:"none",false:"none"}},controls:{default:false,accept:{controls:true,true:true,false:false}},poster:{default:"",type:"String"},src:{name:"url",default:null,type:"String"},volume:{default:1,type:"Number"},currentTime:{default:0,type:"Number"},duration:{default:0,set:false},ended:{default:0,set:false},error:{default:0,set:false},readyState:{default:0,set:false},videoWidth:{default:0,set:false},videoHeight:{default:0,set:false},seekable:{set:false},buffered:{set:false}};e.defineProps=function(e){var t=function t(n){
var s=r[n];var o=e[n]||function(t){var i=e.videoTag();if(t!==undefined&&t!==null){try{i&&(i[n]=t)}catch(e){}}return i&&i[n]||null};Object.defineProperty(e,n,{get:function t(){return function(t){if(s.type&&t&&i["is"+s.type]&&!i["is"+s.type](t)){throw"player set "+n+" error, value must be "+s.type}var r=s.accept?s.accept[t]:t;if(r===undefined||r===null){var a=o.call(e);this.props[n]=a!==undefined&&a!==null?a:this.props[n];return this.props[n]}this.props[n]=r;s.set!==false&&o.call(e,r);return this.props[n]}}});e[n](e.props[n]||e.props[s.name]||s.default)};for(var n in r){t(n)}};e.initProps=function(e){for(var t in r){e[t](e.props[t]||e.props[r[t].name]||r[t].default)}};e.createContainer=function(e){var t=i.inputElement(e.props);var n=e.container=document.createElement("div");var s=e.videoContainer=document.createElement("div");var r="vpjs-playerContainer-"+e.id;var o="vpjs-videoContainer-"+e.id;this.resizeContainer(e);t.setAttribute("data-vpjs-video-id",e.id);n.setAttribute("id",r)
;n.setAttribute("data-vpjs-video-id",e.id);n.setAttribute("class",i.CONST.CLASS.CONTAINER);s.setAttribute("id",o);s.style.cssText="width: 100%; height: 100%; position: relative; z-index: 0;";n.appendChild(s);if(e.props.element){t.parentNode.insertBefore(n,t.nextSibling);t.style.display="none"}else if(e.props.container){t.appendChild(n)}return n};e.resizeContainer=function(e){var t=i.inputElement(e.props);var n=e.container;var s=void 0,r=void 0,o=void 0,a=void 0,l=void 0,u=void 0,c=void 0;if(window.getComputedStyle){s=window.getComputedStyle(t);r=s.width;o=s.height;a=s.margin;l=s.top;u=s.left;c=s.position==="static"?"relative":s.position}if(!parseInt(r)){r=t.style.width||t.clientWidth}if(!parseInt(o)){o=t.style.height||t.clientHeight}r=parseInt(r);r=r?r:"100%";o=parseInt(o);o=o?o:"100%";if(e.props.width||e.props.height){e.width(e.props.width);e.height(e.props.height)}else{e.width(r);e.height(o);n.style.margin=a}n.style.overflow="hidden";n.style.background=e.props.background||"#000"
;if(e.props.element){n.style.position=e.props.position||c||"relative";n.style.top=l||t.style.top;n.style.left=u||t.style.left}else if(e.props.container){n.style.position="relative";n.style.top=0;n.style.left=0}return n};e.updateCanvas=function(t){var i=t.canvas;var n=t.video;var s=t.props.videoSize;if(!i)return;var r=t.canvas.getContext("2d");var o=t.videoWidth();var a=t.videoHeight();var l=t.width();var u=t.height();if(o===0||a===0||l===0||u===0){t.canvasRequestID=requestAnimationFrame(function(){e.updateCanvas(t)});return}var c=a/o;var p=u/l;var h=0,d=0,v=void 0,f=void 0;if(s=="cover"){if(c>p){v=l;f=parseFloat((c*l).toFixed(2));d=(u-f)/2}else{f=u;v=parseFloat((f/c).toFixed(2));h=(l-v)/2}}else{if(c>p){f=u;v=parseFloat((f/c).toFixed(2));h=(l-v)/2}else{v=l;f=parseFloat((c*l).toFixed(2));d=(u-f)/2}}r.clearRect(0,0,i.width,i.height);r.drawImage(n,0,0,o,a,h,d,v,f);t.canvasRequestID=requestAnimationFrame(function(){e.updateCanvas(t)})};e.createPlugins=function(e){e.plugins=e.plugins||{}
;var t=e.props.plugins=_extends({},e.props.plugins||{},e.constructor.plugins||{});var i=void 0;for(var n in t){i=o(e,s,n,t[n]);if(i){e.plugins[n]=i}}};e.createEvents=function(e){e.events=e.events||{};var t=e.props.events=_extends({},e.props.events||{},e.constructor.events||{});var i=void 0,s=void 0;for(s in t){i=o(e,n,s,t[s]);if(i){e.events[s]=i}}};function o(e,t,n,s){var r=void 0;if(i.isFunction(s)){r=t.create(n,s,{player:e})}else if(i.isObject(s)&&(s.factory||s.props)){r=t.create(n,s.factory,_extends({player:s.props.player||e},s.props))}else if(i.isObject(s)){r=t.create(n,null,_extends({player:s.player||e},s))}else if(s!==false){r=t.create(n,null,{player:e})}return r}});
define("lib/bj-report",[],function(a,b,c){var d=function(a){if(a.BJ_REPORT)return a.BJ_REPORT;var b=[],c={},d={id:0,pid:0,uin:0,url:"//badjs.vip.qq.com/badjs",combo:1,ext:null,level:4,ignore:[],random:0,
delay:100,submit:null,repeat:1,pvrandom:0,errrandom:0,furl:"0"},e=2,f=0,g=function(a,b){return Object.prototype.toString.call(a)==="[object "+(b||"Object")+"]"},h=function(a){var b=typeof a;return"object"===b&&!!a;
},i=function(a){return null===a?!0:g(a,"Number")?!1:!a},j=a.onerror;a.onerror=function(b,c,d,e,h){var i=b;if(f++,h&&h.stack&&(i=l(h)),g(i,"Event")&&(i+=i.type?"--"+i.type+"--"+(i.target?i.target.tagName+"::"+i.target.src:""):""),
i.toLowerCase&&i.toLowerCase().match(/^script\serror/)){i+="::";for(var k,m=location.protocol+"//"+location.hostname,n=$("script[src]"),o=n.length,p=0;o>p;p++)k=n[p].src||"",0!=k.indexOf(m)&&(i+=k,i+=";");
}var q=location.protocol+"//"+location.hostname+location.pathname;i.lastIndexOf(q)<0&&(i+="@"+q),v.push({msg:i,target:c,rowNum:d,colNum:e}),u(),j&&j.apply(a,arguments)};var k=function(a){try{if(a.stack){
var b=a.stack.match("https?://[^\n]+");b=b?b[0]:"";var c=b.match(":(\\d+):(\\d+)");c||(c=[0,0,0]);var d=l(a);return{msg:d,rowNum:c[1],colNum:c[2],target:b.replace(c[0],"")}}return a.name&&a.message&&a.description?{
msg:JSON.stringify(a)}:a}catch(e){return a}},l=function(a){var b=a.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),c=a.toString();return b.indexOf(c)<0&&(b=c+"@"+b),
b},m=function(a,b){var c=[],e=[],f=[];if(h(a)){a.level=a.level||d.level;for(var g in a){var j=a[g];if(!i(j)){if(h(j))try{j=JSON.stringify(j)}catch(k){j="[BJ_REPORT detect value stringify error] "+k.toString();
}f.push(g+":"+j),c.push(g+"="+encodeURIComponent(j)),e.push(g+"["+b+"]="+encodeURIComponent(j))}}}return[e.join("&"),f.join(","),c.join("&")]},n=[],o=function(a){var b=new RegExp("badjspv");if(b.test(a)||(a=q(a)),
d.submit)d.submit(a);else{var c=new Image;n.push(c),c.src=a}},p=function(){var a=!1,b=new RegExp("debug=1"),c=new RegExp("badjs=1");c.test(document.cookie)&&(a=!0),(c.test(document.location.href)||b.test(document.location.href))&&(a=!0);
var d=navigator.userAgent.toLowerCase();return/sq\_[\d\.]+\_\d+\_hdb/.test(d)&&(a=!0),a},q=function(a){return a+="&ic="+f,p()&&(a+="&ig=1"),a},r=function(a){if(!h(a))return!0;var b=a.msg,e=c[b]=(parseInt(c[b],10)||0)+1;
return e>d.repeat},s=[],t=0,u=function(a){if(d.report){for(;b.length;){var c=!1,e=b.shift();if(!r(e)){var f=m(e,s.length);if(g(d.ignore,"Array"))for(var h=0,i=d.ignore.length;i>h;h++){var j=d.ignore[h];
if(g(j,"RegExp")&&j.test(f[1])||g(j,"Function")&&j(e,f[1])){c=!0;break}}c||(d.combo?s.push(f[0]):o(d.report+f[2]+"&_t="+ +new Date),d.onReport&&d.onReport(d.id,e))}}var k=s.length;if(k){var l=function(){
clearTimeout(t),o(d.report+s.join("&")+"&count="+s.length+"&_t="+ +new Date),t=0,s=[]};a?l():t||(t=setTimeout(l,d.delay))}}},v={push:function(a){if(1===d.random||p());else{var c=Math.round(9*Math.random()+1);
if(0===d.errrandom){if(9!=c)return v}else{var e=10*d.errrandom/10;if(e>=1||d.errrandom<.1);else{for(var f=10*d.errrandom,g=[],i=1;f>=i;i++)g.push(i);if(!w(c,g))return v}}}var j=h(a)?k(a):{msg:a};return d.ext&&!j.ext&&(j.ext=d.ext),
b.push(j),u(),v},report:function(a){return a&&v.push(a),u(!0),v},info:function(a){return a?(h(a)?a.level=2:a={msg:a,level:2},v.push(a),v):v},debug:function(a){return a?(h(a)?a.level=1:a={msg:a,level:1},
v.push(a),v):v},init:function(a){if(h(a))for(var c in a)d[c]=a[c];var f=parseInt(d.id,10);return f&&(x(),/qq\.com$/gi.test(location.hostname)&&(d.url||(d.url="//badjs.vip.qq.com/badjs"),d.uin||(d.uin=parseInt((document.cookie.match(/\buin=\D+(\d+)/)||[])[1],10))),
d.report=(d.url||"/badjs")+"?id="+f+"&pid="+d.pid+"&uin="+d.uin+"&v="+e+"&from="+encodeURIComponent(v.referrer())+"&furl="+encodeURIComponent(d.furl)+"&"),b.length&&u(),v},referrer:function(){var a="";try{
a=window.top.document.referrer}catch(b){if(window.parent)try{a=window.parent.document.referrer}catch(c){a=""}}return""===a&&(a=document.referrer),a},__onerror__:a.onerror},w=function(a,b){for(var c in b)if(a==b[c])return!0;
},x=function(){var a="//badjs.vip.qq.com/badjspv?id="+d.id+"&pid="+d.pid+"&v="+e+"&furl="+encodeURIComponent(d.furl);if(1==d.random||p())o(a);else{var b=Math.round(99*Math.random()+1);if(0===d.pvrandom)9==b&&o(a);else{
var c=100*d.pvrandom/100;if(c>=1||d.pvrandom<.01)o(a);else{for(var f=100*d.pvrandom,g=[],h=1;f>=h;h++)g.push(h);w(b,g)&&o(a)}}}};return"undefined"!=typeof console&&console.error&&setTimeout(function(){
var a=((location.hash||"").match(/([#&])BJ_ERROR=([^&$]+)/)||[])[2];a&&console.error("BJ_ERROR",decodeURIComponent(a).replace(/(:\d+:\d+)\s*/g,"$1\n"))},0),v}(window);"undefined"!=typeof b&&("undefined"!=typeof c&&c.exports&&(b=c.exports=d),
b.BJ_REPORT=d)});
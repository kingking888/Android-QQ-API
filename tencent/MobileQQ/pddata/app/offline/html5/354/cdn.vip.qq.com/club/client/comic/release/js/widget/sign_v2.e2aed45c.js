define("widget/sign_v2",["business/common","zepto","business/router","piggy/util/cookie","business/jsbridge","piggy/util/cacheData","piggy/util/tpl","piggy/util/uri","piggy/util/report","piggy/util/process","piggy/util/net"],function(a,b,c){
var d=a("business/common"),e=a("piggy/util/tpl"),f=a("business/router"),g=a("business/jsbridge"),h=a("piggy/util/cookie"),i=a("piggy/util/net"),j=a("piggy/util/cacheData"),k=a("piggy/util/process"),l=a("piggy/util/report").getInstance("business/compassReport"),m={},n=window.location.href.indexOf("task_center_v2.html")>-1?!0:!1;
m.pageId="169",m.isTest=!1,m.amsAct={getSignInfo:n?"398357":"107528",rewardActInfo:n?[{id:398359,dayLimit:3,rewardCoin:5,rewardBd:50,rewardExp:10,usable:0,isGot:0},{id:398362,dayLimit:6,rewardCoin:15,rewardBd:150,
rewardExp:25,usable:0,isGot:0},{id:398361,dayLimit:15,rewardCoin:40,rewardBd:400,rewardExp:50,usable:1,isGot:0},{id:398360,dayLimit:28,rewardCoin:100,rewardBd:1e3,rewardExp:120,usable:0,isGot:0}]:[{id:105321,
dayLimit:3,rewardCoin:5,rewardExp:10,usable:0,isGot:0},{id:104360,dayLimit:6,rewardCoin:15,rewardExp:25,usable:0,isGot:0},{id:104364,dayLimit:15,rewardCoin:40,rewardExp:50,usable:1,isGot:0},{id:104365,
dayLimit:28,rewardCoin:100,rewardExp:120,usable:0,isGot:0}]},j.set("isSignV2",1),m.isTest&&(m.amsAct={getSignInfo:"194227",rewardActInfo:[{id:194262,dayLimit:3,rewardCoin:10,rewardExp:10,usable:0,isGot:0
},{id:194278,dayLimit:6,rewardCoin:30,rewardExp:20,usable:0,isGot:0},{id:194279,dayLimit:15,rewardCoin:80,rewardExp:40,usable:1,isGot:0},{id:194282,dayLimit:28,rewardCoin:180,rewardExp:100,usable:0,isGot:0
}]}),m.tpl={entry:'<div class="icon-sign" id="widget_sign_entry" onclick="<%=this.getInvoke("action.sign")%>"></div>',dialog:'			<div class="ui-dialog ui-dialog-operate dialog-sign-in show <%=isSticky? \'fixTop\' : \'\'%>  <%=isNoTop? \'noTop\' : \'\'%>" ontouchmove="return false">				<div class="ui-dialog-cnt">					<div class="ui-dialog-hd">						<div class="sign-in-title">							<h4><%=words%></h4>						</div>						<p class="sub-words">本月已累计签到<%=singedDayOfMonth%>天</p>						<div class="sign-in-state">							<!-- state 有三个状态 不填写/finished/will-finished -->							<!-- sign-in-state-ul 四个进度状态 animate-1 animate-2 animate-3-->							<ul class="sign-in-state-ul animate-<%=state%>">								<% for (var i = 0; i < rewardList.length; i++) { %>								<li class="state state-<%=i+1%> <%=rewardList[i].stateClass || \'\'%> script-state" id="widget_sign_state_<%=i + 1%>">									<span class="right-icon"></span>									<span class="time-words"><%=rewardList[i].dayLimit%>天</span>								</li>									<% if (i < 3) { %>								<li class="dot dot-<%=i+1%>"></li>									<% } %>								<% } %>							</ul>							<% for (var i = 0; i < rewardList.length; i++) { %>							<div class="sign-in-pop-hint <%=rewardList[i].guideClass%> " id="widget_sign_pop_<%=i + 1%>">								<p>经验+<%=rewardList[i].rewardExp%>  萌点+<%=rewardList[i].rewardCoin%></p>							</div>							<%} %>						</div>						<!-- 默认为index，用show-gift切换状态 -->						<div class="sign-in-content">							<!-- 签到首页 -->							<div class="sign-in-index">								<div class="sign-in-bg">									<div class="gear-2"></div>									<div class="gear-3"></div>									<div class="gear-4"></div>								</div>								<div class="sign-in-bg-rt-wrap">									<div class="gear-1"></div>									<div class="sign-in-bg-rt"></div>								</div>								<% if (recBook && recBook.id) { %>								<div class="sign-in-chatbox">									<span class="chat-words ui-nowrap-multi">小香向你推荐 “ <%=recBook.oneWord%> ”</span>								</div>								<div class="sign-in-book-wrap" onclick="<%=this.getInvoke(\'action.clickRecBook\', recBook)%>">									<div class="sign-in-book" style="background-image: url(<%=recBook.coverImg + \'?max_age==31536000\'%>)">										<span class="book-name ui-nowrap"><%=recBook.name%></span>									</div>								</div>								<% } %>								<div class="sign-in-man-wrap">									<!-- sign-in-man 四个时间段分别添加 man-1 man-2 man-3 man-4 -->									<div class="sign-in-man man-<%=state + 1 > 4 ? 4 : state + 1%>"></div>								</div>							</div>							<!-- 签到礼品页 -->							<div class="sign-in-gift-wrap">								<div class="sign-in-bg">									<div class="gear-2"></div>									<div class="gear-5"></div>									<div class="gear-6"></div>									<div class="gear-7"></div>								</div>								<div class="sign-in-bg-rt-wrap">									<div class="gear-1"></div>									<div class="sign-in-bg-rt"></div>								</div>								<div class="gift-list">									<div class="sign-in-gift">										<span class="gift-item-wrap">											<span class="gift-star-lt"></span>											<span class="gift-star-lb"></span>											<span class="gift-star-rt"></span>											<span class="gift-star-d"></span>											<span class="gift-get-success"></span>											<div class="gift-item mengdian"></div>										</span>										<span class="gift-name ui-nowrap" id="widget_sign_reward_coin"></span>									</div>									<div class="sign-in-gift">										<span class="gift-item-wrap">											<span class="gift-star-lt"></span>											<span class="gift-star-lb"></span>											<span class="gift-star-rt"></span>											<span class="gift-star-d"></span>											<span class="gift-get-success"></span>											<div class="gift-item exp"></div>										</span>										<span class="gift-name ui-nowrap" id="widget_sign_reward_exp"></span>									</div>								</div>							</div>						</div>						<div class="ui-dialog-ft">							<button class="ui-btn-lg <%=rewardTimes ? \'\' : \'disabled\'%>" onclick="<%=this.getInvoke(\'action.clickGetReward\')%>">领取累积福利</button>						</div>						<p class="last-words">注意：累计奖励每月末过期</p>					</div>					<i class="ui-dialog-close" data-role="button" onclick="<%=this.getInvoke(\'action.closeDialog\')%>"></i>				</div>			</div>		'
},m.dividePosition;var o={show:function(){m.loading.getInstance().show()},hide:function(){m.loading.getInstance().hide()}};m.loading=function(){function a(){this.element=document.createElement("div"),this.element.innerHTML='<div class="ui-loading-block show"><div class="ui-loading-cnt"><i class="ui-loading-bright"></i><p>loading...</p></div> </div>',
this.element.className="loading-mask",document.body.appendChild(this.element)}var b;return a.prototype.show=function(){this.element.style.display="block"},a.prototype.hide=function(){this.element.style.display="none";
},{getInstance:function(){return b||(b=new a),b}}}(),b.init=function(a){d.loadCss("../css/dialog_sign_in.css?_bid=354&v=20170605"),m.getRecommendBookList(function(){}),a.showEntry&&b.getSignInfo({},function(b){
m.renderSignEntry(b,a)}),a.dividePosition&&(m.dividePosition=a.dividePosition),m.bindEvent()},m.bindEvent=function(){g.addEventListener("widget_sign_suc",function(){$("#widget_sign_entry").hide()})},m.renderSignEntry=function(a,c){
a&&0==a.result&&!a.data&&$("body").append(e.get(m.tpl.entry,{},e.getInstance({action:b})))},b.getSignInfo=function(a,b,c){p.getSignInfo(function(a){a&&0===a.ret&&a.data&&a.data.rule?(b({result:0,data:a.data.rule.hasjoin||0
}),a.data.rule.hasjoin||c||setTimeout(function(){m.preLoadImg()},0)):b({result:-1})})},b.getSigninInfo=function(a){d.sendMergeRequest({url:f.createUrl("vpcm/cgi-bin/coupon_coin"),data:{module:"comic_sign_in_svr",
method:"SignIn"},callback:a})},b.getSigninInfoNew=function(a){d.sendMergeRequest({url:f.createUrl("vpcm/cgi-bin/coupon_coin"),data:{module:"comic_sign_in_svr",method:"SignIn",param:{useBd:1}},callback:a
})},b.getSignReward=function(a,b){p.amsRequest(a,b)},m.preLoadImg=function(){var a=arguments.callee;if(!a.isLoad){a.isLoad=!0;for(var b=["https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-top_cfbf4e6c44a0c044f6bf93561ffda34b.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-state2_3b203e37e91ae729f8383cc37f9fc673.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-state3_354c52c014da8f4fad3b18d61bf6036d.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-pop-hint-l_62856487a931aaef558516afdc64e3d0.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-state4_30c6a5bb5c72719a60dbe71c0fc15a89.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-pop-hint_552cf59ebcd28ede3bd62ce512a71603.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-star-rt_921a5c218dc871f92c920a2dccd1c88f.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-bg2_156b25bd61a1a3d75e67f9116b0fe9e7.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-gear3_e521042dc6493b8543dd2678041eef38.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-star-lt_5ce1eff9d9df1f45a1308c419c5b485e.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in_1e4eb58498e0b7ddd412fd41b2d9c27b.gift-exp.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-pop-hint-r2_b550c63e31f22d33e785947f96905eb4.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-chatbox_6984fabf7a480cde050dd0426d90002c.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in_6996b9af9fa40ae6bc65874ff55f0120.gift-md.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-bg_fc0b2534411ccc7ca151b05996657f6e.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-gear6_02247baa3e141c8bb33d6c3367204bb0.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-pop-hint-r_444a963a4bb62738d061665aa66019aa.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-bg-rt_21589b7a5755122cb1718f155226e2e5.png?_bid=354&max_age=3153600","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-gear7_2416525babe9baabf793a85b65129903.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-gear1_ed0698cefa0c529ee4a1273498fe97f2.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in_e4611b4dc5e2b8b56066a21c132d6d8f.gift-bg.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-man-bg_1cdd4f835d93c1e42f06dfa51e5688d1.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-gear4_4226227572c2ac24c525235d6fa45523.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-gear5_25b6d78af0ef428fda8a8f5ad1ebcc65.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-get-success_6bb18c7be515eb0e763bb4317a1d9a3d.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-star-d_efd02bb77d57e93337441ecc05b08a40.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-star-lb_9a5595696134a3b1fc6eb26e34262025.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-gear2_a3ce02f8d10a54006efc8b404f516843.png?_bid=354&max_age=31536000"],c=0;c<b.length;c++)i.ping(b[c]);
}},m.getRecommendBook=function(a,b){var c=(arguments.callee,{}),d="comic_sign_RecommendBook_index",e=new Date,f=[e.getYear(),e.getMonth(),e.getDate()].join("-"),g=j.get(d)||{index:0,day:f};c=g&&g.day&&g.day==f?g:{
index:g&&"number"==typeof g.index?++g.index:0,day:f},j.set(d,c),m.getRecommendBookList(function(a){if(a&&0==a.result&&a.data&&a.data.length){var d=c.index||0;d%=a.data.length,b(a.data[d])}})},m.getRecommendBookList=function(a){
var b=604800,c=86400;return j.getWithListStruct({},["data"],"comic/sign/getRecommendBook",function(a,b,c,d){i.ajax({url:f.createUrl(window.location.protocol+"//cdn.vip.qq.com/club/mobile/profile/template/comic_sign_rec.json"),
cache:!1,dataType:"json",timeout:6e4,success:function(a){c($.isArray(a)?{result:0,data:{data:a}}:{result:-1})},error:function(a,b,d){c({result:-1,message:[b,d]})}})},function(b){if(b&&b.data&&b.data.data&&$.isArray(b.data.data)){
var c=b.data.data;a({result:0,data:c})}else a({result:-3})},b,c)};var p={amsRequest:function(a,b){var c={g_tk:m.getAMSgtk(),actid:a,merge:"1",plat:d.iOS?"2":"1",qqVersion:d.QQVersion},e=window.location.protocol+"//iyouxi3.vip.qq.com/";
e+="ams3.0.php?"+$.param(c),$.ajax({url:e,cache:!1,dataType:"jsonp",success:function(a){b(a)}})},amsRequestSSO:function(a,b){var c={g_tk:m.getAMSgtk(),actid:a,merge:"1",plat:d.iOS?"2":"1",qqVersion:d.QQVersion
},e="http://iyouxi3.vip.qq.com/ams3.0.php?"+$.param(c);g.invoke("mqq.sso.uniAgent",{cmd:"httpagent_yx_sz.http",method:"GET",url:e,needCookie:1},function(a){if(a&&0===a.ssoRet&&0===a.businessRet&&a.data){
var c=null;try{var d=JSON.parse(a.data);c=d&&d.content?JSON.parse(d.content):null}catch(e){}b(c)}else b({result:-1,data:null})})},getSignInfo:function(a){this.amsRequest(m.amsAct.getSignInfo,a)},sign:function(a){
d.sendMergeRequest({url:f.createUrl("vpcm/cgi-bin/coupon_coin"),data:{module:"comic_sign_in_svr",method:"SignIn"},callback:a})},getSignReward:function(a,b){this.amsRequest(a,b)}};m.getAMSgtk=function(){
var a,b=5381,c=h.get("skey")||"",d="tencentQQVIP123443safde&!%^%1282",e=c,f=[];f.push(b<<5);for(var g=0,i=e.length;i>g;++g)a=e.charAt(g).charCodeAt(0),f.push((b<<5)+a),b=a;return m.getMD5(f.join("")+d);
},m.getMD5=function(a){function b(a){return l(c(k(a),a.length*n))}function c(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,j=-1732584194,k=271733878,l=0;l<a.length;l+=16){
var m=c,n=d,p=j,q=k;c=e(c,d,j,k,a[l+0],7,-680876936),k=e(k,c,d,j,a[l+1],12,-389564586),j=e(j,k,c,d,a[l+2],17,606105819),d=e(d,j,k,c,a[l+3],22,-1044525330),c=e(c,d,j,k,a[l+4],7,-176418897),k=e(k,c,d,j,a[l+5],12,1200080426),
j=e(j,k,c,d,a[l+6],17,-1473231341),d=e(d,j,k,c,a[l+7],22,-45705983),c=e(c,d,j,k,a[l+8],7,1770035416),k=e(k,c,d,j,a[l+9],12,-1958414417),j=e(j,k,c,d,a[l+10],17,-42063),d=e(d,j,k,c,a[l+11],22,-1990404162),
c=e(c,d,j,k,a[l+12],7,1804603682),k=e(k,c,d,j,a[l+13],12,-40341101),j=e(j,k,c,d,a[l+14],17,-1502002290),d=e(d,j,k,c,a[l+15],22,1236535329),c=f(c,d,j,k,a[l+1],5,-165796510),k=f(k,c,d,j,a[l+6],9,-1069501632),
j=f(j,k,c,d,a[l+11],14,643717713),d=f(d,j,k,c,a[l+0],20,-373897302),c=f(c,d,j,k,a[l+5],5,-701558691),k=f(k,c,d,j,a[l+10],9,38016083),j=f(j,k,c,d,a[l+15],14,-660478335),d=f(d,j,k,c,a[l+4],20,-405537848),
c=f(c,d,j,k,a[l+9],5,568446438),k=f(k,c,d,j,a[l+14],9,-1019803690),j=f(j,k,c,d,a[l+3],14,-187363961),d=f(d,j,k,c,a[l+8],20,1163531501),c=f(c,d,j,k,a[l+13],5,-1444681467),k=f(k,c,d,j,a[l+2],9,-51403784),
j=f(j,k,c,d,a[l+7],14,1735328473),d=f(d,j,k,c,a[l+12],20,-1926607734),c=g(c,d,j,k,a[l+5],4,-378558),k=g(k,c,d,j,a[l+8],11,-2022574463),j=g(j,k,c,d,a[l+11],16,1839030562),d=g(d,j,k,c,a[l+14],23,-35309556),
c=g(c,d,j,k,a[l+1],4,-1530992060),k=g(k,c,d,j,a[l+4],11,1272893353),j=g(j,k,c,d,a[l+7],16,-155497632),d=g(d,j,k,c,a[l+10],23,-1094730640),c=g(c,d,j,k,a[l+13],4,681279174),k=g(k,c,d,j,a[l+0],11,-358537222),
j=g(j,k,c,d,a[l+3],16,-722521979),d=g(d,j,k,c,a[l+6],23,76029189),c=g(c,d,j,k,a[l+9],4,-640364487),k=g(k,c,d,j,a[l+12],11,-421815835),j=g(j,k,c,d,a[l+15],16,530742520),d=g(d,j,k,c,a[l+2],23,-995338651),
c=h(c,d,j,k,a[l+0],6,-198630844),k=h(k,c,d,j,a[l+7],10,1126891415),j=h(j,k,c,d,a[l+14],15,-1416354905),d=h(d,j,k,c,a[l+5],21,-57434055),c=h(c,d,j,k,a[l+12],6,1700485571),k=h(k,c,d,j,a[l+3],10,-1894986606),
j=h(j,k,c,d,a[l+10],15,-1051523),d=h(d,j,k,c,a[l+1],21,-2054922799),c=h(c,d,j,k,a[l+8],6,1873313359),k=h(k,c,d,j,a[l+15],10,-30611744),j=h(j,k,c,d,a[l+6],15,-1560198380),d=h(d,j,k,c,a[l+13],21,1309151649),
c=h(c,d,j,k,a[l+4],6,-145523070),k=h(k,c,d,j,a[l+11],10,-1120210379),j=h(j,k,c,d,a[l+2],15,718787259),d=h(d,j,k,c,a[l+9],21,-343485551),c=i(c,m),d=i(d,n),j=i(j,p),k=i(k,q)}return 16==o?Array(d,j):Array(c,d,j,k);
}function d(a,b,c,d,e,f){return i(j(i(i(b,a),i(d,f)),e),c)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h);
}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function j(a,b){return a<<b|a>>>32-b}function k(a){for(var b=Array(),c=(1<<n)-1,d=0;d<a.length*n;d+=n)b[d>>5]|=(a.charCodeAt(d/n)&c)<<d%32;
return b}function l(a){for(var b=m?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15);return c}var m=0,n=8,o=32;return b(a)},m.signInfo,
b.sign=function(a,b){arguments.callee;m.signInfo?m.renderSignSucDialog(m.signInfo):(o.show(),p.sign(function(a){if(0!==a.result||!a.data||0!==a.data.ret&&-1!==a.data.ret)o.hide(),d.showTips("签到失败"),b&&b({
result:-1,data:null});else{var c=a.data;m.processRewardActInfo(c),c.rewardList=(c.rewardList||[]).concat(m.amsAct.rewardActInfo.slice(c.rewardList.length)),o.hide(),b&&b({result:0,data:null}),m.signInfo=c,
m.renderSignSucDialog(m.signInfo),g.dispatchEvent("widget_sign_suc",{},{echo:!1,broadcast:!0,domains:["*.qq.com"]}),$("#widget_sign_entry").hide()}}))},m.processRewardActInfo=function(a){a&&a.rewardActInfo&&(m.amsAct.rewardActInfo=$.extend(!0,m.amsAct.rewardActInfo,a.rewardActInfo));
},m.renderSignSucDialog=function(a){for(var c=arguments.callee,d=0,h=a.rewardList,j=0,n=0;n<h.length;n++)h[n].dayLimit<=a.singedDayOfMonth&&(d=n+1,h[n].isGot?h[n].stateClass="finished":(j++,m.signInfo&&(m.signInfo.rewardTimes=j),
h[n].stateClass="will-finished")),0==n?h[n].guideClass="left":1==n?h[n].guideClass="lef2":2==n?h[n].guideClass="right2":3==n&&(h[n].guideClass="right");var o=["https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-man1_c93672f56cb309d0ed1f5c1c125ca5bc.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-man2_f3c81472824869fed1e85153ba1b9bc6.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-man3_bf949027e13faea6d366ae0bf99c728d.png?_bid=354&max_age=31536000","https://cdn.vip.qq.com/club/client/comic/release/img/index/sign-in/sign-in-man4_13ed163d1db4f38c0ecfdfe878dc248b.png?_bid=354&max_age=31536000"];
i.ping(o[d>3?3:d]),a&&a.rewardList&&a.rewardList.length&&k.lockResult(function(){for(var f,h,i=0;i<arguments.length;i++)arguments[i]&&("isSVIP"==arguments[i][0]?f=arguments[i][1]:"recBook"==arguments[i][0]&&(h=arguments[i][1]));
0==$("#widget_sign_dialog").length&&$("body").append('<div id="widget_sign_dialog"></div>');var k="";k=a.isNewUser?f?"新svip奖励翻翻，获得8萌点":"新用户奖励翻倍，获得4萌点":f?"svip奖励翻倍，获得4萌点":"签到成功，获得2萌点",$("#widget_sign_dialog").html(e.get(m.tpl.dialog,{
rewardList:a.rewardList,words:k,singedDayOfMonth:a.singedDayOfMonth,recBook:h,state:d,rewardTimes:j,isNoTop:!m.dividePosition,isSticky:m.dividePosition&&$(window).scrollTop()>=m.dividePosition},e.getInstance({
action:b}))),l.send({page_id:m.pageId,oper_obj_type:"1",oper_obj_id:10082}),c.isBind||(c.isBind=!0,setTimeout(function(){$("#widget_sign_dialog").on("touchstart mousedown",".script-state",function(a){var b=($(a.target).attr("id")||"").replace("widget_sign_state_","");
b&&($("#widget_sign_pop_"+b).hasClass("show")||($("#widget_sign_pop_"+b).addClass("show"),l.send({page_id:m.pageId,oper_obj_type:"2",oper_obj_id:200517,ses_id:b})))}),$("#widget_sign_dialog").on("touchend touchcancel mouseup",function(a){
$(".sign-in-pop-hint").removeClass("show")})},0),g.android&&g.invoke("mqq.ui.setTitleButtons",{left:{callback:function(){$(".dialog-sign-in").hasClass("show")?$(".dialog-sign-in").removeClass("show"):g.invoke("mqq.ui.popBack",function(){});
}}}))},function(a){return g.invoke("mqq.data.getVipType",{uin:f.getUserId()},function(b){var c=b&&b.data&&3==b.data.type;a("isSVIP",c)}),m.getRecommendBook({},function(b){a("recBook",b)}),2})},b.clickRecBook=function(a,b){
l.send({page_id:m.pageId,oper_obj_type:"2",oper_obj_id:200516,ret_id:b.id}),setTimeout(function(){var a=f.createUrl("detail",{id:b.id,_bid:354,_cwv:1,pos:m.pageId});d.openComicDetail(a)},50)},b.clickGetReward=function(a){
var b=arguments.callee,c=$(a.target);if(!b.requesting&&m.signInfo&&m.signInfo.rewardList){var e=m.signInfo.rewardList,f=m.signInfo;$(e).each(function(a,e){if(f.singedDayOfMonth>=e.dayLimit&&0===e.isGot){
var h=e.id;return b.requesting=!0,o.show(),$(".sign-in-gift-wrap").removeClass("gift-animation"),p.getSignReward(h,function(h){o.hide(),h&&0===h.ret?(e.isGot=1,f.rewardTimes--,$("#widget_sign_reward_coin").html("萌点+"+e.rewardCoin),
$("#widget_sign_reward_exp").html("经验+"+e.rewardExp),$(".sign-in-content").addClass("show-gift"),$(".sign-in-gift-wrap").addClass("gift-animation"),$("#widget_sign_state_"+(a+1)).addClass("finished").removeClass("will-finished"),
0==f.rewardTimes&&c.addClass("disabled"),g.dispatchEvent("widget_sign_reward",{},{echo:!1,broadcast:!0,domains:["*.qq.com"]})):d.showTips("领取失败"),b.requesting=!1}),l.send({page_id:m.pageId,oper_obj_type:"2",
oper_obj_id:20245,ret_id:a+1}),!1}})}},b.closeDialog=function(a){$(".dialog-sign-in").removeClass("show"),l.send({page_id:m.pageId,oper_obj_type:"2",oper_obj_id:20246})}});
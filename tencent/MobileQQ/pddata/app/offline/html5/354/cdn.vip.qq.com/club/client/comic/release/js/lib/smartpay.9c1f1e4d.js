define("lib/smartpay",[],function(require,exports,module){!function(exports){var PAYSRC="",inputParams={},jsExecuteTime=(new Date).getTime();window._smartPay={jsExecutePoint:{isFirstLoad:!0}};for(var isErrorForceVIP=!1,isAction=!1,isCancelledPay=!1,isLimit=!1,cancelPayType="",isUseWechatSkeyPay=!1,payboxVisible=!1,isQQwalletOpened=!1,isForceDisAutoPay=!1,LIB={
ENV:{qqapi:"qqapi",android_qw:"android_qw",qw_util:"qw_util",dc_report:"qw_util",pay_box:"pay_box",pay_box_iap:"pay_box_iap",midas:"midas"},EXP:{qqapi:'typeof mqq != "undefined" && typeof mqq.pay != "undefined" && typeof mqq.pay.pay != "undefined" && typeof mqq.support != "undefined" && typeof mqq.device != "undefined" && typeof mqq.ui != "undefined" && typeof mqq.ui.showDialog != "undefined" && typeof mqq.compare != "undefined" && typeof mqq.data != "undefined" && typeof mqq.data.getFriendInfo != "undefined" && typeof mqq.ui.setLoading != "undefined"',
android_qw:'typeof qw != undefined && typeof qw.pay != "undefined" && typeof qw.pay.openSuperVip != "undefined"',qw_util:'typeof qw.util != "undefined" && typeof qw.util.getCSRFToken != "undefined" && typeof qw.DCReport != "undefined"',
pay_box:'typeof qw.smartPay != "undefined" && typeof qw.smartPay.PayBox != "undefined"',pay_box_iap:'typeof qw.smartPay != "undefined" && typeof qw.smartPay.PayBoxIAP != "undefined"',midas:'typeof Midas != "undefined" && typeof Midas.openService != "undefined"'
},FILE:{qqapi:"//pub.idqqimg.com/qqmobile/qqapi.js?max_age=2592000&_bid=152&t=201404211",android_qw:"//cdn.vip.qq.com/club/platform/lib/pay/smartpay.lib.util.js?_bid=193&t=20170120",qw_util:"//cdn.vip.qq.com/club/platform/lib/pay/smartpay.lib.util.js?_bid=193&t=20170120",
pay_box:"//cdn.vip.qq.com/club/platform/lib/pay/smartpay.lib.paybox.js?_bid=193&t=20170329",pay_box_iap:"//cdn.vip.qq.com/club/platform/lib/pay/smartpay.lib.paybox-iap.js?_bid=193&max_age=2592000&t=20170627",
midas:"//midas.gtimg.cn/h5pay/js/api/midas.js?max_age=2592000"},IS_CROSS:{qqapi:!1,android_qw:!1,qw_util:!1,pay_box:!1,pay_box_iap:!1,midas:!1}},PAY_BOX_CSS={normal:"//i.gtimg.cn/vipstyle/mobile/client/vipcommon/pay/v1/release/css/dialog_noiap/style.css?_bid=193&t=20170320&max_age=86400000",
iap:"//imgcache.qq.com/vipstyle/mobile/client/common_pay/v2.2/css/common_pay_svipiap.css?v=20170520&max_age=86400000"},SERVICE_TYPE={vip:{code:"LTMCLUB",price:10,name:"QQ会员"},svip:{code:"CJCLUBT",price:20,
name:"超级会员"},sqq:{code:"XXSQQM",price:10,name:"超级QQ"},xyvip:{code:"XYLMBY",price:20,name:"星影会员"}},ANDROID_NEW={offerId:"{offerid}",userId:"{uin}",serviceCode:"{serviceType}",serviceName:"{serviceName}",
openType:"{openType}",channel:"{channel}",unit:"个月",openMonth:"{openMonth}",remark:"",aid:"{aid}",discountId:"{mp}",isAutoPay:"{isAutoPay}",isCanChange:"{isCanChange}",upgradeServicePrice:"10",maxUpgradeMonth:"{maxUpMonth}",
openServicePrice:"{openServicePrice}"},ANDROID_OLD={offerId:"{offerId}",userId:"{userId}",serviceCode:"{serviceType}",serviceName:"{serviceName}",aid:"{aid}",isCanChange:"{isCanChange}",isAutoPay:"{isAutoPay}",
openMonth:"{openMonth}",channel:"{channel}",discountId:"{mp}"},IOS_PAY_PARA={pf:"qq_m_qq-2001-iap-{aid}",pfkey:"pfkey",product_id:"{product_id}",product_type:"{product_type}",pay_item:"{pay_item}",qq_product_id:"{qq_product_id}",
qq_product_name:"{qq_product_name}",quantity:1,disable_retry_alert:"{disable_retry_alert}",is_deposit_game_coin:0,app_id:"{app_id}",apple_pay_source:"vip_center",var_item:"aid={aid}&appid={app_id}&mp={mp}product_id={product_id}"
},VIP_USER_PARA={type:"{type}",uin:"{uin}",aid:"{aid}",month:"{openMonth}",isCanChange:"{isCanChange}",isAutoPay:"{isAutoPay}",code:"{serviceType}",mp:"{mp}"},WECHAT_PARA={type:"{type}",uin:"{uin}",aid:"{aid}",
month:"{openMonth}",isCanChange:"{isCanChange}",isAutoPay:"{isAutoPay}",code:"{serviceType}",offerid:"{offerid}",mp:"{mp}"},DEFAULT_SERVICE_CONFIG={h5:{vip:{serviceType:"LTMCLUB",type:"vip",openMode:1,
offerid:"1450000515"},svip:{serviceType:"CJCLUBT",type:"svip",openMode:1,offerid:"1450000516"}},android:{vip:{offerid:"1450000515",serviceType:"LTMCLUB",type:"vip",openMode:1,openType:2,serviceName:"QQ会员"
},svip:{offerid:"1450000516",serviceType:"CJCLUBT",type:"svip",openMode:1,openType:2,serviceName:"超级会员"}},iap:{vip:{},svip:{}},iapauto:{vip:{},svip:{}}},IAP_MONTH={1:{product:"onemonth2"},3:{product:"threemonths2"
},6:{product:"sixmonths2"},12:{product:"twelvemonths2"}},IAP_TYPE=["vip","svip"],i=0;i<IAP_TYPE.length;i++)for(var o in IAP_MONTH)DEFAULT_SERVICE_CONFIG.iap[IAP_TYPE[i]][o]={app_id:"svip"==IAP_TYPE[i]?"1450001397":"1450001396",
openMonth:o,pay_item:o,product_id:"com.tencent.mqq."+("svip"==IAP_TYPE[i]?"qqsvip":"qqvip")+".nonrenew."+IAP_MONTH[o].product,product_type:"4",qq_product_id:"2",qq_product_name:"svip"==IAP_TYPE[i]?"svip":"club",
type:IAP_TYPE[i]},DEFAULT_SERVICE_CONFIG.iapauto[IAP_TYPE[i]][o]={app_id:"svip"==IAP_TYPE[i]?"1450011469":"1450011468",openMonth:o,pay_item:o,product_id:"com.tencent.mqq."+("svip"==IAP_TYPE[i]?"qqsvip":"qqvip")+".autorenew."+o+"mons",
product_type:"2",qq_product_id:"2",qq_product_name:"svip"==IAP_TYPE[i]?"svip":"club",type:IAP_TYPE[i]};var SEND_SERVICE_QUERY={},Storage={set:function(a,b){if("undefined"!=typeof localStorage&&JSON)try{
localStorage.setItem(a,JSON.stringify(b))}catch(c){}},get:function(a){var b=null;if("undefined"!=typeof localStorage&&JSON)try{var c=localStorage.getItem(a);c&&(b=JSON.parse(localStorage.getItem(a)))}catch(d){}
return b}},monitorF=function(a){if("function"!=typeof a)return!1;if(a.wraped)return a;var b=function(){try{a.apply(this,arguments)}catch(b){try{var c={js_function:"monitorF",inputParams:inputParams},d=(a.toString()||"").replace(/\s*/g,"").substring(0,200);
reportDC(cookie_uin,3,document.cookie,c,"smartPay.js err info :"+b.toString()+" ---------- caller : "+d)}catch(b){}throw new Error("monitor catch - "+b.toString())}};return b.wraped=!0,b},monitor=function(a){
if("function"==typeof a)return monitorF(a);if("object"==typeof a)for(var b in a)"function"==typeof a[b]&&(a[b]=monitor(a[b]))},androidNormalPay=function(a,b,c){return a.isSendService&&a.sendServiceUin&&mqq.compare("5.2")>=0&&(b.provideUin=a.sendServiceUin,
b.provideType="uin"),b.mp=getMpByType(b.mp,a.type),"function"==typeof window._SMARTPAY_AUTO_TEST_LISTENER_?(_SMARTPAY_AUTO_TEST_LISTENER_(b,"andorid"),!1):void mqq.tenpay.openService(b,c)},_openSuperVip=function(a,b){
return"function"==typeof window._SMARTPAY_AUTO_TEST_LISTENER_?(_SMARTPAY_AUTO_TEST_LISTENER_(a,"andorid"),!1):(OpenService.userInfo.uin==a.userId&&(a.other="wx_order_contract=1",a.autoJump=1,reportDC(cookie_uin,51,"",a)),
void qw.pay.openSuperVip(a,b))},openSuperVip=monitor(_openSuperVip),IOS_PAY={aid:"",uin:"",payparam:{},callback:function(){},isDoingPay:!1,isReportPay:!1,showAutoPayFailGuide:!1,isIapAutoPay:!1,osType:/iPad/.test(navigator.userAgent)?"ipad":"iphone",
iosPay:function(a,b,c,d){if("function"==typeof window._SMARTPAY_AUTO_TEST_LISTENER_)return _SMARTPAY_AUTO_TEST_LISTENER_(b,"iap"),!1;if(isNewDevice&&isVipServiceType(a.type))return goVip({uin:c.uin,type:a.type,
month:a.month,aid:a.aid,isCanChange:"undefined"!=typeof a.isCanChange?a.isCanChange:!0}),!1;setLoading(!0),IOS_PAY.isIapAutoPay=a.isAutoPay,qw.util.isIphone&&mqq.compare("7.1.0")>=0?(IOS_PAY.showAutoPayFailGuide=!0,
b.disable_retry_alert=1):b.disable_retry_alert=0;var e=getAidByOS(a.aid);IOS_PAY.aid=e,IOS_PAY.uin=c.uin,IOS_PAY.callback=d||function(){},requireLib(LIB.ENV.qqapi,function(){IOS_PAY.do_iospay(b)})},iospay_cb:function(a,b){
"function"==typeof IOS_PAY.callback&&IOS_PAY.callback(a,b,"ios"),IOS_PAY.isReportPay=!0},iapCallbackGuide:function(a){3==a.ret&&IOS_PAY.isIapAutoPay&&-1!=a.msg.indexOf("无法连接到 iTunes Store(2")&&1!=isForceDisAutoPay?(isForceDisAutoPay=!0,
mqq.ui.showDialog({title:"温馨提示",text:"抱歉，由于网络原因或该Apple ID已购买过自动续费服务，本次购买自动续费服务失败。您可以购买非自动续费服务！",cancelBtnText:"确定",needOkBtn:!1},function(b){"function"==typeof OpenService.config.onPayCallback&&OpenService.config.onPayCallback(a);
})):3==a.ret&&-1!=a.msg.indexOf("设置完成(2_0)")&&1!=isForceDisAutoPay?(isForceDisAutoPay=!0,mqq.ui.showDialog({title:"温馨提示",text:"抱歉，由于该Apple ID已为其他QQ号购买过自动续费服务，本次设置完成仅对苹果已订阅的自动续费做扣费时长修改，当前QQ号不会获得包月服务。您可以继续购买非自动续费服务！",
cancelBtnText:"确定",needOkBtn:!1},function(b){"function"==typeof OpenService.config.onPayCallback&&OpenService.config.onPayCallback(a)})):mqq.ui.showDialog({title:"温馨提示",text:"抱歉，由于网络或系统问题，购买服务失败，请尝试重新购买！",
okBtnText:"重新购买",cancelBtnText:"取消"},function(b){if(0==b.button){var c=OpenService.config||{};c.isCanChange=!1,1==c.upgrade?setTimeout(function(){qw.smartPay.upgradeService(c)},500):setTimeout(function(){
qw.smartPay.openService(c)},500)}else"function"==typeof OpenService.config.onPayCallback&&OpenService.config.onPayCallback(a)})},do_iospay:function(a){if(setLoading(!1),IOS_PAY.isDoingPay=!1,IOS_PAY.isReportPay=!1,
a&&a.ret&&0!=a.ret)alert("支付失败，请稍后再试！");else{a.aid=clearAid(a.aid);var b=fillObjData(IOS_PAY_PARA,a);b.product_type=parseInt(b.product_type,10),b.qq_product_id=parseInt(b.qq_product_id,10);var c=!1,d="";
if("club"==b.qq_product_name&&(d="vip",("1"==b.pay_item||"3"==b.pay_item)&&(c=!0)),"svip"==b.qq_product_name&&(d="svip","1"==b.pay_item&&(c=!0)),qw.util.isIOS&&isVipServiceType(b.qq_product_name)&&isLimit&&c)return reportDC(cookie_uin,70,"",a,"",a.aid,"",d,b.pay_item),
showDialog("抱歉，开通会员失败，请尝试重新开通。"),!1;mqq.pay.pay(b,IOS_PAY.iospay_cb)}}},_goVip=function(a){a.aid=getAidByOS(a.aid);var b="/club/platform/lib/pay/wv_proxy.html"==location.pathname&&mqq.compare("6.3")<0;if(mqq.iOS&&mqq.compare("6.2")>=0&&!parseInt(a.isMobile)&&!parseInt(a.isPrestore)&&""==a.disableChannel&&!a.isSendService&&!b){
if("function"==typeof window._SMARTPAY_AUTO_TEST_LISTENER_)return _SMARTPAY_AUTO_TEST_LISTENER_(a,"h5"),!1;var c=a.type in SERVICE_TYPE?a.type:"vip";return a.mp=getMpByType(a.mp,c),iosPayNew(a.uin,c,a.aid,a.month||a.openMonth||3,a.upgrade?2:1,a.isAutoPay,a.isCanChange,a.mp,a.couponId,OpenService.onPayCallback),
!1}requireLib(LIB.ENV.qw_util,function(){a.type in SERVICE_TYPE?a.type:"vip";if(a.mp=getMpByType(a.mp,a.type),a.code&&"sjsjch"==(a.code+"").toLowerCase()&&(a.disableChannel?a.disableChannel=-1==a.disableChannel.toString().indexOf("hfpay")?a.disableChannel+",hfpay":a.disableChannel:a.disableChannel="hfpay"),
"function"==typeof window._SMARTPAY_AUTO_TEST_LISTENER_)return _SMARTPAY_AUTO_TEST_LISTENER_(a,"h5"),!1;var b=a.code?(a.code+"").toLowerCase():"svip"==a.type?"cjclubt":"ltmclub";b="cjclub"==b?"cjclubt":b,
requireLib(LIB.ENV.midas,function(){var c=!1,d=a.month||a.openMonth||3,e=(qw.util.isAndroid||qw.util.isIphone)&&DEFAULT_SERVICE_CONFIG.android[a.type]?DEFAULT_SERVICE_CONFIG.android[a.type].offerid:"",f={
c:b,appid:e,n:d,ap:a.isAutoPay===!1?0:1,pf:"2101",open_detail:a.upgrade===!0&&"cjclubt"==b?"LTMCLUB_0,CJCLUB_"+31*d:"",aid:a.aid,u:a.isSendService?a.sendServiceUin:a.uin,as:1,sandbox:"1"==qw.util.getURLParam("sandbox")?1:"",
dc:a.disableChannel?a.disableChannel:"",mpid:a.mp?a.mp:"",hideInfo:a.hideInfo===!0?1:0,coupons_ext:a.coupons_ext||"",onSuccess:function(){c=!0},onClose:function(){c?OpenService.onPayCallback({resultCode:0
},"pay success"):OpenService.onPayCallback({resultCode:2},"pay back")}};Midas.openService(f)})})},isBindVIPEvent=!1,isClickVIPBtn=!1,vipUserData="",vipUserSource="",goVip=monitor(_goVip),_wechatPay=function(a){
var b={vip:"1450000151",svip:"1450000152"},c=qw.util.isWechat&&isUseWechatSkeyPay,d="callback_querywx"+ ++jsonCount,e="//cgi.vip.qq.com/qqvip/wx?callback="+d+"&g_tk="+qw.util.getCSRFToken({useWechatSkey:c
})+(c?"&logintype=1":"")+"&rand="+Math.random();window[d]=function(c){return 0!=c.ret?(showDialog("系统繁忙，请稍后再试"),!1):void requireLib(LIB.ENV.midas,function(){Midas.isOpenSucess=!1;var d=a.code?a.code.toLowerCase():"cjclubwx",e={
c:d,account:a.account,u:a.uin?a.uin:"",appid:a.offerid&&"wechat"==a.account?a.offerid:b[a.type],n:a.month,ap:a.isAutoPay?1:0,pf:"2101",aid:a.aid,as:1,dc:"qqcard,mcard,hfpay"+(""!=a.disableChannel?","+a.disableChannel:""),
sessionid:"hy_gameid",sessiontype:"wc_actoken",openid:c.openid,openkey:c.tkn,wxAppid2:c.appid,sandbox:"1"==qw.util.getURLParam("sandbox")?1:"",onSuccess:function(){Midas.isOpenSucess=!0,setCookie("wxvip_refresh","1",86400,".vip.qq.com");
},onClose:function(){Midas.isOpenSucess?OpenService.onPayCallback({resultCode:0},"pay success"):OpenService.onPayCallback({resultCode:2},"pay back")}};Midas.openService(e)})},loadScript(e)},wechatPay=monitor(_wechatPay),isCanOpenService=function(a,b,c){
var d=!1,a=c.type;if(isErrorForceVIP)return!0;if(b.recParam&&"1"==b.recParam.canOpen&&b.payParam)if(isVipServiceType(a)){for(var e=0;e<b.payParam.length;e++)if(b.payParam[e].type&&b.payParam[e].type==a.replace("!","")&&(c.isCanChange!==!1||"0"!=b.payParam[e].canOpen)){
d=!0;break}}else""!=b.payParam.type&&(d=!0);if(c.sendServiceUin&&b.uin!=c.sendServiceUin&&(d=!0),qw.util.isAndroid&&/.*Channel\/GooglePlay.*/.test(navigator.userAgent))return showDialog("当前版本暂不支持"+("xyvip"==a?"星影会员":"QQ会员")+"业务购买！您可通过电脑登录vip.qq.com了解会员详情。"),
!1;if(!d){setLoading(!1);var f=b.recParam&&b.recParam.canNotOpenTips?b.recParam.canNotOpenTips:"您无法使用当前方式开通服务，请尝试其他方式。";b.recParam&&1==b.recParam.is_bindwx?showDialog(f,null,{text:"开通超级会员",fn:function(){
c.type="svip",qw.smartPay.openService(c)}},{text:"取消",fn:function(){}}):showDialog(f)}return d},onPayCallbackFunction=null,showDialog=function(a,b,c,d){requireLib(LIB.ENV.qqapi,function(){var e=function(){
"function"==typeof onPayCallbackFunction&&(qw.util.isIOS?onPayCallbackFunction(6,"pay box cancel"):onPayCallbackFunction({ret:1,msg:"pay box cancel"}))};if(qw.util.isAndroid||qw.util.isIOS){var f={title:b||"温馨提示",
text:a};"undefined"!=typeof c&&c.text&&"function"==typeof c.fn&&(f.okBtnText=c.text||"确定"),"undefined"!=typeof d&&d.text&&"function"==typeof d.fn?f.cancelBtnText=d.text||"关闭":f.needCancelBtn=!1,mqq.ui.showDialog(f,function(a){
setLoading(!1),0==a.button?"function"==typeof c.fn&&c.fn():"function"==typeof d.fn&&d.fn(),e()})}else loadScript("//imgcache.qq.com/club/mobile_web/msgbox.js?max_age=31536000",function(){if("undefined"!=typeof MsgBox){
var f=[];"undefined"!=typeof d&&d.text&&"function"==typeof d.fn&&f.push({text:d.text,click:function(){MsgBox.hide(),d.fn(),e()}}),"undefined"!=typeof c&&c.text&&"function"==typeof c.fn&&f.push({text:c.text,
click:function(){MsgBox.hide(),c.fn(),e()}}),0==f.length&&f.push({text:"确定",click:function(){MsgBox.hide(),e()}}),MsgBox.show({title:b||"温馨提示",texts:a,buttons:f})}else alert(a)})})};window.loadScriptRequest={};
var loadScript=function(src,callback,id,errorFn,isCrossOrigin){var cb_id="",jsonpFn=src.match("callback=([^&]+)");if(jsonpFn&&jsonpFn[1]&&(cb_id=jsonpFn[1],window.loadScriptRequest[cb_id]={load:!1,error:!1
}),id){var o;try{o=eval(id)}catch(e){}if(o)return callback()}if(-1==src.indexOf("g_tk=")&&src.indexOf(".php")>0){var token=qw.util.getCSRFToken(),srcSearch=src.match(/\?[\w&\.-=,\|%]*/);src=srcSearch&&"object"==typeof srcSearch&&srcSearch.length>0?src+"&g_tk="+token:src+"?g_tk="+token;
}var _=document.createElement("script");cb_id&&(_.id=cb_id),_.async="async",_.src=src;var hasBid=-1!=src.indexOf("_bid=");!isCrossOrigin||hasBid&&/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(navigator.userAgent)||_.setAttribute("crossOrigin","anonymous"),
_.onload=function(){"function"==typeof callback&&callback(),cb_id&&window.loadScriptRequest[cb_id]&&(window.loadScriptRequest[cb_id].load=!0)},_.onerror=function(){"function"==typeof errorFn&&errorFn(),
cb_id&&(window.loadScriptRequest[cb_id].error=!0)},document.getElementsByTagName("head")[0].appendChild(_),function(a,b,c){setTimeout(function(){a&&window.loadScriptRequest[a]&&window.loadScriptRequest[a].load===!1&&window.loadScriptRequest[a].error===!1&&"function"==typeof b&&(document.getElementById(a)&&(document.getElementById(a).src="",
document.getElementsByTagName("head")[0].removeChild(document.getElementById(a))),b(),reportDC(cookie_uin,7,c))},3e3)}(cb_id,errorFn,src)},preLoadPayboxSource=function(a){a||requireLib(LIB.ENV.pay_box,function(){});
var b="_pay_box_css_";if(!document.getElementById(b)){var c=a?PAY_BOX_CSS.iap:PAY_BOX_CSS.normal,d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.id=b,d.href=c,document.getElementsByTagName("head")[0].appendChild(d);
}},requireLib=function(type,callback){try{var _callback=monitor(callback);eval(LIB.EXP[type])?callback():(LIB.TIME=LIB.TIME||{},LIB.TIME[type]=(new Date).getTime(),loadScript(LIB.FILE[type],function(){
eval(LIB.EXP[type])&&callback();var img=new Image,plat=/Android/.test(navigator.userAgent)?"android":/(iPad|iPhone|iPod)/.test(navigator.userAgent)?"ios":"unknow";img.src="//report.huatuo.qq.com/code.cgi?appid=10096&domain=pay.vip.qq.com&platform="+plat+"&cgi=smartpay/"+type+"&type=1&code=0&time="+((new Date).getTime()-LIB.TIME[type]);
},null,function(){var a=new Image,b=/Android/.test(navigator.userAgent)?"android":/(iPad|iPhone|iPod)/.test(navigator.userAgent)?"ios":"unknow";a.src="//report.huatuo.qq.com/code.cgi?appid=10096&domain=pay.vip.qq.com&platform="+b+"&cgi=smartpay/"+type+"&type=2&code=-1&time="+((new Date).getTime()-LIB.TIME[type]);
},LIB.IS_CROSS[type]))}catch(ex){callback()}},fillObjData=function(a,b){var c=copyObj(a);for(var d in c)/\{[^\}]+\}/.test(c[d])&&(c[d]=c[d].replace(/\{[^\}]*\}/g,function(a){return"undefined"!=typeof b[a.slice(1,-1)]?b[a.slice(1,-1)]:"";
}));return c},copyObj=function(a){var b={};for(var c in a)b[c]=a[c];return b},mergeObj=function(a,b){for(var c in b)a[c]=b[c];return a},mergeObjExistAttr=function(a,b){for(var c in b)c in a&&(a[c]=b[c]);
return a},getMpByType=function(a,b){return a&&-1!=a.indexOf(",")?"svip"==b?a.split(",")[1]:a.split(",")[0]:a||""},formatTpl=function(a,b){return a.replace(/\{[^\}]*\}/g,function(a){return"undefined"!=typeof b[a.slice(1,-1)]?b[a.slice(1,-1)]:"";
})},getCookie=function(a){if(document.cookie&&""!=document.cookie)for(var b,c=document.cookie.split("; "),d=0,e=c.length,a=encodeURIComponent(a);e>d;d++)if(b=c[d].split("="),a==b[0])return decodeURIComponent(b[1]||"");
return null},setCookie=function(a,b,c,d){var e=new Date;parseInt(c)&&e.setTime((new Date).getTime()+1e3*parseInt(c)),document.cookie=a+"="+encodeURIComponent(b)+"; path=/; domain="+d+";"+(parseInt(c)?"; expires="+e.toGMTString():"");
},cookie_uin="";if(cookie_uin=getCookie("uin")||"0",cookie_uin=cookie_uin.replace(/^o?0*/,""),""==cookie_uin){var wx_openid=getCookie("wxvip_openid");cookie_uin=wx_openid?wx_openid:cookie_uin}var getLocalSmartPayInfo=function(a){
try{requireLib(LIB.ENV.qw_util,function(){"1"==qw.util.getURLParam("clearStorage")&&localStorage.clear()})}catch(b){}var c=Storage.get("smartpay_data_timestamp");return(new Date).getTime()-c>4e4&&a!==!0?null:Storage.get("smartpay_data_"+cookie_uin);
},setLocalSmartPayInfo=function(a,b){Storage.set("smartpay_data_"+cookie_uin,a),Storage.set("smartpay_data_timestamp",parseInt(b)?(new Date).getTime()+parseInt(b):(new Date).getTime())},setSmartPayData=function(aid,index,data){
if(!/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(navigator.userAgent)){var jsonData=null;try{jsonData="string"==typeof data?eval("("+data+")"):data}catch(ex){}jsonData&&0==jsonData.ret&&(setLocalSmartPayInfo(jsonData,3e4),
aid&&0==jsonData.ret&&jsonData.recParam&&setLocalAidInfo(aid,jsonData.recParam.hp,jsonData,3e4))}},getLocalUserInfo=function(){try{requireLib(LIB.ENV.qw_util,function(){"1"==qw.util.getURLParam("clearStorage")&&localStorage.clear();
})}catch(a){}var b=Storage.get("smartpay_userinfo_timestamp");return(new Date).getTime()-b>4e4?null:Storage.get("smartpay_userinfo_"+cookie_uin)},setLocalUserInfo=function(a){Storage.set("smartpay_userinfo_"+cookie_uin,a),
Storage.set("smartpay_userinfo_timestamp",(new Date).getTime())},getLocalAidInfo=function(a){try{requireLib(LIB.ENV.qw_util,function(){"1"==qw.util.getURLParam("clearStorage")&&localStorage.clear()})}catch(b){}
var c=Storage.get("smartpay_aid_"+cookie_uin)||{};for(var d in c)(new Date).getTime()-c[d].time>4e4&&delete c[d];return Storage.set("smartpay_aid_"+cookie_uin,c),"undefined"==typeof c[a]||(new Date).getTime()-c[a].time>4e4?null:c[a];
},setLocalAidInfo=function(a,b,c,d){var e=Storage.get("smartpay_aid_"+cookie_uin)||{};e[a]={h5:b,time:parseInt(d)?(new Date).getTime()+parseInt(d):(new Date).getTime(),data:c},Storage.set("smartpay_aid_"+cookie_uin,e);
},setFreezeInfo=function(a,b){var c=Storage.get("smartpay_freeze_info")||{};c={isFreeze:a,time:(new Date).getTime(),duration:b},Storage.set("smartpay_freeze_info",c),reportDC(cookie_uin,-1,"query cgi timeout or service busy");
},getIsFreeze=function(){var a=Storage.get("smartpay_freeze_info")||{};return a&&a.isFreeze===!0?(new Date).getTime()-a.time>60*parseInt(a.duration,10)*1e3?(setFreezeInfo(!1,0),!1):!0:!1},isVipServiceType=function(a){
return"vip"==a||"svip"==a||"!vip"==a||"!svip"==a||"club"==a},returnCodeReport=function(a,b,c){requireLib(LIB.ENV.qw_util,function(){try{a=parseInt(a,10)||a,qw.util.CGIReturn.report({domain:"cgi.vip.qq.com",
cgi:c,type:a>0?2:1,code:a,time:(new Date).getTime()-b,rate:1})}catch(d){}})},jsonCount=100,lastSSORequestTime=0,querySmartPayInfo=function(a,b){requireLib(LIB.ENV.qw_util,function(){var c="callback_querySmartPayInfo"+ ++jsonCount,d=!1,e=(new Date).getTime(),f=new RegExp("(/club/client/act/2017_yuewenRedBag/release/html/index.html|/club/client/act/2017_readRedBag/release/html/index.html|/club/themes/mobile/spring/html/hongbao.html|/club/themes/mobile/spring/html/wangzhe.html|/club/themes/mobile/act/diy_tpl/ztwzry/html/index.html)");
return e>new Date("2017/01/27 00:00:00").getTime()&&e<new Date("2017/01/28 00:00:00").getTime()&&(/aid1|aid2/.test(clearAid(a.aid))||f.test(location.href))&&(d=!0),d===!0||getIsFreeze()===!0?("function"==typeof b&&b({
ret:-99995}),!1):(window[c]=function(a){return function(d){if("undefined"==typeof d.ret&&"undefined"==typeof d.ssoRet)return!1;var e="h5Pay",f=!1;if(d&&"undefined"!=typeof d.ssoRet){if(f=!0,window.smartPaySSOQuery[c]&&window.smartPaySSOQuery[c].back===!0)return!1;
window.smartPaySSOQuery[c].back=!0,0==d.ssoRet&&"undefined"!=typeof d.data?(d="undefined"!=typeof JSON?JSON.parse(d.data):{},d&&"undefined"!=typeof d[10348]&&"undefined"!=typeof d[10348].data&&"undefined"!=typeof d[10348].data.payInfo&&"undefined"!=typeof d[10348].ret?(d={
uin:cookie_uin,ret:d[10348].ret,recParam:d[10348].data.payInfo.recParam,payParam:d[10348].data.payInfo.payParam},d&&"undefined"!=typeof d.recParam&&"undefined"!=typeof d.recParam[e]&&(d.recParam.hp=d.recParam[e],
delete d.recParam[e]),b(d)):b({})):(b({}),qw.reportSSOLog&&qw.reportSSOLog(JSON.stringify({uin:cookie_uin,info:"query sso error",data:d})))}else d&&"undefined"!=typeof d.recParam&&"undefined"!=typeof d.recParam[e]&&(d.recParam.hp=d.recParam[e],
delete d.recParam[e]),b(d);if("-99995"==d.ret){var g=d.recParam&&d.recParam.disableTime?d.recParam.disableTime:5;setFreezeInfo(!0,g)}returnCodeReport(d.ret,a,f?"/unipay/init_sso":"/unipay/init")}}((new Date).getTime()),
void checkPlatformCallback({wechat:function(){},ios:function(){},adr_new:function(){},adr_old:function(){},other:function(){}},function(d){d={adr_new:"android",adr_old:"android"}[d]||d,d=qw.util.isIOS?qw.util.isIpad?"ipad":qw.util.isTimIphone?"timIphone":"iphone":d;
var e=qw.util.isWechat&&isUseWechatSkeyPay,f="//cgi.vip.qq.com/qqvip/init?"+(a.friend_uin?"&uin="+a.friend_uin:"")+"&aid="+clearAid(a.aid)+"&platform="+d+"&version="+(mqq.QQVersion||0)+"&isbreak="+(isNewDevice||0)+"&callback="+c+"&g_tk="+qw.util.getCSRFToken({
useWechatSkey:e})+(e?"&logintype=1":"")+"&rand="+Math.random();if(window.smartPaySSOQuery=window.smartPaySSOQuery||{},(new Date).getTime()-lastSSORequestTime>1500&&!a.friend_uin&&(qw.util.isAndroid||qw.util.isIphone)&&mqq.compare("5.7.0")>=0&&"0"!=qw.util.getURLParam("sso")&&!qw.util.isRDMQQ){
lastSSORequestTime=(new Date).getTime();var g="VipPayLogicSvc",h=10348,i={},j=3e3;qw.util.isIOS?(j=4e3,getIden(function(b){i[h]={userInfo:{uin:cookie_uin,aid:clearAid(a.aid||""),clientIp:"",isIOSJailbreak:1===isNewDevice?1:0,
platform:d,deviceId:b,version:mqq.QQVersion||0}},window.smartPaySSOQuery=window.smartPaySSOQuery||{},window.smartPaySSOQuery[c]={back:!1},mqq.invoke("sso","uniAgent",{cmd:g+"."+h,needCookie:0,data:i},window[c]);
})):(i[h]={userInfo:{uin:cookie_uin,aid:clearAid(a.aid||""),clientIp:"",isIOSJailbreak:1===isNewDevice?1:0,platform:d,version:mqq.QQVersion||0}},window.smartPaySSOQuery=window.smartPaySSOQuery||{},window.smartPaySSOQuery[c]={
back:!1},mqq.invoke("sso","uniAgent",{cmd:g+"."+h,needCookie:0,data:i},window[c])),setTimeout(function(){window.smartPaySSOQuery[c]&&window.smartPaySSOQuery[c].back===!1&&(window.smartPaySSOQuery[c].back=!0,
b({}),setFreezeInfo(!0,1),qw.reportSSOLog&&qw.reportSSOLog(JSON.stringify({uin:cookie_uin,info:"query sso timeout"})))},j)}else qw.util.isIOS?getIden(function(a){f+="&remark_num="+a,loadScript(f,null,null,function(){
b({}),setFreezeInfo(!0,1)})}):loadScript(f,null,null,function(){b({}),setFreezeInfo(!0,1)})},{}))})},queryOpenServiceInfo=function(a,b){requireLib(LIB.ENV.qw_util,function(){var c="callback_queryOpenServiceInfo"+ ++jsonCount;
window[c]=function(a){return function(c){b(c),returnCodeReport(c.ret,a,"/unipay/open")}}((new Date).getTime()),checkPlatformCallback({wechat:function(){},ios:function(){},adr_new:function(){},adr_old:function(){},
other:function(){}},function(d){d={adr_new:"android",adr_old:"android"}[d]||d,d=qw.util.isIOS?qw.util.isIpad?"ipad":qw.util.isTimIphone?"timIphone":"iphone":d;var e=qw.util.isWechat&&isUseWechatSkeyPay,f="//cgi.vip.qq.com/qqvip/op?&type="+a.type+"&aid="+clearAid(a.aid)+"&platform="+d+"&version="+(mqq.QQVersion||0)+"&isbreak="+(isNewDevice||0)+"&callback="+c+"&g_tk="+qw.util.getCSRFToken({
useWechatSkey:e})+(e?"&logintype=1":"")+"&rand="+Math.random();loadScript(f,null,null,function(){b({})})},{})})},queryUserInfo=function(a,b){requireLib(LIB.ENV.qw_util,function(){var c="callback_queryUserInfo"+ ++jsonCount;
window[c]=function(a){b(a)};var d="//cgi.vip.qq.com/profile/userInfo?&callback="+c+"&g_tk="+qw.util.getCSRFToken()+"&data="+a+(qw.util.getUserSid()?"&g_tk_type=1&sid="+qw.util.getUserSid():"")+"&rand="+Math.random();
loadScript(d)})},getUserInfo=function(a,b){if(!isVipServiceType(b.type))return"function"==typeof a&&a({uin:cookie_uin}),!1;var c=getLocalUserInfo()||{};clearAid(b.aid);"undefined"!=typeof c.uin&&"undefined"!=typeof c.is_club&&"undefined"!=typeof c.is_superclub&&"undefined"!=typeof c.is_year_club&&"undefined"!=typeof c.today&&"undefined"!=typeof c.superclub_end_time&&"undefined"!=typeof c.club_end_time&&"undefined"!=typeof c.year_end_time&&"undefined"!=typeof c.level&&"undefined"!=typeof c.grow_value?"function"==typeof a&&a(c):requireLib(LIB.ENV.qw_util,function(){
var b="uin,is_club,is_superclub,is_year_club,today,club_end_time,year_end_time,year_end_time,superclub_end_time,user_tag,level,grow_value";queryUserInfo(b,function(b){setLocalUserInfo(b),"function"==typeof a&&a(b);
})})},getSmartPayInfo=function(a,b,c){var d=clearAid(a.aid),e=getLocalAidInfo(d);e=null!=e?e.data:{},isVipServiceType(a.type)&&"undefined"!=typeof e.recParam&&"undefined"!=typeof e.payParam&&0==isUseWechatSkeyPay?(e&&e.recParam&&"undefined"!=typeof e.recParam&&("undefined"!=typeof e.recParam.rmkc&&1==e.recParam.rmkc||"undefined"!=typeof e.recParam.qic&&e.recParam.qic>=2||"undefined"!=typeof e.recParam.dpc&&e.recParam.dpc>=3)&&(isLimit=!0),
e.recParam.hp=1==e.recParam.hp,"function"==typeof b&&b(e)):requireLib(LIB.ENV.qw_util,function(){querySmartPayInfo(a,function(e){if(0!=e.ret&&(e=getLocalSmartPayInfo(!0)||{},e&&0!=e.ret)){var f=DEFAULT_SERVICE_CONFIG[qw.util.isAndroid?"android":qw.util.isIOS?"iap":"h5"]||{},g=[],h={
canOpen:1,type:"svip",buttonText:"开通超级会员",recType:"nvip.kt_svip"};for(var i in f)if(qw.util.isIphone)for(var j in f[i])g.push(f[i][j]);else g.push(f[i]);e.payParam=g,e.recParam=h,e.ret=0,e.uin=cookie_uin;
}var k=e.recParam||{};return k?isErrorForceVIP=!1:(e={},isErrorForceVIP=!0),"undefined"!=typeof k.hp?k.hp=1==k.hp:k.hp=!1,setLocalAidInfo(d,k.hp,e),isVipServiceType(a.type)&&setLocalSmartPayInfo(e),k&&"undefined"!=typeof k&&("undefined"!=typeof k.rmkc&&1==k.rmkc||"undefined"!=typeof k.qic&&k.qic>=2||"undefined"!=typeof k.dpc&&k.dpc>=3)&&(isLimit=!0),
getIsFreeze()&&0==e.ret&&(setFreezeInfo(!1,0),c!==!0)?!1:("function"==typeof b&&b(e),void(k&&"undefined"!=typeof k&&("undefined"!=typeof k.rmkc&&1==k.rmkc&&reportDC(cookie_uin,68,e),"undefined"!=typeof k.qic&&k.qic>=2&&reportDC(cookie_uin,67,e),
"undefined"!=typeof k.dpc&&k.dpc>=3&&reportDC(cookie_uin,66,e))))})})},queryFriendInfo=function(a,b,c){return(a=parseInt(a,10)||"")?a in SEND_SERVICE_QUERY?("function"==typeof c&&c(SEND_SERVICE_QUERY[a]),
!1):void querySmartPayInfo({friend_uin:a,aid:b},function(b){0==b.ret&&(SEND_SERVICE_QUERY[a]=b,"function"==typeof c&&c(SEND_SERVICE_QUERY[a]))}):!1},checkPlatformCallback=function(a,b,c){requireLib(LIB.ENV.qqapi,function(){
requireLib(LIB.ENV.qw_util,function(){var d="other";if(qw.util.isAndroid){var e=qw.util.androidVersion;if(qw.util.compareVer("4.7",e))d="adr_new";else{d=qw.util.compareVer("4.6.1",e)?"adr_old":"other";try{
mqq.support("mqq.tenpay.openService")||(d="other")}catch(f){}}}else qw.util.isIOS?(d="ios",qw.util.isIOS&&c.hp===!0&&(d="other")):qw.util.isWechat&&isUseWechatSkeyPay&&(d="wechat");(c.hp===!0&&!qw.util.isIOS&&!qw.util.isWechat||isErrorForceVIP===!0&&!qw.util.isIOS&&!qw.util.isWechat||isNewDevice&&qw.util.isIOS&&!qw.util.isWechat)&&(d="other"),
"undefined"==typeof c.disableChannel||""==c.disableChannel||qw.util.isIOS||qw.util.isWechat||(d="other");var g=monitor(a[d]);"function"==typeof g&&(g(),"function"==typeof b&&b(d))})})},getURLParam=function(a,b){
var c="",d=!1;if(b=b||window.location.search,0==b.indexOf("?")&&b.indexOf("=")>1)for(var e=b.substring(1,b.length).split("&"),f=0;f<e.length&&!d;)e[f].indexOf("=")>0&&e[f].split("=")[0].toLowerCase()==a.toLowerCase()&&(c=e[f].split("=")[1],
d=!0),f++;return unescape(c)},setAidTail=function(a){if(!a)return a;if(!PAYSRC){var b=getURLParam("pay_src")||"";PAYSRC=b}return a.indexOf("@")>0?a:PAYSRC?a+"@"+encodeURIComponent(PAYSRC):a},clearAid=function(a){
return a&&a.indexOf("@")>-1&&(a=a.substring(0,a.indexOf("@"))),a&&a.indexOf("!")>-1&&(a=a.substring(0,a.indexOf("!"))),a&&a.indexOf("$")>-1&&(a=a.substring(0,a.indexOf("$"))),a},openUrl=function(a,b){"undefined"==typeof b&&(b=1);
var c={"/club/themes/mobile/bq/html/index.html":"","/club/themes/mobile/head_pendant/html/index.html":""};window.mqq&&mqq.compare("4.6")<0||mqq.android&&location.pathname in c?location.href=a:window.mqq&&window.mqq.ui&&window.mqq.ui.openUrl?(b=parseInt(b),
mqq.ui.openUrl({url:a,target:b,style:1})):location.href=a},iosPayNew=function(a,b,c,d,e,f,g,h,i,j){var k,l,m;"svip"==b?(k="1450000516",l="CJCLUBT",m="超级会员"):"sqq"==b?(k="1450000528",l="XXSQQM",m="超级QQ"):(k="1450000515",
l="ltmclub",m="QQ会员");var n={offerId:k,userId:a+""||"",serviceCode:l,serviceName:m,openType:e,channel:"",unit:"个月",openMonth:parseInt(d)||3,remark:"",aid:c,discountId:h,isAutoPay:f,couponId:i||"",isCanChange:"undefined"!=g?g:!0
};setTimeout(function(){mqq.invoke("pay","upgradeSuperVip",n,j)},200)},getAidByOS=function(a){a=a||"";var b=a,c=/^mvip(.+)$/,d=a.match(c);return qw.util.isIOS&&-1==a.indexOf("ios")&&null!=d&&(b="mios"+d[1]),
qw.util.isAndroid&&/^mios(.+)/.test(a)&&(b=a.replace("mios","mvip")),b},reportDC=function(a,b,c,d,e,f,g,h,i,j,k,l){f&&f.indexOf("!")>-1&&(f=f.substring(0,f.indexOf("!"))),/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(navigator.userAgent)&&1==b&&(1==i||"vip"==h&&3==i)&&handleRemarkCount(),
requireLib(LIB.ENV.dc_report,function(){requireLib(LIB.ENV.qw_util,function(){var m="";"1"!=b&&"5"!=b&&"0"!=b||1!=isCancelledPay||(m=";isCanceledPay_"+cancelPayType),qw.DCReport({uin:a||cookie_uin,platform_type:2,
pay_type:b,js_err:e||"",user_info:"object"==typeof c?JSON.stringify(c):c,pay_info:("object"==typeof d?JSON.stringify(d):d)+m,mqq_ver:qw.util.isAndroid?qw.util.androidVersion:qw.util.isIOS&&"undefined"!=typeof mqq?mqq.QQVersion:"-1",
mqq_os:qw.util.isAndroid?"android":qw.util.isIOS?"ios":qw.util.isWechat?"wechat":"other",ext1:location.host,ext2:f||"",ext3:"undefined"!=typeof g?g:"",ext4:getDeviceInfo(),ext6:h||"",ext7:i||"",ext8:j||"",
ext9:k||"",ext10:l||""})})})},handleRemarkCount=function(){var a="callback_recordRmkCnt"+ ++jsonCount;window[a]=function(a){return function(a){}}((new Date).getTime()),getIden(function(b){lastSSORequestTime=(new Date).getTime();
var c="VipPayLogicSvc",d=10872,e={};e[d]={stPayRecord:{sUin:cookie_uin,uUpdateTime:parseInt(lastSSORequestTime/1e3),sDevice:b}},mqq.invoke("sso","uniAgent",{cmd:c+"."+d,needCookie:0,data:e},window[a])});
},curDeviceInfo={},isNewDevice=!1,remarkNum="",getDeviceInfo=function(){return curDeviceInfo.systemName?JSON.stringify(curDeviceInfo):(requireLib(LIB.ENV.qqapi,function(){try{mqq.device.getDeviceInfo(function(a){
if(a){curDeviceInfo.systemName=a.systemName||"unknown",curDeviceInfo.model=a.model||"unknown",curDeviceInfo.modelVersion=a.modelVersion||"unknown",curDeviceInfo.systemVersion=a.systemVersion||"unknown";
var b=a.identifier||"";remarkNum=b;var c=a.msf_identifier||"",d=a.idfa||"";curDeviceInfo.identifier=b+"|"+c+"|"+d}}),mqq.device.getNetworkType(function(a){var b={0:"unknown",1:"wifi",2:"2G",3:"3G",4:"4G"
};curDeviceInfo.network=b[a]||"none"}),mqq.compare("5.2.0")>=0&&mqq.iOS&&mqq.invoke("device","isJailBreakend",function(a){isNewDevice=a.isJailBreakend,curDeviceInfo.breakMqq=isNewDevice?"yes":"no",mqq.compare("6.7.0")>=0&&mqq.iOS&&mqq.invoke("pay","getProductInfoStatus",{
productIds:new Array("")},function(a){a&&(0==a.productInfoStatus&&mqq.invoke("pay","getProductInfoStatus",{productIds:new Array("com.tencent.mqq.qqsvip.nonrenew.onemonth2")},function(a){a.productInfoStatus>0&&(curDeviceInfo.officially="yes"),
a.productInfoStatus<0&&(isNewDevice=1,curDeviceInfo.officially="no")}),a.productInfoStatus>0&&(curDeviceInfo.officially="yes",mqq.invoke("pay","getProductInfoStatus",{productIds:new Array("com.tencent.mqq.qqsvip.nonrenew.onemonth2")
},function(a){})),a.productInfoStatus<0&&(isNewDevice=1,curDeviceInfo.officially="no"))})})}catch(a){}}),"not ready")};getDeviceInfo();var setLoading=function(a){requireLib(LIB.ENV.qqapi,function(){a?(mqq.ui.setLoading({
visible:!0}),setTimeout(function(){mqq.ui.setLoading({visible:!0})},200)):mqq.ui.setLoading({visible:!1})})},getDiffMonth=function(a,b){var c=864e5;return Math.floor((a-b)/(31*c))},getPayParams=function(a,b,c,d){
for(var e=b,f=e.recParam||{},g=e.payParam||{},c=c,h=a.type?a.type.replace("!",""):a.type,i={},j={userId:e.uin,uin:e.uin,channel:a.channel||"",isCanChange:!0,remark:a.remark||"",aid:a.aid,mp:getMpByType(a.mp,h)||"",
isAutoPay:"undefined"!=typeof a.isAutoPay?a.isAutoPay:!0},k=null,l=0;l<g.length;l++)if("undefined"!=typeof h&&g[l].type==h&&"0"!=g[l].canOpen){if(qw.util.isIOS&&"0"==f.hp&&a.month==g[l].pay_item){k=g[l],
isForceDisAutoPay===!1&&"undefined"!=typeof a.isAutoPay&&1==a.isAutoPay&&(k=DEFAULT_SERVICE_CONFIG.iapauto[h]||{},k=k[a.month]||{}),k.openMonth=a.month||3;break}if(a.upgrade!==!0&&d!==!0&&"1"==g[l].openMode||a.upgrade===!0&&"2"==g[l].openMode||d===!0&&"undefined"!=typeof g[l].openMode&&g[l].openMode==f.openMode){
k=g[l],k.openMonth=a.month||3;break}}if(a.isSendService===!0){var m=getSendFriendParams(a);if(!m.result)return!1;k=m.payData}null==k&&(k=DEFAULT_SERVICE_CONFIG[qw.util.isAndroid?"android":qw.util.isIOS?"iap":"h5"][h]||{},
k.openMonth=a.month||"3",qw.util.isIOS&&(k=k[a.month]||{})),j=mergeObj(j,k);var n=f.recType||"";f.recTips;checkPlatformCallback({wechat:function(){i=fillObjData(WECHAT_PARA,j)},ios:function(){j.aid=clearAid(j.aid),
i=fillObjData(IOS_PAY_PARA,j),i.product_type=parseInt(i.product_type,10),i.qq_product_id=parseInt(i.qq_product_id,10)},adr_new:function(){i=fillObjData(ANDROID_NEW,j),i.couponId=a.codeid||""},adr_old:function(){
i=fillObjData(ANDROID_OLD,j),i.couponId=a.codeid||""},other:function(){i=fillObjData(VIP_USER_PARA,j),i.coupons_ext=a.coupons_ext||"",i.couponId=a.codeid||""}},function(b){var d=checkVipActionLogic(f,i,a,b);
return d.result!==!0?!1:(i=d.payParams,i.aid=i.aid||a.aid,a.isAddAidTail&&(i.aid+="."+n),i.aid=setAidTail(i.aid),"adr_new"==b&&(i.openTitle=f.buttonText,i.upgradeTitle=f.buttonText),void("function"==typeof c&&c(i)));
},a)},getSendFriendParams=function(a){if(a.isSendService!==!0)return!1;var b={result:!1,payData:null},c=a.sendServiceUin,d=SEND_SERVICE_QUERY[c]||null;if(d&&d.payParam){for(var e=null,f=null,g=0;g<d.payParam.length;g++){
var h=d.payParam[g];h.type==a.type&&(2==h.openMode?f=h:e=h)}if((e||f)&&(b.payData=e||f||null,b.payData.openMonth=a.month||3,b.result=!0),null==b.payData)return showDialog("您的好友不支持赠送该服务。"),b;a.hp="1"==d.recParam.hp;
}else qw.util.isAndroid?b.payData=DEFAULT_SERVICE_CONFIG.android[a.type]||{}:(a.hp=!0,b.payData=DEFAULT_SERVICE_CONFIG.h5[a.type]||{}),b.payData.openMonth=a.month||3,b.result=!0;return d&&d.recParam&&"0"==d.recParam.canOpen||null==b.payData?(showDialog("您的好友已开通该服务，暂不支持赠送。"),
b):b},checkVipActionLogic=function(a,b,c,d){var e={result:!0,payParams:b},f={vip:"1450005239",svip:"1450005240"};if(isAction===!0){if(e={result:!1,payParams:null},"undefined"==typeof c.mp||"undefined"==typeof c.aid)return showDialog("缺少参数，必须同时传入MP与AID字段"),
e;switch(d){case"ios":if("1"==a.is_prestore)return showDialog("您是手机付费用户，暂时无法参与此活动"),e;break;case"adr_new":b.offerId="svip"==c.type?f.svip:f.vip,"1"==a.is_prestore&&"LTMCLUB"==b.serviceCode?b.discountId=c.mp:delete b.discountId;
break;case"adr_old":b.offerId="svip"==c.type?f.svip:f.vip,"1"==a.is_prestore&&"LTMCLUB"==b.serviceCode?b.discountId=c.mp:delete b.discountId;break;case"other":b.disableChannel="qqcard,mcard,hfpay,wechat",
"1"==a.is_prestore&&"LTMCLUB"==b.code?b.mp=c.mp:delete b.mp}}return e.result=!0,e.payParams=b,e},loadCss=function(a,b,c){if(!a)return!1;if(document.getElementById(c))return"function"==typeof b&&b(),!1;var d=document.createElement("link");
d.rel="stylesheet",d.type="text/css",d.id=c,d.href=a,document.getElementsByTagName("head")[0].appendChild(d),"function"==typeof b&&b()},checkPayboxVisible=function(a){if(a&&a.isCanChange===!1)return!1;payboxVisible=!0;
var b=(new Date).getTime(),c=400,d=5,e=function(){if(!payboxVisible)return!1;var a=document.getElementById("_pay_box_mask_");if(a&&a.clientHeight>0){var f=new Image,g=/Android/.test(navigator.userAgent)?"android":/(iPad|iPhone|iPod)/.test(navigator.userAgent)?"ios":"unknow";
return f.src="//report.huatuo.qq.com/code.cgi?appid=10096&domain=pay.vip.qq.com&platform="+g+"&cgi=smartpay/paybox_visible&type=1&code=0&time="+((new Date).getTime()-b),!1}if(c-->=0)300>c&&20>d&&d++,setTimeout(e,d);else{
var f=new Image,g=/Android/.test(navigator.userAgent)?"android":/(iPad|iPhone|iPod)/.test(navigator.userAgent)?"ios":"unknow";f.src="//report.huatuo.qq.com/code.cgi?appid=10096&domain=pay.vip.qq.com&platform="+g+"&cgi=smartpay/paybox_visible&type=2&code=-1&time="+((new Date).getTime()-b);
}};c--,setTimeout(e,d)},OpenService={config:null,userInfo:null,payInfo:{},onPayCallback:function(a,b,c){var d=OpenService.config||{},e=c&&"ios"==c,f=e?a:a?a.resultCode:-1,g=3;0==f?g=0:200==f?g=1:6!=f&&7!=f&&(e||1!=f&&2!=f)?100==f&&(g=100):g=2,
qw.util.isIphone&&IOS_PAY.showAutoPayFailGuide&&3==g?IOS_PAY.iapCallbackGuide({ret:g,msg:e?b:a?a.resultMsg:"",result:a,payInfo:OpenService.config}):2==g&&0==isCancelledPay&&1!=d.disableQuitPay?(isCancelledPay=!0,
cancelPayType="40",loadCss("//imgcache.qq.com/vipstyle/mobile/client/common_pay/v2.2/css/common_pay_detain.css",function(){var c='<div class="common-pay-cnt" ontouchmove="return false">    <!-- 图标尺寸：131px 138px -->    <span class="detain-header" style="background-image: url(//imgcache.qq.com/vipstyle/mobile/client/common_pay/v2.2/pic/detain_icon.png)"></span>    <div class="common-pay-bd">        <h3>放弃不是你的性格</h3>    VIP尊贵生活只差一步！奔跑吧骚年~     </div>    <div class="common-pay-ft">        <!-- 添加disabled可变灰色不可点击 -->        <button type="button" class="common-pay-btn common-pay-btn-kt pay-btn-continue" id="_cancel_js_send_">继续支付</button>    </div>    <span class="common-pay-close detain-close" id="_cancel_js_close_">关闭</span>',f=document.createElement("div");
f.id="cancel_pay_tips",f.className="common-pay-dialog common-pay-detain common-pay-detain-icon common-pay-dialog-show",f.innerHTML=c,document.body.appendChild(f);var h=document.getElementById("_cancel_js_close_"),i=document.getElementById("_cancel_js_send_");
document.getElementById("cancel_pay_tips").addEventListener("touchmove",function(a){a.preventDefault()}),h.addEventListener("touchend",function(c){c.stopPropagation(),c.preventDefault(),setTimeout(function(){
document.getElementById("cancel_pay_tips")&&document.body.removeChild(document.getElementById("cancel_pay_tips"))},350),"function"==typeof d.onPayCallback&&d.onPayCallback({ret:g,msg:e?b:a?a.resultMsg:"",
result:a,payInfo:OpenService.config})}),i.addEventListener("touchend",function(a){a.stopPropagation(),a.preventDefault(),setTimeout(function(){document.getElementById("cancel_pay_tips")&&document.body.removeChild(document.getElementById("cancel_pay_tips"));
},350);var b=OpenService.config||{};b.isCanChange=!1,1==b.upgrade?setTimeout(function(){qw.smartPay.upgradeService(b)},500):setTimeout(function(){qw.smartPay.openService(b)},500),cancelPayType="41",setTimeout(function(){
isCancelledPay=!0},1e3)})},"cancel_pay_tips_css")):"function"==typeof d.onPayCallback&&setTimeout(function(){d.onPayCallback({ret:g,msg:e?b:a?a.resultMsg:"",result:a,payInfo:OpenService.config})},1e3);try{
0==f&&(Storage.set("smartpay_data_"+OpenService.userInfo.uin,""),Storage.set("smartpay_aid_"+OpenService.userInfo.uin,""));var h={js_function:isAction?"openServiceForAction_onPayCallback":"openService_onPayCallback",
cb_result:a,cb_msg:b,isAutoPay:"autopay_"+(OpenService.config.isAutoPay===!1&&"ios"!=c?0:1)},i=2;0==f?i=1:6!=f&&7!=f&&(e||1!=f&&2!=f)&&100!=f?200==f&&(i=8):i=5,e&&IOS_PAY.isReportPay&&(i=9),reportDC(OpenService.userInfo.uin,i,OpenService.userInfo,h,"",OpenService.config.aid,f,OpenService.config.type,OpenService.config.month),
0==f&&qw.util.isIOS&&OpenService.config.hp===!1&&(1==OpenService.config.month||"vip"==OpenService.config.type&&3==OpenService.config.month)&&(recordRemarkCount(),Storage.set("recordTime",(new Date).getTime()),
Storage.set("smartpay_data_"+cookie_uin,""),Storage.set("smartpay_aid_"+cookie_uin,""))}catch(j){}},openServiceCallback:function(a){OpenService.userInfo=a;var b=OpenService.config;return b.isSendService||isCanOpenService(b.type,a,b)?void getPayParams(b,a,function(c){
mergeObjExistAttr(c,b),checkPlatformCallback({wechat:function(){c.disableChannel=b.disableChannel||"",c.account="wechat"==a.recParam.account?"wechat":"",c.uin=a.uin?a.uin:"",OpenService.payInfo=copyObj(c),
wechatPay(c)},ios:function(){null!=a&&requireLib(LIB.ENV.qqapi,function(){IOS_PAY.iosPay(b,c,a,OpenService.onPayCallback)}),OpenService.payInfo=copyObj(c)},adr_new:function(){return setLoading(!0),b.isSendService&&mqq.compare("5.2")>=0?(c.provideUin=b.sendServiceUin,
c.provideType="uin",androidNormalPay(b,c,OpenService.onPayCallback),!1):(c.openTitle="开通"+SERVICE_TYPE[b.type].name,OpenService.payInfo=copyObj(c),("vip"==OpenService.config.type||""==c.maxUpgradeMonth)&&delete c.maxUpgradeMonth,
void(isVipServiceType(b.type)?requireLib(LIB.ENV.android_qw,function(){setTimeout(function(){openSuperVip(c,OpenService.onPayCallback)},150)}):androidNormalPay(b,c,OpenService.onPayCallback)))},adr_old:function(){
setLoading(!0),requireLib(LIB.ENV.qqapi,function(){b.isSendService&&mqq.compare("5.2")>=0&&(c.provideUin=b.sendServiceUin,c.provideType="uin"),OpenService.payInfo=copyObj(c),androidNormalPay(b,c,OpenService.onPayCallback);
})},other:function(){c.uin=a.uin,b.isSendService&&(c.isSendService=b.isSendService,c.sendServiceUin=b.sendServiceUin),c.disableChannel=b.disableChannel||"",c.hideInfo=b.hideInfo,c.isMobile=a.recParam&&"undefined"!=typeof a.recParam.is_mobile?a.recParam.is_mobile:"0",
c.isPrestore=a.recParam&&"undefined"!=typeof a.recParam.is_prestore?a.recParam.is_prestore:"0",OpenService.payInfo=copyObj(c),setTimeout(function(){goVip(c)},100)}},function(){try{var c=copyObj(OpenService.payInfo);
OpenService.payInfo={},OpenService.payInfo.payParams=c,OpenService.payInfo.js_function=isAction?"openServiceForAction":"openService",OpenService.payInfo.inputConfig=b,reportDC(a.uin,0,a,OpenService.payInfo,"",OpenService.config.aid,"",OpenService.config.type,OpenService.config.month);
}catch(d){}setTimeout(function(){setLoading(!1)},2e3)},b)},!1):!1},init:function(a){return initConfig(a),a=a||{},a.aid=setAidTail(a.aid),a.month=a.month||3,OpenService.config=a,onPayCallbackFunction=a.onPayCallback,
inputParams={fn:"openService",config:a},"undefined"==typeof a.type||""==a.type?(alert("缺少服务类型"),!1):/\s/.test(a.aid)?(alert("aid存在空格字符"),!1):(setLoading(!0),void(isVipServiceType(a.type)?getSmartPayInfo(a,function(a){
OpenService.openServiceCallback(a)}):queryOpenServiceInfo(a,function(a){OpenService.openServiceCallback(a)})))}},UpgradeService={upgradeServiceCallback:function(a){OpenService.userInfo=a;var b=OpenService.config;
return isCanOpenService(b.type,a,b)?(b.upgrade=!0,void getPayParams(b,a,function(c){mergeObjExistAttr(c,b),checkPlatformCallback({wechat:function(){c.disableChannel=b.disableChannel||"",c.account="wechat"==a.recParam.account?"wechat":"",
OpenService.payInfo=copyObj(c),wechatPay(c)},ios:function(){OpenService.openServiceCallback(a)},adr_new:function(){setLoading(!0),c.openTitle=c.upgradeTitle="升级超级会员",OpenService.payInfo=c,requireLib(LIB.ENV.android_qw,function(){
setTimeout(function(){openSuperVip(c,OpenService.onPayCallback)},150)})},adr_old:function(){setLoading(!0),OpenService.openServiceCallback(a)},other:function(){b.upgrade=!0,c.upgrade=b.upgrade,b.isSendService&&(c.isSendService=b.isSendService,
c.sendServiceUin=b.sendServiceUin),c.disableChannel=b.disableChannel||"",c.hideInfo=b.hideInfo,c.isMobile=a.recParam&&"undefined"!=typeof a.recParam.is_mobile?a.recParam.is_mobile:"0",c.isPrestore=a.recParam&&"undefined"!=typeof a.recParam.is_prestore?a.recParam.is_prestore:"0",
OpenService.payInfo=copyObj(c),goVip(c)}},function(){try{OpenService.payInfo={},OpenService.payInfo.payParams=copyObj(c),OpenService.payInfo.js_function=isAction?"openServiceForAction":"openService",OpenService.payInfo.inputConfig=b,
reportDC(a.uin,0,a,OpenService.payInfo,"",b.aid,"",b.type,b.month)}catch(d){}setTimeout(function(){setLoading(!1)},2e3)},b)},!1)):!1},init:function(a){return initConfig(a),a=a||{},a.aid=setAidTail(a.aid),
a.month=a.month||3,OpenService.config=a,onPayCallbackFunction=a.onPayCallback,"undefined"==typeof a.type||""==a.type?(alert("缺少服务类型"),!1):/\s/.test(a.aid)?(alert("aid存在空格字符"),!1):(inputParams={fn:"upgradeService",
config:a},void getSmartPayInfo(a,function(a){UpgradeService.upgradeServiceCallback(a)}))}},initConfig=function(a){isUseWechatSkeyPay=a&&"wechat"==a.account?!0:!1,requireLib(LIB.ENV.qw_util,function(){qw.util.isWechat&&getCookie("wxvip_skey")&&"wechat"!=a.account&&(console.log("\n*\n*\n*\n*\n******************************************\n*【注意！！！！！！！！！！】*\n******************************************\n检测到当前有微信登录态，未传入config.account=wechat，请检查逻辑是否正常，若正常，请忽略！\n*\n*\n*\n*\n*\n*\n*"),
reportDC(cookie_uin,10,"",a,"",a.aid,"",a.type,a.month))})},OpenServiceH5Box={init:function(a){return initConfig(a),isAction=!1,"undefined"==typeof a.type||""==a.type?(alert("缺少服务类型"),!1):(jsExecuteTime=(new Date).getTime(),
onPayCallbackFunction=a.onPayCallback,void requireLib(LIB.ENV.qw_util,function(){window._smartPay.jsExecutePoint.util=(new Date).getTime()-jsExecuteTime,jsExecuteTime=(new Date).getTime(),isVipServiceType(a.type)?(qw.util.isIOS||preLoadPayboxSource(!1),
setLoading(!0),getSmartPayInfo(a,function(b){if(window._smartPay.jsExecutePoint.cgi=(new Date).getTime()-jsExecuteTime,!isCanOpenService(a.type,b,a))return!1;a.aid=getAidByOS(a.aid),"undefined"==typeof a.hp&&"undefined"!=typeof b.recParam&&"undefined"!=typeof b.recParam.hp&&(a.hp=1==b.recParam.hp);
var c=qw.util.isIOS&&!isNewDevice&&1!=b.recParam.hp;preLoadPayboxSource(c),jsExecuteTime=(new Date).getTime(),requireLib(c?LIB.ENV.pay_box_iap:LIB.ENV.pay_box,function(){if(window._smartPay.jsExecutePoint.paybox_js=(new Date).getTime()-jsExecuteTime,
window._smartPay.jsExecutePoint.paybox_start=(new Date).getTime(),b.recParam&&"undefined"!=typeof b.recParam&&"undefined"!=typeof b.recParam.is_mach&&0===parseInt(b.recParam.is_mach)&&c){var d=Storage.get("recordTime");
d&&parseInt(d)&&(new Date).getTime()-d<6e4?a.recordTime=1:a.recordTime=0}a.upgrade=!1;var e=c?qw.smartPay.PayBoxIAP:qw.smartPay.PayBox;checkPayboxVisible(a),e(a,b,{onClose:function(c){payboxVisible=!1,
c="undefined"!=typeof c?c:{},reportDC(b.uin,8,b,a,"",a.aid,"",c.type||a.type,c.month||a.month)},afterInitConfig:function(c){var d=b&&b.recParam&&b.recParam.algorid?b.recParam.algorid:"";reportDC(b.uin,11,b,a,"",a.aid,"",a.type,c.monthList,a._callFrom||"custom",d);
}});var f="undefined"!=typeof b.recParam&&"undefined"!=typeof b.recParam.monthList?b.recParam.monthList.toString().replace(/\,/g,"."):"";reportDC(b.uin,6,b,a,"",a.aid,"",a.type,a.month+"_"+f),b.recParam&&"undefined"!=typeof b.recParam&&("undefined"!=typeof b.recParam.rmkc&&1==b.recParam.rmkc&&reportDC(cookie_uin,65,b,a,"",a.aid,"",a.type,a.month),
"undefined"!=typeof b.recParam.qic&&b.recParam.qic>=2&&reportDC(cookie_uin,64,b,a,"",a.aid,"",a.type,a.month),"undefined"!=typeof b.recParam.dpc&&b.recParam.dpc>=3&&reportDC(cookie_uin,63,b,a,"",a.aid,"",a.type,a.month));
})})):qw.smartPay._openService(a)}))}},UpgradeServiceH5Box={init:function(a){return initConfig(a),isAction=!1,"undefined"==typeof a.type||""==a.type?(alert("缺少服务类型"),!1):(jsExecuteTime=(new Date).getTime(),
onPayCallbackFunction=a.onPayCallback,void requireLib(LIB.ENV.qw_util,function(){window._smartPay.jsExecutePoint.util=(new Date).getTime()-jsExecuteTime,jsExecuteTime=(new Date).getTime(),isVipServiceType(a.type)?(qw.util.isIOS||preLoadPayboxSource(!1),
setLoading(!0),getSmartPayInfo(a,function(b){if(window._smartPay.jsExecutePoint.cgi=(new Date).getTime()-jsExecuteTime,jsExecuteTime=(new Date).getTime(),!isCanOpenService(a.type,b,a))return!1;a.aid=getAidByOS(a.aid),
"undefined"==typeof a.hp&&"undefined"!=typeof b.recParam&&"undefined"!=typeof b.recParam.hp&&(a.hp=1==b.recParam.hp);var c=qw.util.isIOS&&!isNewDevice&&1!=b.recParam.hp;preLoadPayboxSource(c),requireLib(c?LIB.ENV.pay_box_iap:LIB.ENV.pay_box,function(){
if(window._smartPay.jsExecutePoint.paybox_js=(new Date).getTime()-jsExecuteTime,window._smartPay.jsExecutePoint.paybox_start=(new Date).getTime(),b.recParam&&"undefined"!=typeof b.recParam&&"undefined"!=typeof b.recParam.is_mach&&0===parseInt(b.recParam.is_mach)&&c){
var d=Storage.get("recordTime");d&&parseInt(d)&&(new Date).getTime()-d<6e4?a.recordTime=1:a.recordTime=0}a.upgrade=!0;var e=c?qw.smartPay.PayBoxIAP:qw.smartPay.PayBox;checkPayboxVisible(a),e(a,b,{onClose:function(c){
payboxVisible=!1,c="undefined"!=typeof c?c:{},reportDC(b.uin,8,b,a,"",a.aid,"",c.type||a.type,c.month||a.month)},afterInitConfig:function(c){var d=b&&b.recParam&&b.recParam.algorid?b.recParam.algorid:"";
reportDC(b.uin,11,b,a,"",a.aid,"",a.type,c.monthList,a._callFrom||"custom",d)}});var f="undefined"!=typeof b.recParam&&"undefined"!=typeof b.recParam.monthList?b.recParam.monthList.toString().replace(/\,/g,"."):"";
reportDC(b.uin,6,b,a,"",a.aid,"",a.type,a.month+"_"+f),b.recParam&&"undefined"!=typeof b.recParam&&("undefined"!=typeof b.recParam.rmkc&&1==b.recParam.rmkc&&reportDC(cookie_uin,65,b,a,"",a.aid,"",a.type,a.month),
"undefined"!=typeof b.recParam.qic&&b.recParam.qic>=2&&reportDC(cookie_uin,64,b,a,"",a.aid,"",a.type,a.month),"undefined"!=typeof b.recParam.dpc&&b.recParam.dpc>=3&&reportDC(cookie_uin,63,b,a,"",a.aid,"",a.type,a.month));
})})):qw.smartPay._upgradeService(a)}))}},OpenServiceForActionH5Box={init:function(a){return initConfig(a),"undefined"==typeof a.mp||"undefined"==typeof a.aid?(showDialog("缺少参数，必须同时传入MP与AID字段"),!1):(isAction=!0,
void OpenServiceH5Box.init(a))}},OpenServiceForAMSH5Box={init:function(a){if(initConfig(a),"undefined"==typeof a.actid)return showDialog("缺少actid参数"),!1;var b="ams_callback_"+ ++jsonCount;window[b]=function(b){
var c=a.aid||null;if(0==b.ret){var d=b.data||{};c=qw.util.isAndroid?d.android||c:qw.util.isIOS?d.ios||c:d.pc||c}c?(a.aid=c,OpenServiceH5Box.init(a)):alert("调用失败，请稍后再试！")},loadScript("//iyouxi3.vip.qq.com/ams3.0.php?_c=query&actid=88563&query_actid="+a.actid+"&callback="+b,null,null,function(){
a.aid?OpenServiceH5Box.init(a):alert("调用失败，请稍后再试！")})}},getIden=function(a){""!=remarkNum?a&&a(remarkNum):requireLib(LIB.ENV.qqapi,function(){mqq.support&&"undefined"!=typeof mqq.support&&mqq.support("mqq.device.getDeviceInfo")?mqq.device.getDeviceInfo(function(b){
b&&b.identifier?(remarkNum=b.identifier,a&&a(b.identifier)):a&&a("")}):a&&a("")})},recordRemarkCount=function(){var a="record_callback_"+ ++jsonCount;window[a]=function(a){},requireLib(LIB.ENV.qqapi,function(){
mqq.device.getDeviceInfo(function(b){b&&b.identifier&&loadScript("//iyouxi3.vip.qq.com/ams3.0.php?actid=146589&_c=page&g_tk="+qw.util.getCSRFToken()+"&remark_num="+b.identifier+"&callback="+a,null,null,function(){});
})})},_smartPay=function(){var a=null,b=null,c=null,d=null,e=null,f=null,g=null,h=null,i=function(c,i){return h=i.onPayCallback,null!==b?b:(d=c,e=c.recParam,f=c.payParam,void getPayParams(i,c,function(c){
var f=e.recType||"",h=e.recTips||"";b={payParams:c,btnConfig:{btnText:e.buttonText,btnClassName:"",showBtn:e.canOpen||isNewDevice},recommType:f,tips:h,payInfo:d},a.isGoToPay===!0&&k(),"function"==typeof g&&g(b);
},!0))},j=function(c){if(null==b)return!1;c=c||{},c.aid=setAidTail(c.aid);var f=b,g=f.payParams||{},i="undefined"!=typeof c&&c.aid?c.aid:g.aid;return g.aid=i||g.aid,isCanOpenService(e.type,d,{aid:i,type:e.type
})?(c.type=a.type||"vip",c.month=a.month||3,c.aid=g.aid,c.disableChannel=a.disableChannel||"",c.hideInfo=a.hideInfo,c.onPayCallback=h||a.onPayCallback,a.account&&(c.account=a.account),"undefined"!=typeof e.hp&&(c.hp="1"==e.hp),
c._callFrom="unipay",void("undefined"!=typeof e&&"2"==e.openMode?qw.smartPay.upgradeService(c):qw.smartPay.openService(c))):!1},k=function(a){inputParams.fn="pay",inputParams.payParams=b||"",setTimeout(function(){
j(a)})},l=function(h,j){initConfig(h),jsExecuteTime=(new Date).getTime(),onPayCallbackFunction=h.onPayCallback,h=h||{},g=j||null,a=h,inputParams={fn:"initPay",config:h},requireLib(LIB.ENV.qw_util,function(){
getSmartPayInfo({type:"vip",aid:h.aid,isFlushAidData:h.isFlushAidData},function(j){j&&0==j.ret?(a.type=j.recParam.type,a.month=j.recParam.openMonth,c=j,i(j,h)):(e={},f={},d={},isErrorForceVIP=!0,b={payParams:{},
btnConfig:{btnText:"开通QQ会员",btnClassName:"",showBtn:!0},recommType:"new.kt_vip"},"function"==typeof g&&g(b))},!0)})},m=function(){return b},n=function(a,b){if(""==a||!b||""==b||"0"==b)return"";var c=new Date(1e3*(parseInt(a)+24*parseInt(b)*60*60));
return o(c)},o=function(a){var b=new Date(a),c=b.getFullYear(),d=b.getMonth()+1;d=1==d.toString().length?"0"+d:d;var e=b.getDate();return e=1==d.toString().length?"0"+e:e,c+"-"+d+"-"+e},p=function(a){if("function"!=typeof a){
var b={};if(e){var c=parseInt(d.time,10)||(new Date).getTime()/1e3;b={uin:d.uin,is_club:parseInt(e.is_vip)||0,is_superclub:parseInt(e.is_svip)||0,is_year_club:parseInt(e.is_year)||0,club_end_time:n(c,e.vip_endtime),
year_end_time:n(c,e.year_endtime),superclub_end_time:n(c,e.svip_endtime),today:o(1e3*c)}}return b}getUserInfo(a,{type:"vip"})};this.initPay=monitor(l),this.pay=monitor(k),this.openService=monitor(OpenServiceH5Box.init),
this.upgradeService=monitor(UpgradeServiceH5Box.init),this.getData=m,this.getUserInfo=p};requireLib(LIB.ENV.qw_util,function(){});var oldOnload=window.onload;window.onload=function(){preLoadPayboxSource(!1),
"function"==typeof oldOnload&&oldOnload()};try{setTimeout(function(){reportDC(cookie_uin,4)},1e3)}catch(e){}_smartPay.openService=monitor(OpenServiceH5Box.init),_smartPay.upgradeService=monitor(UpgradeServiceH5Box.init),
_smartPay.openServiceForAction=monitor(OpenServiceForActionH5Box.init),_smartPay.openServiceForAMS=monitor(OpenServiceForAMSH5Box.init),_smartPay._openService=monitor(OpenService.init),_smartPay._upgradeService=monitor(UpgradeService.init),
_smartPay._queryFriendInfo=monitor(queryFriendInfo),_smartPay._setSmartPayData=monitor(setSmartPayData),_smartPay.lastSSORequestTime=lastSSORequestTime;var existSmartpay=copyObj(exports.smartPay||{});exports.smartPay=_smartPay;
for(var o in existSmartpay)exports.smartPay[o]=existSmartpay[o]}(window.qw||(window.qw={}))});
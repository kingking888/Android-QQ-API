define("widget/let_it_snow",[],function(a,b,c){!function(a){function b(a){return a.complete?"undefined"!=typeof a.naturalWidth&&0===a.naturalWidth?!1:!0:!1}var c={speed:0,interaction:!0,size:2,count:200,
opacity:0,color:"#ffffff",windPower:0,images:!1};a.fn.let_it_snow=function(d){function e(){l.clearRect(0,0,k.width,k.height);for(var a=0;m>a;a++){var c=j[a],d=n,g=o,i=100,p=c.x,q=c.y,r=Math.sqrt((p-d)*(p-d)+(q-g)*(q-g));
if(i>r){var s=i/(r*r),t=(d-p)/r,u=(g-q)/r,v=s/2;c.velX-=v*t,c.velY-=v*u}else switch(c.velX*=.98,c.velY<=c.speed&&(c.velY=c.speed),h.windPower){case!1:c.velX+=Math.cos(c.step+=.05)*c.stepSize;break;case 0:
c.velX+=Math.cos(c.step+=.05)*c.stepSize;break;default:c.velX+=.01+h.windPower/100}var w=h.color,x=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,y=x.exec(w),z=parseInt(y[1],16)+","+parseInt(y[2],16)+","+parseInt(y[3],16);
if(c.y+=c.velY,c.x+=c.velX,(c.y>=k.height||c.y<=0)&&f(c),(c.x>=k.width||c.x<=0)&&f(c),0==h.images)l.fillStyle="rgba("+z+","+c.opacity+")",l.beginPath(),l.arc(c.x,c.y,c.size,0,2*Math.PI),l.fill();else{var A=h.imageItems[a%h.imageNum];
b(A)&&l.drawImage(A,c.x,c.y,2*c.size,2*c.size)}}requestAnimationFrame(e)}function f(a){if(0==h.windPower||0==h.windPower)a.x=Math.floor(Math.random()*k.width),a.y=0;else if(h.windPower>0){var b=Array(Math.floor(Math.random()*k.width),0),c=Array(0,Math.floor(Math.random()*k.height)),d=Array(b,c),e=d[Math.floor(Math.random()*d.length)];
a.x=e[0],a.y=e[1]}else{var b=Array(Math.floor(Math.random()*k.width),0),c=Array(k.width,Math.floor(Math.random()*k.height)),d=Array(b,c),e=d[Math.floor(Math.random()*d.length)];a.x=e[0],a.y=e[1]}a.size=3*Math.random()+h.size,
a.speed=1*Math.random()+h.speed,a.velY=a.speed,a.velX=0,a.opacity=.5*Math.random()+h.opacity}function g(){for(var b=0;m>b;b++){var c=Math.floor(Math.random()*k.width),d=Math.floor(Math.random()*k.height),f=3*Math.random()+h.size,g=1*Math.random()+h.speed,i=.5*Math.random()+h.opacity;
j.push({speed:g,velY:g,velX:0,x:c,y:d,size:f,stepSize:Math.random()/30,step:0,angle:180,opacity:i})}h.imageItems=[];var l=a("img.lis_flake");for(b=0;b<l.length;b++)h.imageItems.push(l.get(b));h.imageNum=l.length,
e()}var h=a.extend({},c,d),i=a(this),j=[],k=i.get(0),l=k.getContext("2d"),m=h.count,n=-100,o=-100;if(k.width=window.innerWidth,k.height=window.innerHeight,i.on("letItSnow.set",function(a,b,c){h[b]=c}),
function(){var a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)};window.requestAnimationFrame=a;
}(),0!=h.images)for(var p=0;p<h.images.length;p++)a("<img src='"+h.images[p]+"' style='display: none' class='lis_flake'>").prependTo(h.wrapper);g(),a(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO),
this.resizeTO=setTimeout(function(){el2=i.clone(),el2.insertAfter(i),i.remove(),el2.let_it_snow(h)},200)}),1==h.interaction&&k.addEventListener("mousemove",function(a){n=a.clientX,o=a.clientY})}}(window.Zepto||window.jQuery);
});